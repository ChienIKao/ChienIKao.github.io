<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Nothing is true, everything is permitted" href="https://chienikao.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Nothing is true, everything is permitted" href="https://chienikao.github.io/atom.xml"><link rel="alternate" type="application/json" title="Nothing is true, everything is permitted" href="https://chienikao.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="System Software,Assembler"><link rel="canonical" href="https://chienikao.github.io/2023/04/27/SystemSoftware/Ch02_example/"><title>Ch02 - Example - SystemSoftware | ChienI Kao = Nothing is true, everything is permitted</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Ch02 - Example</h1><div class="meta"><span class="item" title="Created: 2023-04-27 09:33:29"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2023-04-27T09:33:29+08:00">2023-04-27</time> </span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">Symbols count in article</span> <span>4.4k</span> <span class="text">words</span> </span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">Reading time</span> <span>4 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">ChienI Kao</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1giph4wqtg4j20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1gicmnywqgpj20zk0m8dwx.jpg"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1giclxfdlttj20zk0m8npd.jpg"></li><li class="item" data-background-image="https://i.imgur.com/Mc5aAdn.jpeg"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1gipew28b65j20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://21r000-image.oss-cn-shanghai.aliyuncs.com/pic2021/6833939bly1gipewf5l51j20zk0m8b29.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">Home</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/SystemSoftware/" itemprop="item" rel="index" title="In SystemSoftware"><span itemprop="name">SystemSoftware</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="en"><link itemprop="mainEntityOfPage" href="https://chienikao.github.io/2023/04/27/SystemSoftware/Ch02_example/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="ChienI Kao"><meta itemprop="description" content=", This is a note blog"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Nothing is true, everything is permitted"></span><div class="body md" itemprop="articleBody"><h2 id="example-of-sic-program"><a class="anchor" href="#example-of-sic-program">#</a> Example of SIC Program</h2><ul><li><strong><code>,X</code> </strong>modifier: <strong>indexed</strong> addressing mode (Line 160, 225)</li><li>Lines <strong>beginning with <code>.</code> </strong>contain <strong>comments</strong> only (Line 110~120, 195~205)</li></ul><h3 id="copy-subroutine"><a class="anchor" href="#copy-subroutine">#</a> <code>COPY</code> Subroutine</h3><ul><li>相當於整個程式的主函式<ul><li>因為 <code>FIRST</code> 包含在此 Subroutine 中</li></ul></li><li>用來把 input device 的檔案複製到 output device<ul><li>透過 <code>RDREC</code> 讀取檔案中的 record 並存到 buffer</li><li>透過 <code>WRREC</code> 把 buffer 中的 record 寫入檔案</li></ul></li><li>檔案由多個 records 組成，但不確定有幾個 record…<ul><li>所以用迴圈把 record 一個一個讀進來，每讀一個 record 就進行寫入</li><li>讀到檔案結尾就結束迴圈</li><li>並且把 ‘E’, ‘O’, ‘F’ <strong>三個字元</strong>寫入檔案</li></ul></li></ul><pre><code>Line 	Loc 	Source statement 		Object code 

5 	1000 	COPY 	START	 1000 		
10 	1000 	FIRST 	STL	 RETADR 	141033 
15 	1003 	CLOOP 	JSUB	 RDREC 		482039 
20 	1006 		LDA 	 LENGTH 	001036 
25 	1009 		COMP	 ZERO 		281030 
30 	100C 		JEQ 	 ENDFIL 	301015 
35 	100F 		JSUB	 WRREC 		482061 
40 	1012 		J 	 CLOOP 		3C1003 
45 	1015 	ENDFIL 	LDA 	 EOF 		00102A 
50 	1018 		STA 	 BUFFER 	0C1039 
55 	101B 		LDA 	 THREE 		00102D 
60 	101E 		STA	 LENGTH 	0C1036 
65 	1021 		JSUB 	 WRREC 		482061 
70 	1024 		LDL 	 RETADR		081033 
75 	1027 		RSUB 			4C0000 
80 	102A 	EOF 	BYTE 	 C'EOF' 	454F46 
85 	102D 	THREE 	WORD 	 3 		000003 
90 	1030 	ZERO 	WORD 	 0 		000000 
95 	1033 	RETADR 	RESW 	 1 		
100 	1036 	LENGTH 	RESW 	 1 		
105 	1039 	BUFFER 	RESB 	 4096 		
</code></pre><ul><li><p><strong>Buffer</strong></p><ul><li>Is <strong>necessary</strong> because the <strong>I/O rates</strong> for the two devices may be very different.<ul><li>such as a disk and a slow printing terminal</li></ul></li><li>宣告在 Line 105，共有 4096 bytes</li></ul></li><li><p><strong>The end of the file to be copied</strong> ( <code>RDREC</code> 在讀的檔案的結尾)<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.36687em;vertical-align:0"></span><span class="mrel">⇒</span></span></span></span> is indicated by a <strong>zero-length record</strong></p><ul><li><code>RDREC</code> 會把這次讀取到的 record 的長度存在變數 <code>LENGTH</code></li><li>Line 20~30: 如果 <code>LENGTH</code> 等於 0 就結束迴圈<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.36687em;vertical-align:0"></span><span class="mrel">⇒</span></span></span></span> 如果讀到長度 0 的 record 就停止讀取<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.36687em;vertical-align:0"></span><span class="mrel">⇒</span></span></span></span> 如果讀到檔案結尾就停止讀取</li></ul></li><li><p>When the <strong>end of file is detected</strong></p><ul><li>The program writes <strong><code>&quot;EOF&quot;</code> </strong>on the output device (Line 45~50)</li></ul></li><li><p>Terminates by executing an <strong><code>RSUB</code> </strong>instruction (Line 75)</p></li></ul><div class="note info"><ul><li>Line 80 宣告的 <code>EOF</code> 是三個字元 <code>'E'</code> , <code>'O'</code> , <code>'F'</code> ，共占用 3 bytes</li><li>所以可以用 <code>LDA EOF</code> 一次把三個字元存在 register A 中 (Line 45)</li><li><code>STA BUFFER</code> 會一次把 register A 中 3 bytes 的資料寫入 <code>BUFFER</code> 的位置中，等同:<ul><li>把 register A 中的三個字元依序放到記憶體 <code>BUFFER</code> , <code>BUFFER+1</code> , <code>BUFFER+2</code> 的三個位置中</li><li><code>BUFFER[0] = 'E'</code> , <code>BUFFER[1] = 'O'</code> , <code>BUFFER[2] = 'F'</code></li></ul></li><li>因為最後還要把 <code>BUFFER</code> 中的三個字元寫到 Output device 中<ul><li><code>LENGTH</code> 要設為 3 (Line 55~60)</li></ul></li></ul></div><h4 id="high-level-pseudo-code"><a class="anchor" href="#high-level-pseudo-code">#</a> High-Level Pseudo Code</h4><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">byte</span> <span class="token constant">BUFFER</span><span class="token punctuation">[</span><span class="token number">4096</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> <span class="token constant">LENGTH</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">void</span> <span class="token function">COPY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token function">RDREC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">LENGTH</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token function">WRREC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token constant">BUFFER</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'E'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token constant">BUFFER</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'O'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token constant">BUFFER</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'F'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token constant">LENGTH</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">WRREC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="rdrec-read-records-subroutine"><a class="anchor" href="#rdrec-read-records-subroutine">#</a> <code>RDREC</code> - Read Records Subroutine</h3><pre><code>Line 	Loc 	Source statement 		Object code 
110 		.			
115 		.	SUBROUTINE TO READ RECORD INTO BUFFER 
120 		.			
125 	2039 	RDREC 	LDX 	 ZERO 		041030 
130 	203C 		LDA 	 ZERO 		001030 
135 	203F 	RLOOP 	TD  	 INPUT 		E0205D 
140 	2042 		JEQ 	 RLOOP 		30203F 
145 	2045 		RD 	 INPUT 		D8205D 
150 	2048 		COMP 	 ZERO 		281030 
155 	204B 		JEQ  	 EXIT 		302057 
160 	204E 		STCH 	 BUFFER,X       549039 
165 	2051 		TIX 	 MAXLEN 	2C205E 
170 	2054 		JLT 	 RLOOP 		38203F 
175 	2057 	EXIT 	STX 	 LENGTH 	101036 
180 	205A 		RSUB 			4C0000 
185 	205D 	INPUT 	BYTE	 X'F1'		F1 
190 	205E 	MAXLEN 	WORD 	 4096 		001000 
</code></pre><ul><li>If a record is longer than the length of the buffer (4096 bytes)<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.36687em;vertical-align:0"></span><span class="mrel">⇒</span></span></span></span> only the first 4096 bytes are copied.</li></ul><div class="note info"><ul><li>Line 135~140<ul><li>迴圈不斷測試 device，直到可以進行 IO</li></ul></li><li>Line 145<ul><li>讀入一個 byte 的資料</li></ul></li><li>Line 150~155<ul><li>如果讀入的資料等於 0 就跳出迴圈</li></ul></li><li>Line 160<ul><li>把讀入的資料存在 <code>BUFFER+X</code></li></ul></li><li>Line 165~170<ul><li>如果讀到的資料超過 4096 bytes 就跳出迴圈</li></ul></li><li>Line 175<ul><li>把讀到的資料長度存在 <code>LENGTH</code></li></ul></li></ul></div><h4 id="high-level-pseudo-code-2"><a class="anchor" href="#high-level-pseudo-code-2">#</a> High-Level Pseudo Code</h4><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">RDREC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">Device</span> <span class="token constant">INPUT</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Device</span><span class="token punctuation">(</span><span class="token string">"F1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> <span class="token constant">MAXLEN</span> <span class="token operator">=</span> <span class="token number">4096</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token class-name">X</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token constant">LENGTH</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token constant">INPUT</span><span class="token punctuation">.</span><span class="token function">isReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        </pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token constant">INPUT</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token constant">BUFFER</span><span class="token punctuation">[</span><span class="token class-name">X</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">X</span><span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">X</span> <span class="token operator">==</span> <span class="token constant">MAXLEN</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token constant">LENGTH</span> <span class="token operator">=</span> <span class="token class-name">X</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="wrrec-write-records-subroutine"><a class="anchor" href="#wrrec-write-records-subroutine">#</a> <code>WRREC</code> - Write Records Subroutine</h3><pre><code>Line 	Loc 	Source statement 		Object code 
195 		.	
200 		.	SUBROUTINE TO WRITE RECORD FROM BUFFER 
205 		.	
210 	2061 	WRREC 	LDX 	 ZERO 		041030 
215 	2064 	WLOOP 	TD 	 OUTPUT 	E02079 
220 	2067 		JEQ 	 WLOOP 		302064 
225 	206A 		LDCH 	 BUFFER,X 	509039 
230 	206D 		WD 	 OUTPUT 	DC2079 
235 	2070 		TIX 	 LENGTH 	2C1036 
240 	2073 		JLT 	 WLOOP 		382064 
245 	2076 		RSUB 			4C0000 
250 	2079 	OUTPUT 	BYTE 	 X'05' 		05 
255 			END 	 FIRST 	
</code></pre><div class="note info"><ul><li>Line 215~220<ul><li>迴圈不斷測試 device，直到可以進行 IO</li></ul></li><li>Line 225~20<ul><li>把 <code>BUFFER[X]</code> 寫入 device</li></ul></li><li>Line 235~240<ul><li>判斷迴圈條件</li></ul></li></ul></div><h4 id="high-level-pseudo-code-3"><a class="anchor" href="#high-level-pseudo-code-3">#</a> High-Level Pseudo Code</h4><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">WRREC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">Device</span> <span class="token constant">OUTPUT</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Device</span><span class="token punctuation">(</span><span class="token string">"05"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">X</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token class-name">X</span> <span class="token operator">!=</span> <span class="token constant">LENGTH</span><span class="token punctuation">;</span> <span class="token class-name">X</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token constant">OUTPUT</span><span class="token punctuation">.</span><span class="token function">isReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token constant">BUFFER</span><span class="token punctuation">[</span><span class="token class-name">X</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token constant">OUTPUT</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="example-of-sicxe-program"><a class="anchor" href="#example-of-sicxe-program">#</a> Example of SIC/XE Program</h2><ul><li><strong>prefix <code>@</code> </strong>: <span class="red">Indirect</span> addressing</li><li><strong>prefix <code>#</code> </strong>: <span class="red">Immediate</span> operands</li><li><strong>prefix #&lt;LABEL&gt;</strong>: operands = the <strong>address</strong> of the LABEL</li></ul><pre><code>Line 	Loc 	   Source statement	 	Object code 	 

5 	0000 	COPY 	START 	0 			 
10 	0000 	FIRST 	STL 	RETADR 		17202D 	 
12 	0003 		LDB    #LENGTH 	69202D 	 
13 			BASE 	LENGTH 			 
15 	0006 	CLOOP  +JSUB 	RDREC 		4B101036 	 
20 	000A 		LDA 	LENGTH 		032026 	 
25 	000D 		COMP   #0 		290000 	 
30 	0010 		JEQ 	ENDFIL 		332007 	 
35 	0013 	       +JSUB 	WRREC 		4B10105D 	 
40 	0017 		J 	CLOOP 		3F2FEC 	 
45 	001A 	ENDFIL 	LDA 	EOF 		032010 	 
50 	001D 		STA 	BUFFER 		0F2016 	 
55 	0020 		LDA    #3 		010003 	 
60 	0023 		STA 	LENGTH 		0F200D 	 
65 	0026 	       +JSUB	WRREC 		4B10105D 	 
70 	002A 		J      @RETADR 	3E2003 	 
80 	002D 	EOF 	BYTE	C'EOF' 		454F46 	 
95 	0030 	RETADR 	RESW 	1 			 
100 	0033 	LENGTH 	RESW	1 			 
105 	0036 	BUFFER 	RESB	4096 			 
110 		.				 
115 		.	SUBROUTINE TO READ RECORD INTO BUFFER 	 
120 		.				 
125 	1036 	RDREC 	CLEAR 	X 		B410 	 
130 	1038 		CLEAR 	A 		B400 	 
132 	103A 		CLEAR 	S 		B440 	 
133 	103C 	       +LDT    #4096		75101000 	 
135 	1040 	RLOOP 	TD 	INPUT 		E32019 	 
140 	1043 		JEQ 	RLOOP 		332FFA 	 
145 	1046 		RD 	INPUT 		DB2013 	 
150 	1049 		COMPR 	A,S 		A004 	 
155 	104B 		JEQ 	EXIT 		332008 	 
160 	104E 		STCH	BUFFER,X 	57C003 	 
165 	1051 		TIXR 	T 		B850 	 
170 	1053 		JLT 	RLOOP 		3B2FEA 	 
175 	1056 	EXIT 	STX 	LENGTH 		134000 	 
180 	1059 		RSUB 			4F0000 	 
185 	105C 	INPUT 	BYTE 	X'F1' 		F1 	 
195 		.		 
200 		.	SUBROUTINE TO WRITE RECORD FROM BUFFER 	 
205 		.		 
210 	105D 	WRREC 	CLEAR 	X 		B410 	 
212 	105F 		LDT 	LENGTH 		774000 	 
215 	1062 	WLOOP 	TD 	OUTPUT 		E32011 	 
220 	1065 		JEQ 	WLOOP 		332FFA 	 
225 	1068 		LDCH 	BUFFER,X 	53C003 	 
230 	106B 		WD 	OUTPUT 		DF2008 	 
235 	106E 		TIXR 	T 		B850 	 
240 	1070 		JLT 	WLOOP 		3B2FEF 	 
245 	1073 		RSUB 			4F0000 	 
250  	1076    OUTPUT BYTE  	X'05'  		05 	 
255                    END     FIRST
</code></pre><div class="tags"><a href="/tags/System-Software/" rel="tag"><i class="ic i-tag"></i> System Software</a> <a href="/tags/Assembler/" rel="tag"><i class="ic i-tag"></i> Assembler</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">Edited on</span> <time title="Modified: 2023-05-17 09:35:50" itemprop="dateModified" datetime="2023-05-17T09:35:50+08:00">2023-05-17</time></span></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>ChienI Kao <i class="ic i-at"><em>@</em></i>Nothing is true, everything is permitted</li><li class="link"><strong>Post link: </strong><a href="https://chienikao.github.io/2023/04/27/SystemSoftware/Ch02_example/" title="Ch02 - Example">https://chienikao.github.io/2023/04/27/SystemSoftware/Ch02_example/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/04/26/Coding/uva/Star1/uva%20706/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;21r000-image.oss-cn-shanghai.aliyuncs.com&#x2F;pic2021&#x2F;6833939bly1gipetfk5zwj20zk0m8e81.jpg" title="uva 706 - LC-Display"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i> Star1</span><h3>uva 706 - LC-Display</h3></a></div><div class="item right"><a href="/2023/04/27/Coding/leetcode/Medium/319%20Bulb%20Switcher/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;21r000-image.oss-cn-shanghai.aliyuncs.com&#x2F;pic2021&#x2F;6833939bly1giclj61ylzj20zk0m8b29.jpg" title="319. Bulb Switcher"><span class="type">Next Post</span> <span class="category"><i class="ic i-flag"></i> Leetcode</span><h3>319. Bulb Switcher</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#example-of-sic-program"><span class="toc-number">1.</span> <span class="toc-text">Example of SIC Program</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#copy-subroutine"><span class="toc-number">1.1.</span> <span class="toc-text">COPY Subroutine</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#high-level-pseudo-code"><span class="toc-number">1.1.1.</span> <span class="toc-text">High-Level Pseudo Code</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rdrec-read-records-subroutine"><span class="toc-number">1.2.</span> <span class="toc-text">RDREC - Read Records Subroutine</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#high-level-pseudo-code-2"><span class="toc-number">1.2.1.</span> <span class="toc-text">High-Level Pseudo Code</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wrrec-write-records-subroutine"><span class="toc-number">1.3.</span> <span class="toc-text">WRREC - Write Records Subroutine</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#high-level-pseudo-code-3"><span class="toc-number">1.3.1.</span> <span class="toc-text">High-Level Pseudo Code</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#example-of-sicxe-program"><span class="toc-number">2.</span> <span class="toc-text">Example of SIC&#x2F;XE Program</span></a></li></ol></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/2023/04/23/SystemSoftware/Appendix_A/" rel="bookmark" title="Appendix A">Appendix A</a></li><li><a href="/2023/04/24/SystemSoftware/Ch01_Background/" rel="bookmark" title="Ch01 - Background">Ch01 - Background</a></li><li><a href="/2023/04/25/SystemSoftware/Ch01_example/" rel="bookmark" title="Ch01 - Example">Ch01 - Example</a></li><li><a href="/2023/04/26/SystemSoftware/Ch02_Assembler/" rel="bookmark" title="Ch02 - Assemblers">Ch02 - Assemblers</a></li><li class="active"><a href="/2023/04/27/SystemSoftware/Ch02_example/" rel="bookmark" title="Ch02 - Example">Ch02 - Example</a></li><li><a href="/2023/05/23/SystemSoftware/Ch03_Loaders_and_Linkers/" rel="bookmark" title="Ch03 - Loaders and Linkers">Ch03 - Loaders and Linkers</a></li><li><a href="/2023/05/30/SystemSoftware/Ch04_Macro_Processors/" rel="bookmark" title="Ch04 - Macro Processors">Ch04 - Macro Processors</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="ChienI Kao" data-src="/images/avatar.jpg"><p class="name" itemprop="name">ChienI Kao</p><div class="description" itemprop="description">This is a note blog</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">73</span> <span class="name">posts</span></a></div><div class="item categories"><a href="/categories/"><span class="count">19</span> <span class="name">categories</span></a></div><div class="item tags"><a href="/tags/"><span class="count">63</span> <span class="name">tags</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NoaWVuSUthby9DaGllbklLYW8uZ2l0aHViLmlv" title="https:&#x2F;&#x2F;github.com&#x2F;ChienIKao&#x2F;ChienIKao.github.io"><i class="ic i-github"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmFsZW45MTEwMThAZ21haWwuY29t" title="mailto:alen911018@gmail.com"><i class="ic i-envelope"></i></span> <span class="exturl item instagram" data-url="aHR0cHM6Ly9pbnN0YWdyYW0uY29tL2NoaWVuaV8xMDE4" title="https:&#x2F;&#x2F;instagram.com&#x2F;chieni_1018"><i class="ic i-instagram"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>Home</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/04/26/Coding/uva/Star1/uva%20706/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/04/27/Coding/leetcode/Medium/319%20Bulb%20Switcher/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Easy/" title="In Easy">Easy</a></div><span><a href="/2023/05/07/Coding/leetcode/Easy/2620%20Counter/" title="2620. Counter">2620. Counter</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Medium/" title="In Medium">Medium</a></div><span><a href="/2023/05/04/Coding/leetcode/Hard/649%20Dota2%20Senate/" title="649. Dota2 Senate">649. Dota2 Senate</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/UVA/" title="In UVA">UVA</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/UVA/Star1/" title="In Star1">Star1</a></div><span><a href="/2023/04/20/Coding/uva/Star1/uva%20499/" title="uva 499 - What’s The Frequency, Kenneth?">uva 499 - What’s The Frequency, Kenneth?</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Easy/" title="In Easy">Easy</a></div><span><a href="/2023/05/09/Coding/leetcode/Easy/2634%20Filter%20Elements%20from%20Array/" title="2634. Filter Elements from Array">2634. Filter Elements from Array</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Medium/" title="In Medium">Medium</a></div><span><a href="/2023/05/15/Coding/leetcode/Medium/2623%20Memoize/" title="2623. Memoize">2623. Memoize</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Medium/" title="In Medium">Medium</a></div><span><a href="/2023/04/19/Coding/leetcode/Medium/1372%20Longest%20ZigZag%20Path%20in%20a%20Binary%20Tree/" title="1372. Longest ZigZag Path in a Binary Tree">1372. Longest ZigZag Path in a Binary Tree</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Easy/" title="In Easy">Easy</a></div><span><a href="/2023/05/07/Coding/leetcode/Easy/2665%20Counter%20II/" title="2665. Counter II">2665. Counter II</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Easy/" title="In Easy">Easy</a></div><span><a href="/2023/05/08/Coding/leetcode/Easy/2635%20Apply%20Transform%20Over%20Each%20Element%20in%20Array/" title="2635. Apply Transform Over Each Element in Array">2635. Apply Transform Over Each Element in Array</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Easy/" title="In Easy">Easy</a></div><span><a href="/2023/05/01/Coding/leetcode/Easy/1491%20Average%20Salary%20Excluding%20the%20Minimum%20and%20Maximum%20Salary/" title="1491. Average Salary Excluding the Minimum and Maximum Salary">1491. Average Salary Excluding the Minimum and Maximum Salary</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Coding/" title="In Coding">Coding</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/" title="In Leetcode">Leetcode</a> <i class="ic i-angle-right"></i> <a href="/categories/Coding/Leetcode/Easy/" title="In Easy">Easy</a></div><span><a href="/2023/05/02/Coding/leetcode/Easy/1822%20Sign%20of%20the%20Product%20of%20an%20Array/" title="1822. Sign of the Product of an Array">1822. Sign of the Product of an Array</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-ChienI Kao"></i> </span><span class="author" itemprop="copyrightHolder">ChienI Kao @ ChienI Kao</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="Symbols count total">194k words</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="Reading time total">2:57</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/04/27/SystemSoftware/Ch02_example/",favicon:{show:"（●´3｀●）Goooood",hide:"(´Д｀)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>