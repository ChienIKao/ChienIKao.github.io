{
    "version": "https://jsonfeed.org/version/1",
    "title": "Nothing is true, everything is permitted",
    "subtitle": "",
    "icon": "https://chienikao.github.io/images/favicon.ico",
    "description": "This is a note blog",
    "home_page_url": "https://chienikao.github.io",
    "items": [
        {
            "id": "https://chienikao.github.io/2023/05/03/Algorithm/Branch%20and%20Bound/",
            "url": "https://chienikao.github.io/2023/05/03/Algorithm/Branch%20and%20Bound/",
            "title": "Branch and Bound (B&B)",
            "date_published": "2023-05-03T10:11:54.000Z",
            "content_html": "<h2 id=\"branch-and-bound\"><a class=\"anchor\" href=\"#branch-and-bound\">#</a> Branch and Bound</h2>\n<ul>\n<li>The branch-and-bound algorithm developed here is <span class=\"red\">an improvement on the backtracking algorithm</span>.</li>\n<li>The B&amp;B design strategy is very similar to backtracking in that a state space tree is used to solve a problem.</li>\n<li>B&amp;B vs. Backtracking\n<ul>\n<li>B&amp;B does <strong>not limit</strong> us to any particular way of <strong>traversing</strong> the tree and</li>\n<li>B&amp;B is used only for optimization problems</li>\n</ul>\n</li>\n<li>A B&amp;B algorithm computes a number (<strong>bound</strong>) at a node to <strong>determine whether the node is promising</strong>.\n<ul>\n<li>If that bound is <strong>no better than</strong> the value of the best solution found so far, the node is <strong>nonpromising</strong>.</li>\n<li>Otherwise, it is <strong>promising</strong>.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"example\"><a class=\"anchor\" href=\"#example\">#</a> <a href=\"./Backtracking.md\">Example</a></h3>\n",
            "tags": [
                "Algorithm",
                "Algorithm"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/05/03/Coding/leetcode/Easy/2215%20Find%20the%20Difference%20of%20Two%20Arrays/",
            "url": "https://chienikao.github.io/2023/05/03/Coding/leetcode/Easy/2215%20Find%20the%20Difference%20of%20Two%20Arrays/",
            "title": "2215. Find the Difference of Two Arrays",
            "date_published": "2023-05-03T02:39:26.000Z",
            "content_html": "<p>⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvZmluZC10aGUtZGlmZmVyZW5jZS1vZi10d28tYXJyYXlzLw==\">題目敘述</span></h2>\n<p>Given two <strong>0-indexed</strong> integer arrays  <code>nums1</code>  and  <code>nums2</code> , return a list  <code>answer</code>  of size  <code>2</code>  where:</p>\n<ul>\n<li><code>answer[0]</code>  <em>is a list of all <strong>distinct</strong> integers in  <code>nums1</code>  which are <strong>not</strong> present in  <code>nums2</code> </em>.</li>\n<li><code>answer[1]</code>  is a list of all <strong>distinct</strong> integers in  <code>nums2</code>  which are <strong>not</strong> present in  <code>nums1</code> .</li>\n</ul>\n<p><strong>Note</strong> that the integers in the lists may be returned in <strong>any</strong> order.</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<blockquote>\n<p><strong>Input:</strong> nums1 = [1,2,3], nums2 = [2,4,6]<br>\n<strong>Output:</strong> [[1,3],[4,6]]<br>\n<strong>Explanation:</strong><br>\nFor nums1, nums1[1] = 2 is present at index 0 of nums2, whereas nums1[0] = 1 and nums1[2] = 3 are not present in nums2. Therefore, answer[0] = [1,3].<br>\nFor nums2, nums2[0] = 2 is present at index 1 of nums1, whereas nums2[1] = 4 and nums2[2] = 6 are not present in nums2. Therefore, answer[1] = [4,6].</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<blockquote>\n<p><strong>Input:</strong> nums1 = [1,2,3,3], nums2 = [1,1,2,2]<br>\n<strong>Output:</strong> [[3],[]]<br>\n<strong>Explanation:</strong><br>\nFor nums1, nums1[2] and nums1[3] are not present in nums2. Since nums1[2] == nums1[3], their value is only included once and answer[0] = [3].<br>\nEvery integer in nums2 is present in nums1. Therefore, answer[1] = [].</p>\n</blockquote>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    vector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> <span class=\"token function\">findDifference</span><span class=\"token punctuation\">(</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> nums1<span class=\"token punctuation\">,</span> vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> nums2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        vector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> tmp<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        map<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token operator\">></span> mp1<span class=\"token punctuation\">,</span> mp2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n <span class=\"token operator\">:</span> nums1<span class=\"token punctuation\">)</span> mp1<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n <span class=\"token operator\">:</span> nums2<span class=\"token punctuation\">)</span> mp2<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> m <span class=\"token operator\">:</span> mp1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mp2<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        res<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        tmp<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> m <span class=\"token operator\">:</span> mp2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mp1<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        res<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayList</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findDifference</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> nums1<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> nums2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> ans <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> map1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> map2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n <span class=\"token operator\">:</span> nums1<span class=\"token punctuation\">)</span> map1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n <span class=\"token operator\">:</span> nums2<span class=\"token punctuation\">)</span> map2<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> temp1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n <span class=\"token operator\">:</span> nums1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>map2<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>temp1<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                temp1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        ans<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>temp1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> temp2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n <span class=\"token operator\">:</span> nums2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>map1<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>temp2<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                temp2<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        ans<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>temp2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">findDifference</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> nums1<span class=\"token punctuation\">,</span> nums2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>    </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>nums1<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>nums2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>nums2<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>nums1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Easy",
                "Leetcode",
                "Easy",
                "Array",
                "Hash Table"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/05/02/Coding/leetcode/Easy/1822%20Sign%20of%20the%20Product%20of%20an%20Array/",
            "url": "https://chienikao.github.io/2023/05/02/Coding/leetcode/Easy/1822%20Sign%20of%20the%20Product%20of%20an%20Array/",
            "title": "1822. Sign of the Product of an Array",
            "date_published": "2023-05-02T02:27:18.000Z",
            "content_html": "<p>⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvc2lnbi1vZi10aGUtcHJvZHVjdC1vZi1hbi1hcnJheS8=\">題目敘述</span></h2>\n<p>There is a function  <code>signFunc(x)</code>  that returns:</p>\n<ul>\n<li><code>1</code>  if  <code>x</code>  is positive.</li>\n<li><code>-1</code>  if  <code>x</code>  is negative.</li>\n<li><code>0</code>  if  <code>x</code>  is equal to  <code>0</code> .</li>\n</ul>\n<p>You are given an integer array  <code>nums</code> . Let  <code>product</code>  be the product of all values in the array  <code>nums</code> .</p>\n<p>Return  <code>signFunc(product)</code> .</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<blockquote>\n<p><strong>Input</strong>: nums = [-1,-2,-3,-4,3,2,1]<br>\n<strong>Output</strong>: 1<br>\n<strong>Explanation</strong>: The product of all values in the array is 144, and signFunc(144) = 1</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<blockquote>\n<p><strong>Input</strong>: nums = [1,5,0,2,-3]<br>\n<strong>Output</strong>: 0<br>\n<strong>Explanation</strong>: The product of all values in the array is 0, and signFunc(0) = 0</p>\n</blockquote>\n<h3 id=\"example-3\"><a class=\"anchor\" href=\"#example-3\">#</a> Example 3</h3>\n<blockquote>\n<p><strong>Input</strong>: nums = [-1,1,-1,1,-1]<br>\n<strong>Output</strong>: -1<br>\n<strong>Explanation</strong>: The product of all values in the array is -1, and signFunc(-1) = -1</p>\n</blockquote>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">arraySign</span><span class=\"token punctuation\">(</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> nums<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">int</span> sign <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n <span class=\"token operator\">:</span> nums<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> sign <span class=\"token operator\">*=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sign <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">arraySign</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> nums<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">int</span> sign <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n <span class=\"token operator\">:</span> nums<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> sign <span class=\"token operator\">*=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">return</span> sign <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">arraySign</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> nums<span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        sign <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> nums<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">if</span> n <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">if</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span> sign <span class=\"token operator\">*=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">1</span> <span class=\"token keyword\">if</span> sign <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token keyword\">else</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Easy",
                "Leetcode",
                "Math",
                "Easy",
                "Array"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/05/01/Coding/leetcode/Easy/1491%20Average%20Salary%20Excluding%20the%20Minimum%20and%20Maximum%20Salary/",
            "url": "https://chienikao.github.io/2023/05/01/Coding/leetcode/Easy/1491%20Average%20Salary%20Excluding%20the%20Minimum%20and%20Maximum%20Salary/",
            "title": "1491. Average Salary Excluding the Minimum and Maximum Salary",
            "date_published": "2023-05-01T06:58:59.000Z",
            "content_html": "<p>⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvYXZlcmFnZS1zYWxhcnktZXhjbHVkaW5nLXRoZS1taW5pbXVtLWFuZC1tYXhpbXVtLXNhbGFyeS8=\">題目敘述</span></h2>\n<p>You are given an array of <strong>unique</strong> integers  <code>salary</code>  where  <code>salary[i]</code>  is the salary of the  <code>ith</code>  employee.</p>\n<p>Return <em>the average salary of employees excluding the minimum and maximum salary</em>. Answers within  <code>10-5</code>  of the actual answer will be accepted.</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<blockquote>\n<p><strong>Input:</strong> salary = [4000,3000,1000,2000]<br>\n<strong>Output:</strong> 2500.00000<br>\n<strong>Explanation:</strong> Minimum salary and maximum salary are 1000 and 4000 respectively.<br>\nAverage salary excluding minimum and maximum salary is (2000+3000) / 2 = 2500</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<blockquote>\n<p><strong>Input:</strong> salary = [1000,2000,3000]<br>\n<strong>Output:</strong> 2000.00000<br>\n<strong>Explanation:</strong> Minimum salary and maximum salary are 1000 and 3000 respectively.<br>\nAverage salary excluding minimum and maximum salary is (2000) / 1 = 2000</p>\n</blockquote>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">double</span> <span class=\"token function\">average</span><span class=\"token punctuation\">(</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> salary<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">int</span> mn <span class=\"token operator\">=</span> salary<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> mx <span class=\"token operator\">=</span> salary<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">double</span> res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> s <span class=\"token operator\">:</span> salary<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            res <span class=\"token operator\">+=</span> s<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            mn <span class=\"token operator\">=</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>mn<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            mx <span class=\"token operator\">=</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>mx<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        res <span class=\"token operator\">-=</span> <span class=\"token punctuation\">(</span>mn <span class=\"token operator\">+</span> mx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> res <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Arrays</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">average</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> salary<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">long</span> sum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> salary<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            sum <span class=\"token operator\">+=</span> salary<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> sum <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">average</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> salary<span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        min_salary <span class=\"token operator\">=</span> <span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        max_salary <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        total_salary <span class=\"token operator\">=</span> <span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> min_salary <span class=\"token operator\">-</span> max_salary</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        num_employees <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> total_salary <span class=\"token operator\">/</span> num_employees</pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Easy",
                "Leetcode",
                "Easy",
                "Array",
                "Sorting"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/30/Coding/leetcode/Hard/1579%20Remove%20Max%20Number%20of%20Edges%20to%20Keep%20Graph%20Fully%20Traversable/",
            "url": "https://chienikao.github.io/2023/04/30/Coding/leetcode/Hard/1579%20Remove%20Max%20Number%20of%20Edges%20to%20Keep%20Graph%20Fully%20Traversable/",
            "title": "1579. Remove Max Number of Edges to Keep Graph Fully Traversable",
            "date_published": "2023-04-30T04:42:38.000Z",
            "content_html": "<p>⭐️⭐️⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvcmVtb3ZlLW1heC1udW1iZXItb2YtZWRnZXMtdG8ta2VlcC1ncmFwaC1mdWxseS10cmF2ZXJzYWJsZS8=\">題目敘述</span></h2>\n<p>Alice and Bob have an undirected graph of  <code>n</code>  nodes and three types of edges:</p>\n<ul>\n<li>Type 1: Can be traversed by Alice only.</li>\n<li>Type 2: Can be traversed by Bob only.</li>\n<li>Type 3: Can be traversed by both Alice and Bob.</li>\n</ul>\n<p>Given an array  <code>edges</code>  where  <code>edges[i] = [typei, ui, vi]</code>  represents a bidirectional edge of type  <code>typei</code>  between nodes  <code>ui</code>  and  <code>vi</code> , find the maximum number of edges you can remove so that after removing the edges, the graph can still be fully traversed by both Alice and Bob. The graph is fully traversed by Alice and Bob if starting from any node, they can reach all other nodes.</p>\n<p>Return <em>the maximum number of edges you can remove, or return  <code>-1</code>  if Alice and Bob cannot fully traverse the graph</em>.</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<p><img data-src=\"https://i.imgur.com/2SsBc9T.png\" alt=\"\"></p>\n<blockquote>\n<p><strong>Input</strong>: n = 4, edges = [[3,1,2],[3,2,3],[1,1,3],[1,2,4],[1,1,2],[2,3,4]]<br>\n<strong>Output</strong>: 2<br>\n<strong>Explanation</strong>: If we remove the 2 edges [1,1,2] and [1,1,3]. The graph will still be fully traversable by Alice and Bob. Removing any additional edge will not make it so. So the maximum number of edges we can remove is 2.</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<p><img data-src=\"https://i.imgur.com/sNylQd6.png\" alt=\"\"></p>\n<blockquote>\n<p><strong>Input</strong>: n = 4, edges = [[3,1,2],[3,2,3],[1,1,4],[2,1,4]]<br>\n<strong>Output</strong>: 0<br>\n<strong>Explanation</strong>: Notice that removing any edge will not make the graph fully traversable by Alice and Bob.</p>\n</blockquote>\n<h3 id=\"example-3\"><a class=\"anchor\" href=\"#example-3\">#</a> Example 3</h3>\n<p><img data-src=\"https://i.imgur.com/jYOpe7F.png\" alt=\"\"></p>\n<blockquote>\n<p><strong>Input</strong>: n = 4, edges = [[3,2,3],[1,1,2],[2,3,4]]<br>\n<strong>Output</strong>: -1<br>\n<strong>Explanation</strong>: In the current graph, Alice cannot reach node 4 from the other nodes. Likewise, Bob cannot reach 1. Therefore it’s impossible to make the graph fully traversable.</p>\n</blockquote>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">UnionFind</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> parent<span class=\"token punctuation\">,</span> rank<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">int</span> nodes<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token function\">UnionFind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token function\">parent</span><span class=\"token punctuation\">(</span>n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">rank</span><span class=\"token punctuation\">(</span>n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">nodes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">find</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">bool</span> <span class=\"token function\">union_</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">int</span> px <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">int</span> py <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>px <span class=\"token operator\">==</span> py<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> rank<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> rank<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> py<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            parent<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">maxNumEdgesToRemove</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">,</span> vector<span class=\"token operator\">&lt;</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span><span class=\"token operator\">&amp;</span> edges<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        UnionFind <span class=\"token function\">Alice</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        UnionFind <span class=\"token function\">Bob</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token keyword\">int</span> res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> edge <span class=\"token operator\">:</span> edges<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Alice<span class=\"token punctuation\">.</span><span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> edge<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> Bob<span class=\"token punctuation\">.</span><span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> edge<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                    Alice<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                    Bob<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                    res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span><span class=\"token operator\">&amp;</span> edge <span class=\"token operator\">:</span> edges<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Alice<span class=\"token punctuation\">.</span><span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> edge<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> Alice<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                <span class=\"token keyword\">else</span> res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Bob<span class=\"token punctuation\">.</span><span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> edge<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> Bob<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>                <span class=\"token keyword\">else</span> res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>Alice<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">==</span> Bob<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">&amp;&amp;</span> Alice<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">==</span> n<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> res <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token class-name\">UnionFind</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> parent<span class=\"token punctuation\">,</span> rank<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">int</span> nodes<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">UnionFind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            rank <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            nodes <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> x<span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">return</span> parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">union_</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">int</span> px <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">int</span> py <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>px <span class=\"token operator\">==</span> py<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> rank<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> rank<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> py<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                parent<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">maxNumEdgesToRemove</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> edges<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token class-name\">UnionFind</span> <span class=\"token class-name\">Alice</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UnionFind</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token class-name\">UnionFind</span> <span class=\"token class-name\">Bob</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UnionFind</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">int</span> res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> edge <span class=\"token operator\">:</span> edges<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Alice</span><span class=\"token punctuation\">.</span><span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> edge<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token class-name\">Bob</span><span class=\"token punctuation\">.</span><span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> edge<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                    <span class=\"token class-name\">Alice</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                    <span class=\"token class-name\">Bob</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> edge <span class=\"token operator\">:</span> edges<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Alice</span><span class=\"token punctuation\">.</span><span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> edge<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Alice</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                <span class=\"token keyword\">else</span> res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Bob</span><span class=\"token punctuation\">.</span><span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> edge<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Bob</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>                <span class=\"token keyword\">else</span> res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Alice</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">==</span> <span class=\"token class-name\">Bob</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">&amp;&amp;</span> <span class=\"token class-name\">Alice</span><span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">==</span> n <span class=\"token operator\">?</span> res <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">UnionFind</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        self<span class=\"token punctuation\">.</span>parent <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        self<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        self<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> x<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">union_</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        px <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        py <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">if</span> px <span class=\"token operator\">==</span> py<span class=\"token punctuation\">:</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> px</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">elif</span> self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> py</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> px</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">maxNumEdgesToRemove</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> edges<span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span>List<span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        Alice <span class=\"token operator\">=</span> UnionFind<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        Bob <span class=\"token operator\">=</span> UnionFind<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        res <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">for</span> t<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> j <span class=\"token keyword\">in</span> edges<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token keyword\">if</span> t <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                <span class=\"token keyword\">if</span> Alice<span class=\"token punctuation\">.</span>union_<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> Bob<span class=\"token punctuation\">.</span>union_<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    Alice<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                    Bob<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span> res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">for</span> t<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> j <span class=\"token keyword\">in</span> edges<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token keyword\">if</span> t <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                <span class=\"token keyword\">if</span> Alice<span class=\"token punctuation\">.</span>union_<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Alice<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span> res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token keyword\">if</span> t <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                <span class=\"token keyword\">if</span> Bob<span class=\"token punctuation\">.</span>union_<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Bob<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span> res <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token keyword\">return</span> res <span class=\"token keyword\">if</span> Alice<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">==</span> Bob<span class=\"token punctuation\">.</span>nodes <span class=\"token operator\">==</span> n <span class=\"token keyword\">else</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Hard",
                "Union Find",
                "Leetcode",
                "Hard",
                "Graph"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/28/Algorithm/Union%20Find/",
            "url": "https://chienikao.github.io/2023/04/28/Algorithm/Union%20Find/",
            "title": "Union Find",
            "date_published": "2023-04-28T02:43:29.000Z",
            "content_html": "<p><strong>Union-Find data structure</strong> 又稱 <strong>Disjoint-set data structure</strong>，用於<strong>處理不相交集合 (disjoint set) 的合併 (Union) 與查詢 (Find) 問題。</strong></p>\n<h2 id=\"disjoint-set\"><a class=\"anchor\" href=\"#disjoint-set\">#</a> Disjoint Set</h2>\n<p><em><strong>Disjoint set</strong></em> 表示數個 set 之間，擁有的元素都不相同，彼此<strong>互斥 (disjoint)</strong>。</p>\n<p>可以去看看這篇文章 - <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oYWNrbWQuaW8vQENMS08vcmtSVlNfby00P3R5cGU9dmlldw==\">disjoint set</span></p>\n<h2 id=\"union-find-algorithm\"><a class=\"anchor\" href=\"#union-find-algorithm\">#</a> Union Find Algorithm</h2>\n<!-- 補forest資料結構 -->\n<p>Union-Find Data Structure 是一種 <a href=\"\"><strong>forest</strong></a> 結構，forest 是一種 N-way Tree 結構，互相連通的節點放在同一個 set，任意選擇其中一個節點作為 root。</p>\n<p><img data-src=\"https://i.imgur.com/606kd33.png\" alt=\"\"></p>\n<p>Union Find 提供以下兩種操作:</p>\n<ul>\n<li>\n<p><strong>Find:</strong> 找到 input 節點的 root，可以藉此確定 input 節點屬於哪個子集。</p>\n<ul>\n<li>Find 函數能夠找到節點的 root。</li>\n<li>如果要確認兩個節點是否為同一子集，只要分別找兩個節點的 root ，如果一樣，即屬於同一子集 (為 connected component)。</li>\n<li>Find 的時間複雜度最差就是遍歷整棵樹，時間複雜度為 O (n)。</li>\n</ul>\n</li>\n<li>\n<p><strong>Union:</strong> 將兩個子集合併為同一子集。</p>\n<ul>\n<li>Union 能夠將兩個所屬的子集進行合併。</li>\n<li>最簡單的方法就是將一個子集的 root 直接作為另一子集 root 的子節點即可</li>\n</ul>\n<p><img data-src=\"https://i.imgur.com/Z3V1vnw.png\" alt=\"\"></p>\n<ul>\n<li>Union 的實踐需要依靠 find，因此時間複雜度最差為 O (n)。</li>\n</ul>\n</li>\n</ul>\n<p>以上圖的兩個樹來說，以 0 為 root 的樹大於以 2 為 root 的樹，如果將後者合併到前者下，合併過後的樹高度會比較小，根據這個觀察可以歸納出，如果兩個子集要合併，應該讓<strong>高度較小的子集合併到高度比較大的子集下</strong>，可以避免樹的不平衡。</p>\n<h2 id=\"find-with-path-compression\"><a class=\"anchor\" href=\"#find-with-path-compression\">#</a> Find with Path Compression</h2>\n<p>Path compression 是一個優化技巧，也有人稱為 set collapsing, <strong>讓每個節點直接連到它的 root 節點</strong>，這樣 Find 跟 Union 操作的時間複雜度可以降到 O (1)。</p>\n<p><img data-src=\"https://i.imgur.com/0Nl0hMt.png\" alt=\"\"></p>\n<p>但要如何有效地讓所有節點 parent node 都指向 root 呢？<br>\n 答案就是透過<strong>遞迴</strong>，透過遞迴找到 root， 再依序回傳更新為每個走訪過的 parent。</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> root<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> root<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"union-by-sizerank\"><a class=\"anchor\" href=\"#union-by-sizerank\">#</a> Union by Size/Rank</h2>\n<p>應用 <em><strong>path compression</strong></em> 後的樹可以盡可能縮減樹的高度 ，若要再 Union 兩個壓縮後的子集，可以採取 <em><strong>union by size</strong></em> 技巧，<strong>將子節點比較少的 root 加入比較大的子集。</strong></p>\n<p>依照 rank 來排序，起初每個點的 rank 均為 0 ，依據 rank 大小來決定如何合併，<strong>rank 大的子集合併小的，合併別人的子集其 rank 往上增加。</strong></p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">unionSet</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">int</span> root_x <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> root_y <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>root_x <span class=\"token operator\">==</span> root_y<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>root_x<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> rank<span class=\"token punctuation\">[</span>root_y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> root<span class=\"token punctuation\">[</span>root_y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> root_x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>root_x<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> rank<span class=\"token punctuation\">[</span>root_y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> root<span class=\"token punctuation\">[</span>root_x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> root_y<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        root<span class=\"token punctuation\">[</span>root_y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> root_x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        rank<span class=\"token punctuation\">[</span>root_x<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>  </pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>一開始每個點的  <code>rank</code>  都為 0 ，有一點特別容易寫出 bug ，在比較彼此  <code>rank</code>  或是更新  <code>rank</code>  時候，需要以  <code>find()</code>  所找出的  <code>root</code>  來比，不是各個節點本身的  <code>rank</code>  。</p>\n",
            "tags": [
                "Algorithm",
                "Algorithm",
                "Union Find",
                "Data Structure"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/28/Coding/leetcode/Hard/839%20Similar%20String%20Groups/",
            "url": "https://chienikao.github.io/2023/04/28/Coding/leetcode/Hard/839%20Similar%20String%20Groups/",
            "title": "839. Similar String Groups",
            "date_published": "2023-04-28T02:36:34.000Z",
            "content_html": "<p>⭐️⭐️⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvc2ltaWxhci1zdHJpbmctZ3JvdXBzL2Rlc2NyaXB0aW9uLw==\">題目敘述</span></h2>\n<p>Two strings  <code>X</code>  and  <code>Y</code>  are similar if we can swap two letters (in different positions) of  <code>X</code> , so that it equals  <code>Y</code> . Also two strings  <code>X</code>  and  <code>Y</code>  are similar if they are equal.</p>\n<p>For example,  <code>&quot;tars&quot;</code>  and  <code>&quot;rats&quot;</code>  are similar (swapping at positions 0 and 2), and  <code>&quot;rats&quot;</code>  and  <code>&quot;arts&quot;</code>  are similar, but  <code>&quot;star&quot;</code>  is not similar to  <code>&quot;tars&quot;</code> ,  <code>&quot;rats&quot;</code> , or  <code>&quot;arts&quot;</code> .</p>\n<p>Together, these form two connected groups by similarity:  <code>&#123;&quot;tars&quot;, &quot;rats&quot;, &quot;arts&quot;&#125;</code>  and  <code>&#123;&quot;star&quot;&#125;</code> .  Notice that  <code>&quot;tars&quot;</code>  and  <code>&quot;arts&quot;</code>  are in the same group even though they are not similar.  Formally, each group is such that a word is in the group if and only if it is similar to at least one other word in the group.</p>\n<p>We are given a list  <code>strs</code>  of strings where every string in  <code>strs</code>  is an anagram of every other string in  <code>strs</code> . How many groups are there?</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<blockquote>\n<p><strong>Input</strong>: strs = [“tars”,“rats”,“arts”,“star”]<br>\n<strong>Output</strong>: 2</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<blockquote>\n<p><strong>Input</strong>: strs = [“omv”,“ovm”]<br>\n<strong>Output</strong>: 1</p>\n</blockquote>\n<h2 id=\"解題思路\"><a class=\"anchor\" href=\"#解題思路\">#</a> 解題思路</h2>\n<p>遍歷整個陣列將相似的字串組合為群組，最後輸出群組的數量。</p>\n<p>比對字串相似的方法，如果差異的字元數量大於 2，則兩字串不相似。</p>\n<p>Union Find 的部分可以參考這個文章 <a href=\"https://chienikao.github.io/2023/04/28/Algorithm/Union%20Find/\">連結</a></p>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> parent<span class=\"token punctuation\">,</span> rank<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">int</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">bool</span> <span class=\"token function\">similar</span><span class=\"token punctuation\">(</span>string<span class=\"token operator\">&amp;</span> s1<span class=\"token punctuation\">,</span> string<span class=\"token operator\">&amp;</span> s2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s1 <span class=\"token operator\">==</span> s2<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">int</span> diff <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span>s1<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> s2<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                diff<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>diff <span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> diff <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">==</span> parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">return</span> parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">unionSet</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">int</span> px <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> py <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>px <span class=\"token operator\">==</span> py<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> rank<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> rank<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> py<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            parent<span class=\"token punctuation\">[</span>py<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            rank<span class=\"token punctuation\">[</span>px<span class=\"token punctuation\">]</span> <span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        res<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">numSimilarGroups</span><span class=\"token punctuation\">(</span>vector<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> strs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> strs<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        res <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        parent<span class=\"token punctuation\">.</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        rank<span class=\"token punctuation\">.</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> parent<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">similar</span><span class=\"token punctuation\">(</span>strs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> strs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">unionSet</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token class-name\">UnionFind</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> parent<span class=\"token punctuation\">,</span> rank<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">int</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">UnionFind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            rank <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            count <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                parent<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">return</span> parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">union</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token keyword\">int</span> rootX <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token keyword\">int</span> rootY <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rootX <span class=\"token operator\">==</span> rootY<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>rootX<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> rank<span class=\"token punctuation\">[</span>rootY<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                <span class=\"token keyword\">int</span> temp <span class=\"token operator\">=</span> rootX<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                rootX <span class=\"token operator\">=</span> rootY<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                rootY <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            parent<span class=\"token punctuation\">[</span>rootY<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> rootX<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rank<span class=\"token punctuation\">[</span>rootX<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> rank<span class=\"token punctuation\">[</span>rootY<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                rank<span class=\"token punctuation\">[</span>rootX<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            count<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">numSimilarGroups</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> strs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> strs<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token class-name\">UnionFind</span> uf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UnionFind</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isSimilar</span><span class=\"token punctuation\">(</span>strs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> strs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>                    uf<span class=\"token punctuation\">.</span><span class=\"token function\">union</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token keyword\">return</span> uf<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isSimilar</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> s1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> s2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>        <span class=\"token keyword\">int</span> diff <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> s1<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> s2<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>                diff<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>diff <span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>                    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>        <span class=\"token keyword\">return</span> diff <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">UnionFind</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        self<span class=\"token punctuation\">.</span>parent <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        self<span class=\"token punctuation\">.</span>rank <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> n</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        self<span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> n</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> x<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">union</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        root_x <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        root_y <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">if</span> root_x <span class=\"token operator\">==</span> root_y<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>root_x<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>root_y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            root_x<span class=\"token punctuation\">,</span> root_y <span class=\"token operator\">=</span> root_y<span class=\"token punctuation\">,</span> root_x</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        self<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">[</span>root_y<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> root_x</pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>root_x<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>root_y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            self<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">[</span>root_x<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        self<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">numSimilarGroups</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> strs<span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">def</span> <span class=\"token function\">is_similar</span><span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token keyword\">if</span> s1 <span class=\"token operator\">==</span> s2<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            diff <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token keyword\">for</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">in</span> <span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                <span class=\"token keyword\">if</span> c1 <span class=\"token operator\">!=</span> c2<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                    diff <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                    <span class=\"token keyword\">if</span> diff <span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                        <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token keyword\">return</span> diff <span class=\"token operator\">==</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        n <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>strs<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        uf <span class=\"token operator\">=</span> UnionFind<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                <span class=\"token keyword\">if</span> is_similar<span class=\"token punctuation\">(</span>strs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> strs<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>                    uf<span class=\"token punctuation\">.</span>union<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token keyword\">return</span> uf<span class=\"token punctuation\">.</span>count</pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Hard",
                "Union Find",
                "String",
                "Leetcode",
                "Depth-First Search",
                "Breadth-First Search",
                "Array",
                "Hard"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/27/Coding/leetcode/Medium/319%20Bulb%20Switcher/",
            "url": "https://chienikao.github.io/2023/04/27/Coding/leetcode/Medium/319%20Bulb%20Switcher/",
            "title": "319. Bulb Switcher",
            "date_published": "2023-04-27T07:16:09.000Z",
            "content_html": "<p>⭐️⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvYnVsYi1zd2l0Y2hlci8=\">題目敘述</span></h2>\n<p>There are  <code>n</code>  bulbs that are initially off. You first turn on all the bulbs, then you turn off every second bulb.</p>\n<p>On the third round, you toggle every third bulb (turning on if it’s off or turning off if it’s on). For the  <code>ith</code>  round, you toggle every  <code>i</code>  bulb. For the  <code>nth</code>  round, you only toggle the last bulb.</p>\n<p>Return <em>the number of bulbs that are on after  <code>n</code>  rounds</em>.</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<p><img data-src=\"https://i.imgur.com/JSh0QO5.png\" alt=\"\"></p>\n<blockquote>\n<p><strong>Input:</strong> n = 3<br>\n<strong>Output:</strong> 1<br>\n<strong>Explanation:</strong> At first, the three bulbs are [off, off, off].<br>\nAfter the first round, the three bulbs are [on, on, on].<br>\nAfter the second round, the three bulbs are [on, off, on].<br>\nAfter the third round, the three bulbs are [on, off, off].<br>\nSo you should return 1 because there is only one bulb is on.</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<blockquote>\n<p><strong>Input:</strong> n = 0<br>\n<strong>Output:</strong> 0</p>\n</blockquote>\n<h3 id=\"example-3\"><a class=\"anchor\" href=\"#example-3\">#</a> Example 3</h3>\n<blockquote>\n<p><strong>Input:</strong> n = 1<br>\n<strong>Output:</strong> 1</p>\n</blockquote>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">bulbSwitch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> <span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">bulbSwitch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">bulbSwitch</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">return</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>sqrt<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Leetcode",
                "Medium",
                "Math",
                "Brainteaser"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/26/Coding/uva/Star1/uva%20706/",
            "url": "https://chienikao.github.io/2023/04/26/Coding/uva/Star1/uva%20706/",
            "title": "uva 706 - LC-Display",
            "date_published": "2023-04-26T02:42:29.000Z",
            "content_html": "<p>⭐️</p>\n<h2 id=\"題目連結\"><a class=\"anchor\" href=\"#題目連結\">#</a> 題目連結</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96ZXJvanVkZ2UudHcvU2hvd1Byb2JsZW0/cHJvYmxlbWlkPWMxMzU=\">ZeroJudge</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9vbmxpbmVqdWRnZS5vcmcvZXh0ZXJuYWwvNy9wNzA2LnBkZg==\">題目連結</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9vbmxpbmVqdWRnZS5vcmcvaW5kZXgucGhwP29wdGlvbj1jb21fb25saW5lanVkZ2UmYW1wO0l0ZW1pZD04JmFtcDtjYXRlZ29yeT05JmFtcDtwYWdlPXNob3dfcHJvYmxlbSZhbXA7cHJvYmxlbT02NDc=\">Online Judge</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudWRlYnVnLmNvbS9VVmEvNzA2\">uDebug</span></li>\n</ul>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> 題目敘述</h2>\n<p>A friend of you has just bought a new computer. Until now, the most powerful computer he ever used has been a pocket calculator. Now, looking at his new computer, he is a bit disappointed, because he liked the LC-display of his calculator so much. So you decide to write a program that displays numbers in an LC-display-like style on his computer.</p>\n<h2 id=\"input\"><a class=\"anchor\" href=\"#input\">#</a> Input</h2>\n<p>The input file contains several lines, one for each number to be displayed. Each line contains two integers  <code>s</code> ,  <code>n</code>  ( <code>1 ≤ s ≤ 10</code> ,  <code>0 ≤ n ≤ 99 999 999</code> ), where  <code>n</code>  is the number to be displayed and  <code>s</code>  is the size in which it shall be displayed.</p>\n<p>The input file will be terminated by a line containing two zeros. This line should not be processed.</p>\n<h2 id=\"output\"><a class=\"anchor\" href=\"#output\">#</a> Output</h2>\n<p>Output the numbers given in the input file in an LC-display-style using  <code>s</code>  ‘-’ signs for the horizontal segments and  <code>s</code>  ‘|’ signs for the vertical ones. Each digit occupies exactly  <code>s + 2</code>  columns and  <code>2s + 3</code>  rows. (Be sure to fill all the white space occupied by the digits with blanks, also for the last digit.) <em>There has to be exactly one column of blanks between two digits</em>.</p>\n<p><em>Output a blank line after each number</em>. (You will find a sample of each digit in the sample output.)</p>\n<h2 id=\"sample-input\"><a class=\"anchor\" href=\"#sample-input\">#</a> Sample Input</h2>\n<blockquote>\n<p>2 12345<br>\n3 67890<br>\n0 0</p>\n</blockquote>\n<h2 id=\"sample-output\"><a class=\"anchor\" href=\"#sample-output\">#</a> Sample Output</h2>\n<p><img data-src=\"https://i.imgur.com/1yA2BuX.png\" alt=\"\"></p>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;bits/stdc++.h></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>using namespace std<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">int</span> s<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    string str<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    map<span class=\"token operator\">&lt;</span><span class=\"token keyword\">char</span><span class=\"token punctuation\">,</span> vector<span class=\"token operator\">&lt;</span>bool<span class=\"token operator\">>></span> mp<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'1'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>false<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'2'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'3'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'4'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'5'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'6'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'7'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'8'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    mp<span class=\"token punctuation\">[</span><span class=\"token char\">'9'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>cin <span class=\"token operator\">>></span> s <span class=\"token operator\">>></span> str<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> str <span class=\"token operator\">==</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        string l1 <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> l2 <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> l3 <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> l4 <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> l5 <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">&lt;</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">char</span> c <span class=\"token operator\">=</span> str<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            vector<span class=\"token operator\">&lt;</span>bool<span class=\"token operator\">></span> tmp <span class=\"token operator\">=</span> mp<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            l1 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> true<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> l1 <span class=\"token operator\">+=</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">else</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> l1 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            l1 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> true<span class=\"token punctuation\">)</span> l2 <span class=\"token operator\">+=</span> <span class=\"token string\">\"|\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token keyword\">else</span> l2 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> l2 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> true<span class=\"token punctuation\">)</span> l2 <span class=\"token operator\">+=</span> <span class=\"token string\">\"|\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token keyword\">else</span> l2 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            l3 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> true<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> l3 <span class=\"token operator\">+=</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token keyword\">else</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> l3 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            l3 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> true<span class=\"token punctuation\">)</span> l4 <span class=\"token operator\">+=</span> <span class=\"token string\">\"|\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token keyword\">else</span> l4 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> l4 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> true<span class=\"token punctuation\">)</span> l4 <span class=\"token operator\">+=</span> <span class=\"token string\">\"|\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token keyword\">else</span> l4 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            l5 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> true<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> l5 <span class=\"token operator\">+=</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token keyword\">else</span> <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> l5 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            l5 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">!=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>                l1 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span> l2 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span> l3 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span> l4 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span> l5 <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"55\"></td><td><pre>                </pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        cout <span class=\"token operator\">&lt;&lt;</span> l1 <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> cout <span class=\"token operator\">&lt;&lt;</span> l2 <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        cout <span class=\"token operator\">&lt;&lt;</span> l3 <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>s<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> cout <span class=\"token operator\">&lt;&lt;</span> l4 <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        cout <span class=\"token operator\">&lt;&lt;</span> l5 <span class=\"token operator\">&lt;&lt;</span> endl <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "Coding",
                "UVA",
                "Star1",
                "Star1",
                "CPE",
                "UVA"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/26/System%20Software/Ch01/Appendix_A/",
            "url": "https://chienikao.github.io/2023/04/26/System%20Software/Ch01/Appendix_A/",
            "title": "Appendix A",
            "date_published": "2023-04-26T01:33:29.000Z",
            "content_html": "<h1 id=\"appendix-a\"><a class=\"anchor\" href=\"#appendix-a\">#</a> Appendix A</h1>\n<p><img data-src=\"https://i.imgur.com/Jg7aXIF.png\" alt=\"\"><br>\n<img data-src=\"https://i.imgur.com/tgx79gp.png\" alt=\"\"><br>\n<img data-src=\"https://i.imgur.com/FvmdzSQ.png\" alt=\"\"><br>\n<img data-src=\"https://i.imgur.com/CVWEW1r.png\" alt=\"\"></p>\n",
            "tags": [
                "System Software",
                "Ch01",
                "System Software"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/26/System%20Software/Ch01/Ch01_Background/",
            "url": "https://chienikao.github.io/2023/04/26/System%20Software/Ch01/Ch01_Background/",
            "title": "Ch01 - Background",
            "date_published": "2023-04-26T01:33:29.000Z",
            "content_html": "<h1 id=\"chapter-01-background\"><a class=\"anchor\" href=\"#chapter-01-background\">#</a> Chapter 01 - Background</h1>\n<h2 id=\"introduction\"><a class=\"anchor\" href=\"#introduction\">#</a> Introduction</h2>\n<ul>\n<li>\n<p><strong>Computer System</strong></p>\n<ul>\n<li><strong>Hardware</strong></li>\n<li><strong>Software</strong></li>\n</ul>\n</li>\n<li>\n<p><strong>Software</strong></p>\n<ul>\n<li><strong>Application software</strong> (domain knowledge)</li>\n<li><strong>System software</strong> (machine architecture)</li>\n</ul>\n<p><img data-src=\"https://i.imgur.com/WDd7TlA.png\" alt=\"\"></p>\n</li>\n<li>\n<p>System software consists of a veriety of programs that support the operation of a computer.</p>\n<ul>\n<li>Text editor, assembler, macro processor, compiler, loader, linker, debugger, operating system.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"system-software-and-machine-architecture\"><a class=\"anchor\" href=\"#system-software-and-machine-architecture\">#</a> System Software and Machine Architecture</h2>\n<ul>\n<li>System software 與 application software 的決定性差異：\n<ul>\n<li><mark><font>Machine-dependent (MD) features</font></mark>.（在不同硬體環境需要改寫 source code）</li>\n</ul>\n</li>\n<li>System software 有<strong>部分</strong> source code 是 machine-independent (MID)，application software 則<strong>全部</strong>都是 machine-independent。</li>\n<li><font>SIC</font> (simplified instructional computer) with two versions:\n<ul>\n<li><strong>The standard model</strong></li>\n<li><strong>The XE (extra equipment) version</strong></li>\n</ul>\n</li>\n<li>The two versions have designed to be <strong>upward compatible (向上兼容)</strong>.</li>\n</ul>\n<h2 id=\"sic-machine-architecture\"><a class=\"anchor\" href=\"#sic-machine-architecture\">#</a> SIC Machine Architecture</h2>\n<h3 id=\"memory\"><a class=\"anchor\" href=\"#memory\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0ybFN5SFpMek5ZQQ==\">Memory</span></h3>\n<ul>\n<li><strong>Byte</strong>: <strong>8-bit</strong></li>\n<li><strong>Word</strong>: consecutive <strong>3 bytes</strong> (24 bits).</li>\n<li>All addresses are <strong>byte addresses</strong></li>\n<li><strong>Words</strong> are <strong>addressed</strong> by the location of their <strong>lowest numbered byte</strong>.</li>\n<li>There are a total of <strong>32768 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>15</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{15}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span></span></span></span>) bytes</strong> in the computer memory.\n<ul>\n<li>Address 的範圍: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>15</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{15} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"registers\"><a class=\"anchor\" href=\"#registers\">#</a> <mark>Registers</mark></h3>\n<div class=\"note danger\">\n<p>Five registers, all of which have special uses. Each register is <strong>24 bits</strong> in length.</p>\n<ul>\n<li><strong>A:</strong> accumulator. 累加器</li>\n<li><strong>X:</strong> index register</li>\n<li><strong>L:</strong> linkage register; storing the return address after a funciton call.</li>\n<li><strong>PC:</strong> program counter. 儲存下一條要執行的指令 (在機器語言中) 的記憶體位址</li>\n<li><strong>SW:</strong> status word; including a <strong>Condition Code (CC)</strong></li>\n</ul>\n</div>\n<h3 id=\"data-formats\"><a class=\"anchor\" href=\"#data-formats\">#</a> Data formats</h3>\n<ul>\n<li>\n<p><strong>Integers</strong> are stored as <strong>24-bit</strong> binary <strong>2’s complement</strong> representation is used for negative values.</p>\n<ul>\n<li>二補數相較於一補數沒有 +0 與 -0 的問題，可以多表達一個數。</li>\n</ul>\n</li>\n<li>\n<p><strong>Characters</strong> are stored using their <strong>8-bit ASCII codes</strong>.</p>\n</li>\n<li>\n<p>There is <strong>no floating-point</strong> hardware on the standard version of SIC.</p>\n</li>\n</ul>\n<h3 id=\"instruction-formats\"><a class=\"anchor\" href=\"#instruction-formats\">#</a> Instruction formats</h3>\n<p><img data-src=\"https://i.imgur.com/YzynDzE.png\" alt=\"\"></p>\n<ul>\n<li><mark><strong>24-bit</strong> format</mark>\n<ul>\n<li>\n<p><em><strong>opcode (指令碼):</strong></em> 8bits, 代表要執行的是哪種指令</p>\n</li>\n<li>\n<p><em><strong>x:</strong></em> 1bit, 用來表示是否為索引定址模式 (<strong>indicated indexed-addressing mode</strong>)</p>\n</li>\n<li>\n<p><em><strong>address:</strong></em> 15bits, 因為記憶體大小為<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>15</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{15}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span></span></span></span> bytes, 因此 15 個 bits 就能表示所有記憶體位置，存在此位置的資料就是此指令要使用的資料</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"addressing-modes\"><a class=\"anchor\" href=\"#addressing-modes\">#</a> Addressing modes</h3>\n<ul>\n<li>There are two addressing mode avilable.</li>\n<li><strong>Direct</strong>: x = 0; TA (target address) = address</li>\n<li><strong>Indexed</strong>: x = 1; TA = address + (X)\n<ul>\n<li>X is the <strong>index register</strong> (<em>X</em> register)</li>\n</ul>\n</li>\n<li>Parentheses (小括號) are used to indicate the contents of a register or a memory location.</li>\n</ul>\n<h3 id=\"instruction-set\"><a class=\"anchor\" href=\"#instruction-set\">#</a> Instruction set</h3>\n<ul>\n<li>\n<p><strong>Load and store registers</strong></p>\n<ul>\n<li><code>LDA</code> ,  <code>LDX</code> , … : Load <em>A</em>, Load <em>X</em>, etc.</li>\n<li><code>STA</code> ,  <code>STX</code> , … : Store <em>A</em>, Store <em>X</em>, etc.</li>\n</ul>\n</li>\n<li>\n<p><strong>Integer arithmetic</strong> operations</p>\n<ul>\n<li><code>ADD</code> ,  <code>SUB</code> ,  <code>MUL</code> ,  <code>DIV</code></li>\n</ul>\n</li>\n<li>\n<p><code>COMP</code> : <strong>Compares</strong> the <strong>value in register <em>A</em></strong> with a <strong>word in memory</strong></p>\n<ul>\n<li><font>Setting</font> a <strong>condition code</strong> (CC) to indicate the result (&lt;, =, or &gt;)</li>\n<li>CC is stored in register <em>SW</em></li>\n</ul>\n</li>\n<li>\n<p><strong>Conditional jump instructions</strong></p>\n<ul>\n<li><code>JLT</code> : Jump if CC is set to &lt; (<strong>L</strong>ess <strong>T</strong>han)</li>\n<li><code>JEQ</code> : Jump if CC is set to = (<strong>EQ</strong>uals to)</li>\n<li><code>JGT</code> : Jump if CC is set to &gt; (<strong>G</strong>reater <strong>T</strong>han)</li>\n</ul>\n<div class=\"note info\">\n<p>在高階語言中，下列的敘述是: <em>如果 a &gt; b，則向下執行 X 區段，<strong>否則跳到</strong> Y 區段</em></p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">></span> b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">/* ===== X 區段 ===== */</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">/* ===== X 區段 ===== */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">/* ===== Y 區段 ===== */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">/* ===== Y 區段 ===== */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>但在低階語言中，JUMP 的指令 ( <code>JLE</code> ,  <code>JGT</code> ,  <code>JLT</code> ) 是<strong>滿足</strong>某些 condition 才會跳到指定區段，和高階語言的邏輯相反</p>\n<p>所以編譯器把高階語言轉換成低階語言時，會把上面那段程式碼中，X 和 Y 區段對調，以便用低階語言實作相同的邏輯</p>\n<p>即，<em>如果 a &gt; b，則跳到 X 區段，否則繼續下向執行 Y 區段</em></p>\n<pre><code>COMP a, b\nJGT X\n/* ===== Y 區段 ===== */\n    ...\n/* ===== Y 區段 ===== */\n\n/* ===== X 區段 ===== */\n    ...\n/* ===== X 區段 ===== */\n</code></pre>\n</div>\n</li>\n<li>\n<p><code>JSUB</code> : jumping to a subroutine (function call)</p>\n</li>\n<li>\n<p><code>RSUB</code> : returning from a subroutine to the address contained in register <em>L</em></p>\n</li>\n</ul>\n<h3 id=\"input-output\"><a class=\"anchor\" href=\"#input-output\">#</a> Input &amp; Output</h3>\n<ul>\n<li>在標準版本的 SIC 中，進行 I/O 時會<strong>從 regiter <em>A</em></strong> 的<strong>最右的 8 個 bits</strong> 開始 (rightmost 8 bits)，<strong>一次搬動一個 byte</strong></li>\n<li>Each device is assigned a unique <strong>8-bit code</strong>\n<ul>\n<li>10 進位表示:  <code>0</code>  ~  <code>255</code></li>\n<li>16 進位表示:  <code>00</code>  ~  <code>FF</code></li>\n</ul>\n</li>\n<li>There are three I/O instructions:\n<ul>\n<li>Test Device:  <code>TD</code></li>\n<li>Read Data:  <code>RD</code></li>\n<li>Write Data:  <code>WD</code></li>\n</ul>\n</li>\n<li>On executing  <code>TD</code> , the <strong>condition code</strong> is set to indicate the <strong>result of test</strong>\n<ul>\n<li><strong>&lt;</strong> means device is <strong>ready</strong> to send or receive</li>\n<li><strong>=</strong> means device is <strong>not ready</strong></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"sicxe-machine-architecture\"><a class=\"anchor\" href=\"#sicxe-machine-architecture\">#</a> SIC/XE Machine Architecture</h2>\n<h3 id=\"memory-2\"><a class=\"anchor\" href=\"#memory-2\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1TbFBoTVBuUTU4aw==\">Memory</span> 👍</h3>\n<ul>\n<li><strong>1 megabyte</strong> (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>20</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{20}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span></span> bytes)</li>\n<li>Larger memory <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> a change in <strong>instruction formats</strong> and <strong>addressing</strong> (需要更多的 bit 來表示記憶體位置)</li>\n</ul>\n<h3 id=\"registers-2\"><a class=\"anchor\" href=\"#registers-2\">#</a> <mark>Registers</mark></h3>\n<div class=\"note danger\">\n<p>比標準版本<strong>增加</strong>以下四個暫存器:</p>\n<ul>\n<li><strong>B</strong>: base register for addressing，基底暫存器，用在定址</li>\n<li><strong>S</strong>: general working register</li>\n<li><strong>T</strong>: general working register</li>\n<li><strong>F</strong>: floating-point accumulator，浮點累加器，用於浮點運算 (<strong>48 bits</strong>)</li>\n</ul>\n</div>\n<p><strong>General Working/Purpose Register</strong></p>\n<ul>\n<li>沒有用在任何特殊目的的暫存器</li>\n<li>可以儲存任意資料</li>\n<li>用途由程式設計者自行決定</li>\n</ul>\n<h3 id=\"data-formats-2\"><a class=\"anchor\" href=\"#data-formats-2\">#</a> Data Formats</h3>\n<p>整數、字元的資料格式和和標準 SIC 相同</p>\n<p><strong>In addition</strong>, there is a <strong>48-bit floating point</strong> data type:<br>\n<img data-src=\"https://i.imgur.com/Qn9UxiC.png\" alt=\"\"></p>\n<ul>\n<li><strong>fraction</strong> (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span>)\n<ul>\n<li>The fraction is interpreted as a value between 0 and 1</li>\n<li>For <strong>normalized</strong> floating point number, the high-order bit (最左位) of the fraction must be 1</li>\n</ul>\n</li>\n<li><strong>exponent</strong>: (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">e</span></span></span></span>)\n<ul>\n<li>the exponent is interpreted as an unsigned binary number between 0 and 2047</li>\n</ul>\n</li>\n<li><strong>s</strong>: the sign of the value\n<ul>\n<li>0: postive</li>\n<li>1: negative</li>\n</ul>\n</li>\n<li>The value of the floating-point number:<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo stretchy=\"false\">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy=\"false\">)</mo><mi>s</mi></msup><mo>×</mo><mn>0.</mn><mi>F</mi><mo>×</mo><msup><mn>2</mn><mrow><mo stretchy=\"false\">(</mo><mi>e</mi><mo>−</mo><mn>1024</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">(-1)^s \\times 0.F \\times 2^{(e-1024)}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7143919999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">s</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.938em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\">2</span><span class=\"mord mtight\">4</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n<li>A value of 0 is represented by all 0</li>\n</ul>\n<div class=\"note info\">\n<ul>\n<li><strong>Bit string to value</strong><pre><code>| s |   exponent    |                  fraction                    |\n+---+---------------+----------------------------------------------+\n| 0 | 100 0000 0010 | 1010 0000 0000 0000 0000 0000 0000 0000 0000 |\n</code></pre>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">s</span></span></span></span>: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">0 \\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span></span></span></span> postive</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">e</span></span></span></span>: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1026</mn></mrow><annotation encoding=\"application/x-tex\">1026</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">6</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span>: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>0.1010</mn><mtext> </mtext><mn>0000...</mn><msub><mo stretchy=\"false\">)</mo><mn>2</mn></msub><mo>=</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>3</mn></mrow></msup><mo>=</mo><mn>0.625</mn></mrow><annotation encoding=\"application/x-tex\">(0.1010\\ 0000...)_2 = 2^{-1} + 2^{-3} = 0.625</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mspace\"> </span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">6</span><span class=\"mord\">2</span><span class=\"mord\">5</span></span></span></span></li>\n<li>The value of the floating point number\\begin{split}\n     &0.625 \\times 2^{(1026-1024)} \\\\\n    =&0.625 \\times 2^2 \\\\\n    =&2.5\n\\end{split}\n\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<div class=\"note info\">\n<ul>\n<li><strong>Value to bit string</strong>\n<ul>\n<li>7.625 轉浮點數表示</li>\n<li>轉二進制<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mn>7.625</mn><mo>=</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>3</mn></mrow></msup><mo>=</mo><mo stretchy=\"false\">(</mo><mn>111.101</mn><msub><mo stretchy=\"false\">)</mo><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">7.625 = 2^2 + 2^1 + 2^0 + 2^{-1} + 2^{-3} = (111.101)_2\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span><span class=\"mord\">.</span><span class=\"mord\">6</span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9474379999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9474379999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9474379999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.947438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.864108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n<li>normalize<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>111.101</mn><msub><mo stretchy=\"false\">)</mo><mn>2</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mn>0.111101</mn><msub><mo stretchy=\"false\">)</mo><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation encoding=\"application/x-tex\">(111.101)_2 = (0.111101)_2 \\times 2^3\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8641079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span></p>\n</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">s</span></span></span></span>: Postive <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>: 取小數點後的部分 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo><mn>1111</mn><mtext> </mtext><mn>0100</mn><mtext> </mtext><mn>0000...</mn></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow 1111\\ 0100\\ 0000...</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mord\">1</span><span class=\"mspace\"> </span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\"> </span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">e</span></span></span></span>: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mo>+</mo><mn>1024</mn><mo>=</mo><mn>1027</mn><mo>⇒</mo><mn>100</mn><mtext> </mtext><mn>0000</mn><mtext> </mtext><mn>0011</mn></mrow><annotation encoding=\"application/x-tex\">3 + 1024=1027 \\Rightarrow 100\\ 0000\\ 0011</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">7</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\"> </span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\"> </span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">1</span><span class=\"mord\">1</span></span></span></span></li>\n</ul>\n<pre><code>| s |   exponent    |                  fraction                    |\n+---+---------------+----------------------------------------------+\n| 0 | 100 0000 0011 | 1111 0100 0000 0000 0000 0000 0000 0000 0000 |\n</code></pre>\n</li>\n</ul>\n</div>\n<h3 id=\"instruction-formats-2\"><a class=\"anchor\" href=\"#instruction-formats-2\">#</a> Instruction Formats</h3>\n<ul>\n<li>\n<p><strong>Format 1</strong> (1 byte)</p>\n<ul>\n<li>不用指定運算元的指令，如特定暫存器 + 1<br>\n<img data-src=\"https://i.imgur.com/Qfl6718.png\" alt=\"\"></li>\n</ul>\n</li>\n<li>\n<p><strong>Format 2</strong> (2 byte)</p>\n<ul>\n<li>指定暫存器 address 進行運算<br>\n<img data-src=\"https://i.imgur.com/oeO2joD.png\" alt=\"\"></li>\n</ul>\n</li>\n<li>\n<p><strong>Format 3</strong> (3 byte)</p>\n<ul>\n<li>大多數指令為此格式</li>\n<li>Relative addressing mode 一定是 format 3</li>\n<li>Immediate/Directed addressing mode 時，如果數值 / 地址不超過 disp 的表示範圍 (12 bits)，則使用 format 3<br>\n<img data-src=\"https://i.imgur.com/GUppSLD.png\" alt=\"\"><br>\n<em>disp: <u>displacement</u></em></li>\n</ul>\n</li>\n<li>\n<p><strong>Format 4</strong> (4 byte)</p>\n<ul>\n<li>在 Immediate/Directed addressing mode，如果數值 / 地址無法用 12-bits 表示，則會使用 format 4<br>\n<img data-src=\"https://i.imgur.com/qfjydIc.png\" alt=\"\"></li>\n</ul>\n</li>\n</ul>\n<p>Bit <em>e</em> is used to <strong>distinguish between Format 3 and 4</strong></p>\n<ul>\n<li>0: format 3</li>\n<li>1: format 4</li>\n</ul>\n<hr>\n<ul>\n<li><strong>n</strong>: indirect addressing flag</li>\n<li><strong>i</strong>: immediate addressing flag</li>\n<li><strong>x</strong>: indexed addressing flag</li>\n<li><strong>b</strong>: base address relative flag</li>\n<li><strong>p</strong>: program counter relative flag</li>\n<li><strong>e</strong>: format 4 instruction flag</li>\n</ul>\n<h3 id=\"addressing-modes-2\"><a class=\"anchor\" href=\"#addressing-modes-2\">#</a> Addressing Modes</h3>\n<p><strong>Format 3</strong></p>\n<ul>\n<li>\n<p>Two new <strong>relative</strong> addressing modes</p>\n<ul>\n<li>\n<p><strong>Base relative</strong>: <mark>b=1, p=0</mark>, TA=(B)+disp</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>≤</mo><mtext>disp</mtext><mo>≤</mo><mn>4095</mn></mrow><annotation encoding=\"application/x-tex\">0 \\le \\text{disp} \\le 4095</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">disp</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">0</span><span class=\"mord\">9</span><span class=\"mord\">5</span></span></span></span></li>\n</ul>\n</li>\n<li>\n<p><strong>Program-Counter relative</strong>: <mark>b=0, p=1</mark>, TA=(PC)+disp</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>2048</mn><mo>≤</mo><mtext>disp</mtext><mo>≤</mo><mn>2047</mn></mrow><annotation encoding=\"application/x-tex\">-2048 \\le \\text{disp} \\le 2047</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">−</span><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mord\">4</span><span class=\"mord\">8</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">disp</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mord\">4</span><span class=\"mord\">7</span></span></span></span> using 2’s complement notation</li>\n<li>因為程式執行可能會有像迴圈要往回跳的狀況，所以需要負數</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Direct addressing</strong>: If <mark>b=0, p=0</mark>, TA=disp</p>\n</li>\n</ul>\n<p><strong>Format 4</strong></p>\n<ul>\n<li>bits b and p are normally set to 0\n<ul>\n<li><strong>Direct addressing</strong>: TA=address</li>\n</ul>\n</li>\n</ul>\n<p>Any of above addressing modes can also be combined with indexed addressing</p>\n<hr>\n<p><strong>Format 3/4 通用</strong></p>\n<ul>\n<li>\n<p>If bit <mark>i=1, n=0</mark>, the <strong>target address</strong> itself is used as the <strong>operand value</strong></p>\n<ul>\n<li><font>Immediate addressing</font></li>\n<li>算出來的 TA 本身就是資料，而不是地址</li>\n<li>常用在<strong>資料是常數</strong>的時候</li>\n<li>No memory reference is performed</li>\n</ul>\n</li>\n<li>\n<p>If bit <mark>i=0, n=1</mark>, word at the location given by the target address is fetched</p>\n<ul>\n<li><font>Indirect addressing</font></li>\n<li><strong>The value</strong> contained in this word is then taken as <strong>the address of the operand value</strong></li>\n<li>類似 C 語言裡面的對指標取值</li>\n</ul>\n</li>\n<li>\n<p>If bit <mark>i=0, n=0</mark> or <mark>i=1, b=1</mark>, the target address is taken as the location of the operand</p>\n<ul>\n<li><font>simple addressing</font></li>\n<li>最一般的使用方法，存放在記憶體 TA 位置的資料即運算元</li>\n<li>SIC/XE instructions that specify neither immediate nor indirect addressing are assembled with <strong>bits <em>n</em> and <em>i</em> both set to 1</strong>. (for upward compatibility)</li>\n<li>Assemblers for the standard version of SIC will set the bits in both of these positions to 0. This is because the 8-bit binary codes for all the SIC instructions end in 00.</li>\n</ul>\n</li>\n</ul>\n<p>For SIC/XE, if bits n and i are both 0, then bits b, p, and e are considered to be part of the address field of the instruction.</p>\n<ul>\n<li>This makes Instruction Format 3 identical to the format used on the standard version of SIC, providing the desired compatibility.</li>\n</ul>\n<div class=\"note danger\">\n<ul>\n<li>當<strong> n = 0; i = 0:</strong>\n<ul>\n<li><strong>SIC/XE</strong> 為了向上相容，會改變為<strong> SIC</strong> 的形式，此時的<em><strong> b,p,e</strong></em> 會和<em><strong> disp</strong></em> 合併為 15 個 bits</li>\n<li>因為會轉變為<strong> SIC</strong> 的形式，所以<strong> format 4</strong> 裡<em><strong> n, i</strong></em> 不會同時為 0</li>\n</ul>\n</li>\n<li>當<strong> n = 1; i = 1:</strong>\n<ul>\n<li>仍會去判斷<em><strong> b,p,e</strong></em> 的樣式</li>\n</ul>\n</li>\n</ul>\n</div>\n<div class=\"note info\">\n<ul>\n<li><strong>Relative</strong>/<strong>Direct</strong> Addressing Mode 定義如何求出 <em>TA</em></li>\n<li><strong>Immediate</strong>/<strong>Indirect</strong>/<strong>Simple</strong> Addressing Mode 定義求出 <em>TA</em> 後，如何得到運算元</li>\n<li>上面兩種模式是同時存在的，所以一共有 6 種組合，以下舉例三種\n<ul>\n<li>一條 format3 指令是 Direct+Simple\n<ul>\n<li>TA = disp</li>\n<li>代表運算元是存在記憶體位置 disp 上的資料</li>\n</ul>\n</li>\n<li>一條 format3 指令是 Direct+Immediate\n<ul>\n<li>TA = disp</li>\n<li>代表運算元是 disp</li>\n</ul>\n</li>\n<li>一條 format3 指令是 Relative+Immediate\n<ul>\n<li>TA = (B) + disp</li>\n<li>代表運算元是 (B) + disp</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<h3 id=\"instruction-set-2\"><a class=\"anchor\" href=\"#instruction-set-2\">#</a> Instruction Set</h3>\n<ul>\n<li><strong>Load/Store</strong>:  <code>LDB</code> ,  <code>STB</code> , …</li>\n<li><strong>Floating-Point Number Arithmetic</strong>:  <code>ADDF</code> ,  <code>SUBF</code> ,  <code>MULF</code> ,  <code>DIVF</code></li>\n<li><strong>Register Move</strong>:  <code>RMO</code></li>\n<li><strong>Register-to-Register Arithmetic</strong>:  <code>ADDR</code> ,  <code>SUBR</code> ,  <code>MULR</code> ,  <code>DIVR</code></li>\n<li><strong>Supervisor call instruction</strong>:  <code>SVC</code>\n<ul>\n<li>generating an <strong>interrupt</strong> that can be used for <strong>communication with the OS</strong>.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"input-and-output\"><a class=\"anchor\" href=\"#input-and-output\">#</a> Input and Output</h3>\n<ul>\n<li>There are <strong>I/O channels</strong> that can be used to perform input and output while the CPU is executing other instructions.</li>\n<li>This allow overlap of computing and I/O, resulting in more efficient system operation.</li>\n<li><strong>Instructions</strong>:\n<ul>\n<li>Start I/O:  <code>SIO</code></li>\n<li>Test I/O:  <code>TIO</code></li>\n<li>Halt I/O:  <code>HIO</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"sic-programming-examples\"><a class=\"anchor\" href=\"#sic-programming-examples\">#</a> SIC Programming Examples</h2>\n<h3 id=\"\"><a class=\"anchor\" href=\"#\">#</a> <a href=\"./Appendix%20A.md\"><strong>附錄 A - 組合語言補充</strong></a></h3>\n<h3 id=\"-2\"><a class=\"anchor\" href=\"#-2\">#</a> <a href=\"./Ch01%20-%20%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F%E5%88%86%E6%9E%90.md\"><strong>範例程式分析</strong></a></h3>\n<h2 id=\"cisc-複雜指令集架構\"><a class=\"anchor\" href=\"#cisc-複雜指令集架構\">#</a> CISC (<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLXR3LyVFOCVBNCU4NyVFOSU5QiU5QyVFNiU4QyU4NyVFNCVCQiVBNCVFOSU5QiU4NiVFOSU5QiVCQiVFOCU4NSVBNg==\">複雜指令集架構</span>)</h2>\n<ul>\n<li><strong>CISC: Complex Instruction Set Computers</strong></li>\n<li>Implementation of such an architecture in <strong>hardware tends to be complex</strong>.</li>\n</ul>\n<h2 id=\"vax-virtual-address-extension-architecture\"><a class=\"anchor\" href=\"#vax-virtual-address-extension-architecture\">#</a> VAX (Virtual Address eXtension) Architecture</h2>\n<h3 id=\"memory-3\"><a class=\"anchor\" href=\"#memory-3\">#</a> Memory</h3>\n<ul>\n<li>8-bit bytes</li>\n<li>Byte Addresses</li>\n<li><font>Word</font>: 2 bytes</li>\n<li><font>Long Word</font>: 4 bytes</li>\n<li><font>Quadword</font>: 8 bytes</li>\n<li><font>Octaword</font>: 16 bytes</li>\n</ul>\n<p>Some operations are more efficient when operands are <strong>aligned in a particular way</strong></p>\n<ul>\n<li>For example, a <strong>longword</strong> operand that <strong>begins at a byte address</strong> that is a <strong>multiple of 4</strong>.</li>\n</ul>\n<p><font>Virtual address space</font>: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{32}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> bytes</p>\n<ul>\n<li>One <strong>half</strong> of the VAX virtual address space is called <font>system space</font>, which <strong>contains the operating system</strong>, and is <strong>shared by all programs</strong>.</li>\n<li>The other half of the address space is called <font>process space</font>, and is defined separately for each program.</li>\n</ul>\n<h3 id=\"registers-3\"><a class=\"anchor\" href=\"#registers-3\">#</a> Registers</h3>\n<ul>\n<li>16 <strong>general-purpose registers</strong>: <em>R0</em>~<em>R15</em>, <strong>32 bits</strong> in length.</li>\n<li><em>R15</em>: program counter</li>\n<li><em>R14</em>: stack pointer</li>\n<li><em>R13</em>: frame pointer</li>\n<li><em>R12</em>: argument pointer</li>\n<li><strong>Processor status longword</strong> (<em><strong>PSL</strong></em>), which contains state variables and flags associated with a process.</li>\n</ul>\n<h3 id=\"data-formats-3\"><a class=\"anchor\" href=\"#data-formats-3\">#</a> Data Formats</h3>\n<ul>\n<li><strong>2’s complement</strong> representation is used for negative values.</li>\n<li>Characters are stored using their <strong>8-bit ASCII codes</strong>.</li>\n<li>There are four different <strong>floating-point</strong> data formats, ranging in length <strong>from 4 to 16 bytes</strong>.</li>\n<li><strong>Packed decimal format</strong>: each byte represents two decimal digits.</li>\n<li><strong>Numeric format</strong>: one digit per byte.</li>\n<li>Support <strong>queues</strong> and <strong>variable-length bit strings</strong>.</li>\n</ul>\n<h3 id=\"instruction-formats-3\"><a class=\"anchor\" href=\"#instruction-formats-3\">#</a> Instruction Formats</h3>\n<ul>\n<li>A <strong>variable-length instruction format</strong>.</li>\n<li>Each instruction consists of <strong>an operation code</strong> (1 or 2 bytes) followed by <strong>up to six operand specifiers</strong>.</li>\n</ul>\n<h3 id=\"addressing-modes-3\"><a class=\"anchor\" href=\"#addressing-modes-3\">#</a> Addressing Modes</h3>\n<ul>\n<li>Immediate mode</li>\n<li>Register mode</li>\n<li><strong>Register deferred</strong> mode</li>\n<li>Autoincrement and autodecrement  modes (register content)</li>\n<li>Several base relative addressing modes</li>\n<li>May also include an index register</li>\n</ul>\n<h3 id=\"instruction-set-3\"><a class=\"anchor\" href=\"#instruction-set-3\">#</a> Instruction Set</h3>\n<ul>\n<li>Instruction mnemonics are formed by combining the following elements:\n<ol>\n<li>A <strong>prefix</strong> that specifies the <strong>type of operation</strong></li>\n<li>A <strong>suffix</strong> that specifies the <strong>data type of the operands</strong></li>\n<li>A <strong>modifier</strong> (on some instructions) that gives the <strong>number of operands</strong> involved.</li>\n</ol>\n</li>\n<li>Examples:\n<ul>\n<li><code>ADDW2</code> : <strong>ADD</strong> <strong>W</strong>ord, <strong>2</strong> operands</li>\n<li><code>MULL3</code></li>\n<li><code>CVTWL</code></li>\n</ul>\n</li>\n</ul>\n<p>There are number of operations that are much more complex than the machine instructions found on most computers.</p>\n<p>These operations are hardware realizations of frequently occurring <strong>sequences of code</strong>. They are <strong>implemented as single instructions</strong> for efficiency and speed.</p>\n<ul>\n<li>Load and store multiple registers</li>\n<li>Manipulate queues and variable-length bit fields.</li>\n<li>Calling and returning from procedures: a single instruction saves a designated set of registers, passes a list of arguments to the procedure, <strong>maintains the stack, frame, and argument pointers</strong>, and sets a mask to enable error traps for arithmetic operations.</li>\n</ul>\n<h3 id=\"inputoutput\"><a class=\"anchor\" href=\"#inputoutput\">#</a> Input/Output</h3>\n<ul>\n<li>Each I/O device controller has a set of <strong>control/status and data registers</strong>, which are <strong>assigned locations in the physical address space</strong>.</li>\n<li>The portion of the address space into which the device controller registers are mapped is called <font>I/O space</font>.</li>\n<li>No special instructions are required to access registers in I/O space.</li>\n<li>An I/O device <strong>driver</strong> issues commands to the device controller by <strong>storing values into the appropriate registers</strong>.</li>\n<li>Software routines may read these registers to obtain status information.</li>\n</ul>\n<h2 id=\"x86-architecture\"><a class=\"anchor\" href=\"#x86-architecture\">#</a> x86 Architecture</h2>\n<h3 id=\"memory-4\"><a class=\"anchor\" href=\"#memory-4\">#</a> Memory</h3>\n<ul>\n<li>At the <strong>physical level</strong>, memory consists of 8-bit bytes.</li>\n<li>Byte addresses.</li>\n<li><strong>Word</strong>: two consecutive bytes</li>\n<li><strong>Double-word (dword)</strong>: four bytes</li>\n<li>Some operations are more efficient when operands are aligned in a particular way.</li>\n<li>However, programmers usually view the x86 memory as a collection of <font>segments</font>.\n<ul>\n<li>From this point of view, an <strong>address</strong> consists of two parts\n<ul>\n<li>a <strong>segment number</strong></li>\n<li>an <strong>offset</strong> that points to a byte within the segment.</li>\n</ul>\n</li>\n<li>Segments can be of <strong>different sizes</strong>, and are often used for different purposes.\n<ul>\n<li>For example, <strong>code segment</strong> and <strong>data segment</strong>.</li>\n</ul>\n</li>\n<li>It is not necessary for all of the segments used by a program to be in physical memory.</li>\n<li>A segment can also be <strong>divided into pages</strong>.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"registers-4\"><a class=\"anchor\" href=\"#registers-4\">#</a> Registers</h3>\n<ul>\n<li>Each <strong>general-purpose register</strong> is <strong>32 bits</strong> long.</li>\n<li><strong>EIP</strong>: program counter.</li>\n<li><strong>FLAGS</strong></li>\n<li><strong>16-bit segment registers</strong>:\n<ul>\n<li><em>CS</em> for code segment</li>\n<li>SS for stack segment</li>\n<li><em>DS</em>, <em>ES</em>, <em>FS</em>, <em>GS</em> for data segments.</li>\n</ul>\n</li>\n<li><strong>Floating-point unit</strong> (FPU) contains eight <strong>80-bit</strong> data registers.</li>\n<li>There are also a number of registers that are <strong>used only by system programs</strong> such as the operating system.</li>\n</ul>\n<h3 id=\"data-formats-4\"><a class=\"anchor\" href=\"#data-formats-4\">#</a> Data Formats</h3>\n<ul>\n<li>Integers, floating-point values, characters, and strings.</li>\n<li>The least significant part of a numeric value is stored at the lowest-numbered address: <font>little-endian</font>.</li>\n<li>Unpacked and packed <strong>BCD formats</strong>.</li>\n<li>Three different floating-point data formats:\n<ul>\n<li><strong>single-precision</strong> with 32 bits (24+7+1)</li>\n<li><strong>double-precision</strong> with 64 bits (53+10+1)</li>\n<li><strong>extended-precision</strong> with 80 bits (64+15+1)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"instruction-formats-4\"><a class=\"anchor\" href=\"#instruction-formats-4\">#</a> Instruction Formats</h3>\n<ul>\n<li><strong>Prefix</strong>: containing <strong>flags</strong> that <strong>modify the operation</strong> of the instruction.\n<ul>\n<li>For example, a repetition count of the instruction (e.g. string manipulation), specifying a segment register.</li>\n</ul>\n</li>\n<li><strong>opcode</strong>: 1 or 2 bytes. Some operations have different opcodes, each specifying a different variant of the operation.</li>\n<li>A number of bytes that specify the <strong>operands</strong> and <strong>addressing modes</strong> to be used.</li>\n<li>The <strong>opcode</strong> is the only element that is <font>always present</font> in every instruction.</li>\n</ul>\n<h3 id=\"addressing-modes-4\"><a class=\"anchor\" href=\"#addressing-modes-4\">#</a> Addressing Modes</h3>\n<ul>\n<li><strong>Immediate mode</strong>: data in the instruction</li>\n<li><strong>Register mode</strong>: data in register</li>\n<li><strong>Direct mode</strong>: address of data in the instruction</li>\n<li><strong>Relative mode</strong>: displacement in the instruction, relative to EIP\n<ul>\n<li>TA=(base register) + (index register)*(scale factor) + displacement</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"instruction-set-4\"><a class=\"anchor\" href=\"#instruction-set-4\">#</a> Instruction Set</h3>\n<ul>\n<li>More than 400 machine instructions.</li>\n<li>An instruction may have <strong>0~3 operands</strong>.</li>\n<li>There are:\n<ul>\n<li><strong>register-to-register</strong> instructions</li>\n<li><strong>register-to-memory</strong> instructions</li>\n<li><strong>memory-to-memory</strong> instructions</li>\n</ul>\n</li>\n<li>Some <strong>special-purpose instructions</strong> to perform operations <strong>frequently required in high-level programming languages</strong>\n<ul>\n<li>For example, entering and leaving procedures and checking subscript values against the bounds of an array.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"io\"><a class=\"anchor\" href=\"#io\">#</a> I/O</h3>\n<ul>\n<li>Repetition prefixes allow I/O instructions to transfer an entire string in a single operation.</li>\n</ul>\n<h2 id=\"risc-machines\"><a class=\"anchor\" href=\"#risc-machines\">#</a> RISC Machines</h2>\n<ul>\n<li><strong>Reduced Instruction Set Computer</strong></li>\n<li>This <strong>simplified design</strong> can result in\n<ul>\n<li>faster and less expensive processor development</li>\n<li>greater reliability</li>\n<li>faster instruction fetching, decoding, and execution times.</li>\n</ul>\n</li>\n<li>In general, a RISC system is characterized by\n<ul>\n<li>a standard, <strong>fixed instruction length</strong>\n<ul>\n<li>usually equal to <strong>one machine word</strong></li>\n</ul>\n</li>\n<li><strong>single-cycle execution of most instructions</strong>.</li>\n</ul>\n</li>\n<li>Memory access is usually done by <strong>load</strong> and <strong>store</strong> instructions only.</li>\n<li>All instructions except for load and store are <strong>register-to-register operations</strong>.</li>\n<li>There are typically a relatively <strong>large number of general-purpose registers</strong>.</li>\n<li>The number of machine instructions, instruction formats, and addressing modes is relatively small.</li>\n</ul>\n<h2 id=\"ultrasparc-scalable-processor-architecture-architecture\"><a class=\"anchor\" href=\"#ultrasparc-scalable-processor-architecture-architecture\">#</a> UltraSPARC (Scalable Processor ARChitecture) Architecture</h2>\n<h3 id=\"memory-5\"><a class=\"anchor\" href=\"#memory-5\">#</a> Memory</h3>\n<ul>\n<li><font>Halfword</font>: two consecutive bytes</li>\n<li><font>Word</font>: four bytes</li>\n<li><font>Doubleword</font>: eight bytes</li>\n<li>Data are stored in memory with alignment</li>\n<li>Virtual address space of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>64</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{64}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">6</span><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span> bytes</li>\n<li>The address space is divided into pages. Multiple page size are supported.</li>\n</ul>\n<h3 id=\"registers-5\"><a class=\"anchor\" href=\"#registers-5\">#</a> Registers</h3>\n<ul>\n<li>A large <strong>register file</strong> that usually contains more than 100 general-purpose register.</li>\n<li>However, any procedure can access only 32 registers.</li>\n<li>The <strong>first eight</strong> of these registers are <strong>global</strong> — accessed by all procedures on the system.</li>\n<li><strong>Register <em>r0</em> always contains the value zero.</strong></li>\n<li>The other 24 registers available to a procedure can be visualized as a <strong>window</strong> through which part of the register file can be seen.</li>\n<li>These windows overlap, so some registers in the register file are shared between procedures. This facilitates the passing of parameters.</li>\n<li>If a set of concurrently running procedures needs more windows than are physically available, a “window overflow” interrupt occurs. The operating system must then save the contents of some registes in the file (and restore them later) to provide the additional windows that are needed.</li>\n</ul>\n<h3 id=\"data-format\"><a class=\"anchor\" href=\"#data-format\">#</a> Data Format</h3>\n<ul>\n<li><strong>Integers</strong>, <strong>floating-point</strong> values, and <strong>characters</strong>.</li>\n<li>Support both big-endian and little-endian byte orderings.</li>\n<li>Three different floating-point data formats.</li>\n</ul>\n<h3 id=\"instruction-formats-5\"><a class=\"anchor\" href=\"#instruction-formats-5\">#</a> Instruction Formats</h3>\n<ul>\n<li>There are three basic instruction formats. All of these formats are <strong>32 bits</strong> long. <strong>The first 2 bits of the instruction word identify which format is being used</strong>.</li>\n<li><strong>Format 1</strong> is used for the <strong>Call instruction</strong>.</li>\n<li><strong>Format 2</strong> is used for <strong>branch instruction</strong> (and one special instruction that enters a value into a register)</li>\n<li><strong>Format 3</strong> is used by the <strong>remaining instructions</strong>, including <strong>register loads</strong> and <strong>stores</strong>, and <strong>three-operand arithmetic operations</strong>.</li>\n</ul>\n<h3 id=\"addressing-modes-5\"><a class=\"anchor\" href=\"#addressing-modes-5\">#</a> Addressing Modes</h3>\n<ul>\n<li><strong>Immediate mode</strong></li>\n<li><strong>Register direct mode</strong></li>\n<li>Operands in memory are addressd using one of the following three modes:\n<ul>\n<li><strong><em>PC-relative</em>: TA = (PC) + displacement {30 bits, signed}</strong></li>\n<li><strong><em>Register indirect with displacement</em>: TA = (register) + displacement {13 bits, signed}</strong></li>\n<li><strong><em>Register indirect indexed</em>: TA = (register1) + (register2)</strong></li>\n</ul>\n</li>\n<li>PC-relative mode is used only for branch instructions.</li>\n</ul>\n<h3 id=\"instruction-set-5\"><a class=\"anchor\" href=\"#instruction-set-5\">#</a> Instruction Set</h3>\n<ul>\n<li>The basic SPARC architechture has fewer than 100 machine instructions.</li>\n<li>Instruction execution on a <strong>SPARC</strong> system is <font>pipeline</font>: fetching_and_decoding, execution</li>\n<li>However, an ordinary branch instruction might cause the process to “stall”. The instruction following the branch would have to be dicarded without being executed.</li>\n<li>To make the pipeline work more efficiently, SPARC branch instructions (including subroutine calls) are <font>delayed branch</font>. This means that the instruction immediately following the branch instruction is actually executed before the branch is taken.</li>\n</ul>\n<h2 id=\"powerpc-architecture\"><a class=\"anchor\" href=\"#powerpc-architecture\">#</a> PowerPC Architecture</h2>\n<ul>\n<li>IBM first introduced the POWER architecture early in 1990 with the RS/6000.</li>\n<li>POWER is an acronym for Performance Optimization With Enhanced RISC.</li>\n<li>It was soon realized that this architecture could form the basis for a new family of powerful and low-cost microprocessors.</li>\n<li>In October 1991, IBM, Apple, and Motorola formed an alliance to develop and market such microprocessors, which were named PowerPC.</li>\n</ul>\n<h3 id=\"memory-6\"><a class=\"anchor\" href=\"#memory-6\">#</a> Memory</h3>\n<ul>\n<li>Two consecutive bytes: halfword</li>\n<li>Four bytes: word</li>\n<li>Eight bytes: doubleword</li>\n<li>Sixteen bytes: quadword</li>\n<li>Virtual address space: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>64</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{64}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">6</span><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span> bytes</li>\n<li>The address space is divided into fixed-length segments: 256 megabytes long.</li>\n<li>Each segment is divided into pages: 4096 bytes long.</li>\n</ul>\n<h3 id=\"registers-6\"><a class=\"anchor\" href=\"#registers-6\">#</a> Registers</h3>\n<ul>\n<li>32 general-purpose registers: 64 bits long.</li>\n<li>32 floating-point registers for FPU: 64 bits</li>\n<li>A 32-bit condition register</li>\n<li>Link Register (LR) and Count Register (CR) used by some branch instructions</li>\n</ul>\n<h3 id=\"data-formats-5\"><a class=\"anchor\" href=\"#data-formats-5\">#</a> Data formats</h3>\n<ul>\n<li>Integers are stored as 8-, 16-, 32-, or 64-bit binary numbers.</li>\n<li>Big-endian byte ordering by default.</li>\n<li>It is possible to select little-endian byte ordering by setting a bit in a control register.</li>\n<li>There are two different floating-point data formats.</li>\n<li>Single-precision format is 32 bits long (23+8+1)</li>\n<li>Double-precision format is 64 bits long (52+11+1)</li>\n</ul>\n<h3 id=\"instruction-format\"><a class=\"anchor\" href=\"#instruction-format\">#</a> Instruction format</h3>\n<ul>\n<li>There are seven basic instruction formats, some of which have subforms.</li>\n<li>All of these formats are 32 bits long</li>\n<li>Instructions must be aligned beginning at a word boundary</li>\n<li>The first 6 bits of the instruction word always specify the opcode; some instruction formats also have an additional “extended code” field.</li>\n<li>The fixed instruction length in the PowerPC architecture is typical of RISC systems, making instruction decoding faster and simpler than on CISC systems.</li>\n</ul>\n<h3 id=\"addressing-modes-6\"><a class=\"anchor\" href=\"#addressing-modes-6\">#</a> Addressing modes</h3>\n<ul>\n<li>Immediate mode</li>\n<li>Register direct mode</li>\n<li>The only instructions that address memory are load and store operations, and branch instructions.</li>\n<li>Load and store operations use one of the following three addressing modes.</li>\n<li>Register indirect mode: TA=(register)</li>\n<li>Register indirect with index: TA=(register1)+(register2)</li>\n<li>Register indirect with immediate index: TA=(register)+displacement</li>\n<li>The register numbers and displacement are encoded as part of the instruction.</li>\n<li>Branch instructions use one of the following three addressing modes.</li>\n<li>Absolute: TA = actual address</li>\n<li>Relative: TA = current instruction address + displacement</li>\n<li>Link Register: TA = (LR)</li>\n<li>Count Register: TA = (CR)</li>\n</ul>\n<h3 id=\"instruction-set-6\"><a class=\"anchor\" href=\"#instruction-set-6\">#</a> Instruction set</h3>\n<ul>\n<li>Approximately 200 machine instructions</li>\n<li>Floating-point “multiply and add” instructions</li>\n<li>Using more powerful instructions, so fewer instructions are required to perform a task vs. keeping instructions simple so they can be executed as fast as possible.</li>\n<li>Instruction execution on a PowerPC system is pipelined. However, the pipelining is more sophisticated than on the original SPARC systems, with branch prediction used to speed execution. As a result, the delayed branch technique we described for SPARC is not used on PowerPC and most other modern architectures.</li>\n</ul>\n<h3 id=\"input-and-output-2\"><a class=\"anchor\" href=\"#input-and-output-2\">#</a> Input and Output</h3>\n<ul>\n<li>Segments in the virtual address space are mapped onto an external address space (typically an I/O bus)</li>\n</ul>\n<h2 id=\"cray-t3e-architecture\"><a class=\"anchor\" href=\"#cray-t3e-architecture\">#</a> Cray T3E Architecture</h2>\n<ul>\n<li>Supercomputer</li>\n<li>A massively parallel processing (MPP) system</li>\n<li>For use on technical applications in scientific computing.</li>\n<li>Containing a large number of processing elements (PE), arranged in a three-dimensional network as illustrated in Fig. 1.8.\n<ul>\n<li>The interconnection network is circular in each dimension.</li>\n</ul>\n</li>\n<li>Each PE consists of a DEC Alpha EV5 RISC microprocessor, local memory, and performance-accelerating control logic developed by Cray.</li>\n<li>A T3E system may contain from 16 to 2048 processing elements.</li>\n</ul>\n<h3 id=\"memory-7\"><a class=\"anchor\" href=\"#memory-7\">#</a> Memory</h3>\n<ul>\n<li>Each PE in the T3E has its own local memory with a capacity of from 64 megabytes to 2 gigabytes.</li>\n<li>The local memory within each PE is part of a physically distributed, logically shared memory system.</li>\n<li>Two consecutive bytes: word</li>\n<li>Four bytes: long word</li>\n<li>Eight bytes: quadword</li>\n<li>64-bit virtual address</li>\n</ul>\n<h3 id=\"registers-7\"><a class=\"anchor\" href=\"#registers-7\">#</a> Registers</h3>\n<ul>\n<li>32 general-purpose registers: 64 bits long</li>\n<li>32 floating-point registers: 64 bits long</li>\n<li>64-bit program counter</li>\n</ul>\n<h3 id=\"data-formats-6\"><a class=\"anchor\" href=\"#data-formats-6\">#</a> Data formats</h3>\n<ul>\n<li>Integers are stored as longwords or quadwords</li>\n<li>There are two different types of floating-point data formats. One group of three formats is included for compatibility with the VAX architecture. The other group consists of four IEEE standard formats, which are compatible with those used on most modern systems.</li>\n<li>There are no byte load or store operations. Only longwords and quadwords can be transferred between a register and memory. As a consequence, characters that are to be manipulated separately are usually stored one per longword.</li>\n</ul>\n<h3 id=\"instruction-formats-6\"><a class=\"anchor\" href=\"#instruction-formats-6\">#</a> Instruction formats</h3>\n<ul>\n<li>There are five basic instruction formats, some of which have subforms.</li>\n<li>All of these formats are 32 bits long.</li>\n<li>The first 6 bits of the instruction word always specify the opcode; some instruction formats also have an additional “function” field.</li>\n</ul>\n<h3 id=\"addressing-modes-7\"><a class=\"anchor\" href=\"#addressing-modes-7\">#</a> Addressing modes</h3>\n<ul>\n<li>Immediate mode</li>\n<li>Register direct mode</li>\n<li>PC-relative: TA = (PC) + displacement (for conditional and unconditional branches)</li>\n<li>Register indirect with displacement: TA = (register) + displacement (for load and store operations and for subroutine jumps)</li>\n</ul>\n<h3 id=\"instruction-set-7\"><a class=\"anchor\" href=\"#instruction-set-7\">#</a> Instruction Set</h3>\n<ul>\n<li>Approximately 130 machine instructions</li>\n<li>The instruction set is designed so that an implementation of the architecture can be as fast as possible. For example, there are no byte or word load and store instructions. This means that the memory access interface does not need to include shift-and-mask operations.</li>\n</ul>\n<h3 id=\"input-and-output-3\"><a class=\"anchor\" href=\"#input-and-output-3\">#</a> Input and Output</h3>\n<ul>\n<li>Performing I/O through multiple ports into one or more I/O channels.</li>\n<li>These channels are integrated into the network that interconnects the processing nodes.</li>\n<li>A system may be configured with up to one I/O channel for every eight PEs.</li>\n<li>All channels are accessible and controllable from all PEs.</li>\n</ul>\n",
            "tags": [
                "System Software",
                "Ch01",
                "System Software",
                "Assembler"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/26/System%20Software/Ch01/Ch01_example/",
            "url": "https://chienikao.github.io/2023/04/26/System%20Software/Ch01/Ch01_example/",
            "title": "Ch01 - Example",
            "date_published": "2023-04-26T01:33:29.000Z",
            "content_html": "<style>\n    font {\n        color: red;\n        font-weight: bold;\n    }\n</style>\n<h1 id=\"ch01-範例程式分析\"><a class=\"anchor\" href=\"#ch01-範例程式分析\">#</a> Ch01 - 範例程式分析</h1>\n<ul>\n<li><a href=\"./Appendix%20A.md\">Appendix A</a></li>\n<li>High Level Language 的部分是 pseudo-code\n<ul>\n<li>僅能代表大概相同的邏輯</li>\n<li>不保證這段 code 編譯成組合語言會和範例完全一樣</li>\n</ul>\n</li>\n</ul>\n<div class=\"note info\">\n<p><strong>判斷 format 的方法</strong></p>\n<ul>\n<li><strong>Relative Addressing</strong>: 必為 format 3</li>\n<li><strong>Immediate Addressing</strong>: 看常數大小\n<ul>\n<li>因為 format 3 的 disp 欄位有 12 bits，僅能表示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><msup><mn>2</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">-2^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> ~ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>12</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^{12}-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n</ul>\n</li>\n<li><strong>Memory Access</strong>:  通常是 format 3</li>\n<li><strong>Operation 前有加號</strong>：通常是 format 4</li>\n</ul>\n</div>\n<div class=\"note info\">\n<p><strong>判斷是否存取記憶體的方法</strong></p>\n<ul>\n<li>在語法描述中， <code>m</code>  表記憶體位置， <code>(m)</code>  是此位置的資料\n<ul>\n<li>所以如果描述中有  <code>(m)</code>  表示有 memory access</li>\n</ul>\n</li>\n</ul>\n</div>\n<h2 id=\"12-simple-data-movement\"><a class=\"anchor\" href=\"#12-simple-data-movement\">#</a> 1.2 Simple Data Movement</h2>\n<ul>\n<li>There are <strong>no memory-to-memory move instructions</strong></li>\n<li>All data movement must be <strong>done using registers</strong>.\n<ul>\n<li>先用 Load 指令把資料從某段記憶體寫入 register</li>\n<li>再用 Store 指令把資料從 register 寫入目標記憶體位置</li>\n</ul>\n</li>\n<li>There are four different ways of defining storage for data items in the SIC assembler language:  <code>WORD</code> ,  <code>RESW</code> ,  <code>BYTE</code> ,  <code>RESB</code></li>\n</ul>\n<h3 id=\"sic\"><a class=\"anchor\" href=\"#sic\">#</a> SIC</h3>\n<pre><code class=\"language-=\">\tLDA \tFIVE\n\tSTA \tALPHA\n\tLDCH\tCHARZ\n\tSTCH\tC1\n\t .\n\t .\n\t .\nALPHA\tRESW\t1\t//宣告變數，長度沒有限制\nFIVE\tWORD\t5\t//宣告常數\nCHARZ\tBYTE\tC'Z'\t//宣告byte\nC1\tRESB\t1\n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>: // 記憶體使用多少 byte (空間)\n<ul>\n<li><strong>Data</strong>: 2 words + 2 bytes = 6 + 2 bytes = 8 bytes</li>\n<li><strong>Instruction</strong>: 4 * 3(24 bits) = 12 bytes</li>\n<li><strong>Total</strong>: 8 + 12 bytes = 20 bytes</li>\n</ul>\n</li>\n<li><strong># of memory access</strong>: // 記憶體存取幾次 (速度)\n<ul>\n<li><strong>Data Access</strong>: 4</li>\n<li><strong>Instruction Fetch</strong>: 4</li>\n<li><strong>Total</strong>: 8</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"sicxe\"><a class=\"anchor\" href=\"#sicxe\">#</a> SIC/XE</h3>\n<pre><code class=\"language-=\">\tLDA\t #5\n\tSTA\t ALPHA\n\tLDA\t #90\n\tSTCH\t C1\n\t .\n\t .\n\t .\nALPHA\tRESW\t1\nC1\tRESB\t1\n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: 1 word + 1 bytes = 3 + 1 bytes = 4 bytes</li>\n<li><strong>Instruction</strong>: 3 + 3 + 3 + 3 = 12 bytes</li>\n<li><strong>Total</strong>: 16 bytes</li>\n</ul>\n</li>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 2</li>\n<li><strong>Instruction Fetch</strong>: 4</li>\n<li><strong>Total</strong>: 6</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"high-level-language\"><a class=\"anchor\" href=\"#high-level-language\">#</a> High Level Language</h3>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> ALPHA<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">char</span> C1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ALPHA <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>C1 <span class=\"token operator\">=</span> <span class=\"token char\">'Z'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"13-simple-arithmetic-operation\"><a class=\"anchor\" href=\"#13-simple-arithmetic-operation\">#</a> 1.3 Simple Arithmetic Operation</h2>\n<h3 id=\"sic-2\"><a class=\"anchor\" href=\"#sic-2\">#</a> SIC</h3>\n<pre><code class=\"language-=\">\tLDA\tALPHA\n\tADD\tINCR\n\tSUB \tONE\n\tSTA\tBETA\n\tLDA\tGAMMA\n\tADD \tINCR\n\tSUB\tONE\n\tSTA\tDELTA\n\t .\n\t .\n\t .\nONE\tWORD\t1\n         .\nALPHA\tRESW\t1\nBETA\tRESW\t1\nGAMMA\tRESW\t1\nDELTA\tRESW\t1\nINCR\tRESW\t1 \n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: 6 words(3 bytes) = 18 bytes</li>\n<li><strong>Instruction</strong>: 8 * 3 = 24 bytes</li>\n<li><strong>Total</strong>: 42 bytes</li>\n</ul>\n</li>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 8</li>\n<li><strong>Instruction Fetch</strong>: 8</li>\n<li><strong>Total</strong>: 16</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"sicxe-2\"><a class=\"anchor\" href=\"#sicxe-2\">#</a> SIC/XE</h3>\n<ul>\n<li><font> <code>ADDR</code> </font> is used to <strong>avoid having to fetch</strong>  <code>INCR</code>  from memory each time it is used in a calculation, which may make the program more efficient.</li>\n</ul>\n<pre><code class=\"language-=\">\tLDS\t INCR\n\tLDA\t ALPHA\n\tADDR\t S,A\n\tSUB\t #1\n\tSTA \t BETA\n\tLDA\t GAMMA\n\tADDR\t S,A\n\tSUB\t #1\n\tSTA\t DELTA\n\t .\n\t .\n\t .\n\t .\nALPHA\tRESW\t1\nBETA\tRESW\t1\nGAMMA\tRESW\t1\nDELTA\tRESW\t1\nINCR\tRESW\t1 \n</code></pre>\n<div class=\"note success\">\n<p><strong>Q:</strong>  <code>LDS</code>  和  <code>LDA</code>  load 兩個變數存進 register 有沒有好處？</p>\n<p><strong>A:</strong> 是有的，因為  <code>INCR</code>  在整個程式中使用超過一次，所以先 load 到 register 裡面可以減少 memory access 的次數</p>\n</div>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: 5 words = 15 bytes</li>\n<li><strong>Instruction</strong>: 2 byte( <code>ADDR</code> ) * 2 + 3 * 7 = 25 bytes</li>\n<li><strong>Total</strong>: 40 bytes</li>\n</ul>\n</li>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 5</li>\n<li><strong>Instruction Fetch</strong>: 9</li>\n<li><strong>Total</strong>: 14</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"high-level-language-2\"><a class=\"anchor\" href=\"#high-level-language-2\">#</a> High Level Language</h3>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> BETA <span class=\"token operator\">=</span> ALPHA <span class=\"token operator\">+</span> INCR <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">int</span> DELTA <span class=\"token operator\">=</span> GAMMA <span class=\"token operator\">+</span> INCR <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"14-simple-looping-and-indexing-operations\"><a class=\"anchor\" href=\"#14-simple-looping-and-indexing-operations\">#</a> 1.4 Simple Looping and Indexing Operations</h2>\n<h3 id=\"sic-3\"><a class=\"anchor\" href=\"#sic-3\">#</a> SIC</h3>\n<pre><code class=\"language-=\">\tLDX\tZERO\nMOVECH\tLDCH\tSTR1,X\n\tSTCH\tSTR2,X\n\tTIX\tELEVEN\n\tJLT\tMOVECH\n\t .\n\t .\n\t .\nSTR1\tBYTE\tC'TEST STRING'\nSTR2 \tRESB\t11\n.\nZERO\tWORD\t0\nELEVEN\tWORD\t11\n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: 2 words + 11 * 2 bytes = 6 + 22 bytes = 28 bytes</li>\n<li><strong>Instruction</strong>: 3 * 5 = 15 bytes</li>\n<li><strong>Total</strong>: 43 bytes</li>\n</ul>\n</li>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 1 + 3 * 11 = 34</li>\n<li><strong>Instruction Fetch</strong>: 1 + 4 * 11 = 45</li>\n<li><strong>Total</strong>: 79</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"sicxe-3\"><a class=\"anchor\" href=\"#sicxe-3\">#</a> SIC/XE</h3>\n<ul>\n<li><code>TIXR</code>  makes the loop <strong>more efficient</strong></li>\n<li>Because the value does not have to be fetched from memory each time the loop is executed.</li>\n</ul>\n<pre><code class=\"language-=\">\tLDT\t#11\n\tLDX\t#0\nMOVECH\tLDCH\tSTR1,X\n\tSTCH\tSTR2,X\n\tTIXR\tT\n\tJLT\tMOVECH\n\t .\n\t .\n\t .\nSTR1\tBYTE\tC'TEST STRING'\nSTR2 \tRESB\t11\n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: 11 * 2 bytes = 22 bytes</li>\n<li><strong>Instruction</strong>: <mark>2 ( <code>TIXR</code> )</mark> + 5 * 3 bytes= 17 bytes</li>\n<li><strong>Total</strong>: 39 bytes</li>\n</ul>\n</li>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 2 * 11 = 2 + 22 = 24</li>\n<li><strong>Instruction Fetch</strong>: 4 * 11 = 44</li>\n<li><strong>Total</strong>: 68</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"high-level-language-3\"><a class=\"anchor\" href=\"#high-level-language-3\">#</a> High Level Language</h3>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">char</span> STR1 <span class=\"token operator\">=</span> <span class=\"token string\">\"TEST STRING\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">char</span> STR2<span class=\"token punctuation\">[</span><span class=\"token number\">11</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">int</span> X <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">do</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    STR2<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> STR1<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    X<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>X <span class=\"token operator\">&lt;</span> <span class=\"token number\">11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"15-sample-indexing-and-looping-operations\"><a class=\"anchor\" href=\"#15-sample-indexing-and-looping-operations\">#</a> 1.5 Sample Indexing and Looping Operations</h2>\n<ul>\n<li>The value in the index register must be <strong>incremented by 3</strong> for each iteration of this loop\n<ul>\n<li>Because each iteration <strong>processes a 3-byte element</strong> of the arrays</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"sic-4\"><a class=\"anchor\" href=\"#sic-4\">#</a> SIC</h3>\n<ul>\n<li>\n<p>The  <code>TIX</code>  instruction always <strong>adds 1 to register X</strong>, so it is <font>not suitable</font> for this program fragment.</p>\n</li>\n<li>\n<p>因為一個 word 占用 3bytes，所以 X 每次要跳三個位置 (X 每次加 3)，才能正確的讀取每一個 word</p>\n</li>\n</ul>\n<pre><code class=\"language-=\">\tLDA\tZERO\n\tSTA\tINDEX\nADDLP\tLDX\tINDEX\n\tLDA\tALPHA,X\n\tADD\tBETA,X\n\tSTA\tGAMMA,X\n\tLDA\tINDEX\n\tADD\tTHREE\n\tSTA\tINDEX\n\tCOMP\tK300\n\tJLT\tADDLP\n\t .\n\t .\n\t .\nINDEX\tRESW\t1\n\t .\nALPHA\tRESW\t100\nBETA\tRESW\t100\nGAMMA\tRESW\t100\n\t .\nZERO\tWORD\t0\nK300\tWORD\t300\nTHREE\tWORD\t3\n</code></pre>\n<div class=\"note danger\">\n<p><strong>Q:</strong> 為什麼程式碼 7 ~ 10 不用  <code>TIX</code>  ?</p>\n<p><strong>A:</strong> 因為這裡的變數宣告是 word，而不是 byte，要找到下一個資料位置，要加 3 bytes (one word)，而  <code>TIX</code>  裡面的內容是，加 1 並比較。</p>\n</div>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: 1 + 100*3 + 3 words = 304 words = 912 bytes</li>\n<li><strong>Instruction</strong>: 11 * 3 = 33 bytes</li>\n<li><strong>Total</strong>: 945 bytes</li>\n</ul>\n</li>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 2 + 8 * 100 = 802</li>\n<li><strong>Instruction Fetch</strong>: 2 + 9 * 100 = 902</li>\n<li><strong>Total</strong>: 1704</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"sicxe-4\"><a class=\"anchor\" href=\"#sicxe-4\">#</a> SIC/XE</h3>\n<pre><code class=\"language-=\">\tLDS\t#3\n\tLDT\t#300\n\tLDX\t#0\nADDLP\tLDA\tALPHA,X\n\tADD\tBETA,X\n\tSTA\tGAMMA,X\n\tADDR\tS,X\n\tCOMPR \tX,T\n\tJLT\tADDLP\n\t .\n\t .\n\t .\n\t .\nALPHA\tRESW\t100\nBETA\tRESW\t100\nGAMMA\tRESW\t100\n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: 3 * 100 words = 300 words = 900 bytes</li>\n<li><strong>Instruction</strong>: <mark>2( <code>ADDR</code> )</mark> + <mark>2( <code>COMPR</code> )</mark> + 7 * 3 = 25</li>\n<li><strong>Total</strong>: 925 bytes</li>\n</ul>\n</li>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 3 * 100 = 300</li>\n<li><strong>Instruction Fetch</strong>: 3 + 6 * 100 = 603</li>\n<li><strong>Total</strong>: 903</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"high-level-language-4\"><a class=\"anchor\" href=\"#high-level-language-4\">#</a> High Level Language</h3>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> ALPHA<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">int</span> BETA<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">int</span> GAMMA<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>X <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> X <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> X<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    GAMMA<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ALPHA<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> BETA<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"16-simple-io-operations\"><a class=\"anchor\" href=\"#16-simple-io-operations\">#</a> 1.6 Simple I/O Operations</h2>\n<h3 id=\"sic-5\"><a class=\"anchor\" href=\"#sic-5\">#</a> SIC</h3>\n<pre><code class=\"language-=\">INLOOP\t TD \tINDEV\n\t JEQ\tINLOOP\n\t RD\tINDEV\n\t STCH\tDATA\n\t  .\n\t  .\n\t  .\nOUTLP\t TD\tOUTDEV\n\t JEQ\tOUTLP\n\t LDCH\tDATA\n\t WD\tOUTDEV\n\t  .\n\t  .\n\t  .\nINDEV\t BYTE\tX'F1'\t// X 代表使用16進位, 'F1' 是給此裝置的編號\nOUTDEV\t BYTE\tX'05'\nDATA\t RESB\t1\n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: 3 bytes</li>\n<li><strong>Instruction</strong>: (4 + 4) * 3 = 24 bytes</li>\n<li><strong>Total</strong>: 27 bytes</li>\n</ul>\n</li>\n</ul>\n<br>\n<blockquote>\n<p>國展表示這邊 access 不用算 //TD RD WD</p>\n</blockquote>\n<ul>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 2</li>\n<li><strong>Instruction Fetch</strong>: 2n + 2m + 4 (n, m: 測試 device 的次數)</li>\n<li><strong>Total</strong>: 2n + 2m + 6</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"high-level-language-5\"><a class=\"anchor\" href=\"#high-level-language-5\">#</a> High Level Language</h3>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Device INDEV <span class=\"token operator\">=</span> <span class=\"token function\">Device</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"F1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Device OUTDEV <span class=\"token operator\">=</span> <span class=\"token function\">Device</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"05\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">char</span> DATA<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 不能使用就繼續測試</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span> INDEV<span class=\"token punctuation\">.</span><span class=\"token function\">isReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>DATA <span class=\"token operator\">=</span> INDEV<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span> OUTDEV<span class=\"token punctuation\">.</span><span class=\"token function\">isReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>OUTDEV<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>DATA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"17-sample-subroutine-call-and-record-input-operations\"><a class=\"anchor\" href=\"#17-sample-subroutine-call-and-record-input-operations\">#</a> 1.7 Sample Subroutine Call and Record Input Operations</h2>\n<h3 id=\"sic-6\"><a class=\"anchor\" href=\"#sic-6\">#</a> SIC</h3>\n<pre><code class=\"language-=\">\tJSUB\tREAD\n\t .\n\t .\n\t .\nREAD\tLDX\tZERO\nRLOOP\tTD\tINDEV\n\tJEQ\tRLOOP\n\tRD\tINDEV\n\tSTCH\tRECORD,X\n\tTIX\tK100\n\tJLT\tRLOOP\n\tRSUB\n\t .\n\t .\t\n\t .\nINDEV\tBYTE\tX'F1'\nRECORD\tRESB\t100\n\t .\t\nZERO\tWORD\t0\nK100\tWORD\t100\n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: (1 + 100) bytes + 2 words = 107 bytes</li>\n<li><strong>Instruction</strong>: 9 * 3 = 27 bytes</li>\n<li><strong>Total</strong>: 134 bytes</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>國展表示這邊 access 不用算 //TD RD WD</p>\n</blockquote>\n<ul>\n<li><strong># of memory access</strong>:\n<ul>\n<li><strong>Data Access</strong>: 1 + 2 * 100 = 201</li>\n<li><strong>Instruction Fetch</strong>: 1 + 1 + 2n + 5 * 100 + 1 (n: 測試 device 的次數)</li>\n<li><strong>Total</strong>: 2n + 704</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"sicxe-5\"><a class=\"anchor\" href=\"#sicxe-5\">#</a> SIC/XE</h3>\n<pre><code class=\"language-=\">\tJSUB\tREAD\n\t .\n\t .\n\t .\nREAD\tLDX\t#0\n\tLDT\t#100\nRLOOP\tTD\t INDEV\n\tJEQ\t RLOOP\n\tRD\t INDEV\n\tSTCH\t RECORD,X\n\tTIXR\t T\n\tJLT\t RLOOP\n\tRSUB\n\t .\n\t .\n\t .\nINDEV\tBYTE\tX'F1'\nRECORD\tRESB\t100\n</code></pre>\n<ul>\n<li><strong>Memory usage</strong>:\n<ul>\n<li><strong>Data</strong>: (1 + 100) bytes = 101 bytes</li>\n<li><strong>Instruction</strong>: <mark>2( <code>TIXR</code> )</mark> + 3 * 9 = 29 bytes</li>\n<li><strong>Total</strong>: 130 bytes</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>國展表示這邊 access 不用算 //TD RD WD</p>\n</blockquote>\n<ul>\n<li><strong>Memory Access</strong></li>\n</ul>\n<h3 id=\"high-level-language-6\"><a class=\"anchor\" href=\"#high-level-language-6\">#</a> High Level Language</h3>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Device INDEV <span class=\"token operator\">=</span> <span class=\"token function\">Device</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"F1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">char</span> RECORD<span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">READ</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">READ</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>X <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> X <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> X<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span> INDEV<span class=\"token punctuation\">.</span><span class=\"token function\">isReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        RECORD<span class=\"token punctuation\">[</span>X<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> INDEV<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "System Software",
                "Ch01",
                "System Software"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/26/System%20Software/Ch02/Ch02_Assembler/",
            "url": "https://chienikao.github.io/2023/04/26/System%20Software/Ch02/Ch02_Assembler/",
            "title": "Ch02 - Assemblers",
            "date_published": "2023-04-26T01:33:29.000Z",
            "content_html": "<p><img data-src=\"https://i.imgur.com/hSiRp3g.png\" alt=\"\"></p>\n<h2 id=\"introduction\"><a class=\"anchor\" href=\"#introduction\">#</a> Introduction</h2>\n<p>Design and implementation of assemblers</p>\n<ul>\n<li>Some <strong>common fundamental functions</strong> such as:\n<ul>\n<li>translating <strong>mnemonic operation codes</strong> to their <strong>machine language</strong> equivalents</li>\n<li>assigning machine <strong>addresses</strong> to <strong>symbolic labels</strong> used by the programmer.</li>\n</ul>\n</li>\n<li>The features and design of an assembler depend heavily upon the source language it translates and the machine language it produces.</li>\n<li><strong>Machine dependent/independent features</strong></li>\n</ul>\n<h2 id=\"basic-assembler-functions\"><a class=\"anchor\" href=\"#basic-assembler-functions\">#</a> Basic Assembler Functions</h2>\n<ul>\n<li>\n<p><a href=\"./Ch02%20-%20%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F.md\"><strong>Example of SIC assembler language program</strong></a></p>\n</li>\n<li>\n<p><strong>Assembler Directive</strong>: 在組語程式中，用來告訴 Assembler 某些資訊或是該做哪些動作，不屬於 CPU 的指令</p>\n<ul>\n<li><code>START</code> : specify <strong>name</strong> and <strong>starting address</strong> for the program.</li>\n<li><code>END</code> : indicate the <strong>end of the source program</strong> and (optionally) specify the first executable instruction in the program.</li>\n<li><strong>Variable/Constant Declaration</strong>\n<ul>\n<li><code>BYTE</code></li>\n<li><code>WORD</code></li>\n<li><code>RESB</code></li>\n<li><code>RESW</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>The line numbers are for reference only and are not part of the program</p>\n</li>\n</ul>\n<h3 id=\"a-simple-sic-assembler\"><a class=\"anchor\" href=\"#a-simple-sic-assembler\">#</a> A Simple SIC Assembler</h3>\n<ul>\n<li>The translation of source program to object code requires us to accomplish the following functions<br>\n(not necessarily in the order given)\n<ol>\n<li>Convert <strong>mnemonic operation codes</strong> to their machine <strong>language equivalents</strong>\n<ul>\n<li>translate STL to 14 (line 10)</li>\n</ul>\n</li>\n<li>Convert <strong>symbolic operands</strong> to their equivalent <strong>machine addresses</strong>\n<ul>\n<li>translate RETADR to 1033 (line 10)</li>\n</ul>\n</li>\n<li>Build the <strong>machine instruction</strong> in the <strong>proper format</strong>.</li>\n<li>Convert the <strong>data constants</strong> specified in the source program into their <strong>internal machine representations</strong>\n<ul>\n<li>translate EOF to 454F46 (line 80)</li>\n</ul>\n</li>\n<li><strong>Write the object program</strong> and the <strong>assembly listing</strong>.</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"forward-reference-two-passes\"><a class=\"anchor\" href=\"#forward-reference-two-passes\">#</a> Forward Reference &amp; Two Passes</h3>\n<ul>\n<li>The instruction at line 10 contains a <font>forward reference</font>.\n<ul>\n<li>Line 10 存取  <code>RETADR</code> ，但  <code>RETADR</code>  在 line 95 才定義</li>\n</ul>\n</li>\n<li>Because of forward reference, most assemblers make <strong>two passes</strong> over the source program.\n<ul>\n<li><strong>The first pass</strong>:\n<ul>\n<li>does little more than scan the source program for <strong>label definitions</strong> and <strong>assign addresses</strong>.</li>\n</ul>\n</li>\n<li><strong>The second pass</strong>:\n<ul>\n<li>performs most of the <strong>actual translation</strong> previously described.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>In addition, the assembler must <strong>process statements</strong> called <font>assembler directives</font> (or <font>pseudo-instructions</font>).</li>\n</ul>\n<h3 id=\"simple-object-program\"><a class=\"anchor\" href=\"#simple-object-program\">#</a> Simple Object Program</h3>\n<ul>\n<li>The simple object program format we use contains <strong>three types of records</strong>.\n<ul>\n<li><strong>Header</strong>\n<ul>\n<li>program name</li>\n<li>starting address</li>\n<li>length</li>\n</ul>\n</li>\n<li><strong>Text</strong>\n<ul>\n<li>translated instructions</li>\n<li>data</li>\n<li>indication of the addresses where these are to be loaded</li>\n</ul>\n</li>\n<li><strong>End</strong>\n<ul>\n<li>marks the end of the object program</li>\n<li>specifies the address in the program where execution is to begin</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>Header record</strong>:</p>\n<ul>\n<li>Col. 1: H</li>\n<li>Col. 2-7: Program name</li>\n<li>Col. 8-13: starting address of object program</li>\n<li>Col. 14-19: length of object program in bytes</li>\n</ul>\n<p><strong>Text record</strong>:</p>\n<ul>\n<li>Col. 1: T</li>\n<li>Col. 2-7: starting address for object code in this record</li>\n<li>Col. 8-9: length of object code in this record in bytes</li>\n<li>Col. 10-69: object code, represented in <strong>hexadecimal</strong></li>\n</ul>\n<div class=\"note info\">\n<ul>\n<li>Object code 的部分可以容納 60 個 <strong>symbol</strong>（每個 4 bit），若以 byte 計算就是 30 bytes。</li>\n<li>一個 instruction 長 3 bytes，所以可以放 10 個 instructions</li>\n<li>在指令不連續時（通常是中間有宣告變數），會在沒填滿的情況下使用新的 text record。</li>\n</ul>\n</div>\n<p><strong>End record</strong>:</p>\n<ul>\n<li>Col.1: E</li>\n<li>Col. 2-7: address of first executable instruction in object program</li>\n</ul>\n<p><img data-src=\"https://i.imgur.com/K3uyzDu.jpg\" alt=\"\"></p>\n<ul>\n<li>There is no object code corresponding to addresses 1033-2038.</li>\n<li>This storage is simply reserved by the loader for use by the program during execution.</li>\n</ul>\n<h3 id=\"two-passes\"><a class=\"anchor\" href=\"#two-passes\">#</a> Two Passes</h3>\n<p><strong>Pass 1</strong> (define symbols):</p>\n<ul>\n<li><strong>Assign addresses</strong> to all <strong>statements</strong> in the program.</li>\n<li>Save the values (addresses) assigned to all <strong>labels</strong> for use in Pass 2.</li>\n<li>Perform some <strong>processing of assembler directives</strong>.\n<ul>\n<li>e.g., <strong>determining the length of data areas</strong> defined by BYTE, RESW, etc.)</li>\n</ul>\n</li>\n</ul>\n<p><strong>Pass 2</strong> (assemble instructions and generate object program):</p>\n<ul>\n<li>Assemble <strong>instructions</strong> (translating operation codes and looking up addresses)</li>\n<li>Generate <strong>data values</strong> defined by BYTE, WORD, etc.</li>\n<li>Perform processing of assembler directives not done during Pass 1.</li>\n<li>Write the object program and the assembly listing.</li>\n</ul>\n<h2 id=\"assembler-algorithm-and-data-structures\"><a class=\"anchor\" href=\"#assembler-algorithm-and-data-structures\">#</a> Assembler Algorithm and Data Structures</h2>\n<p>Major internal data structures of simple assembler:</p>\n<ul>\n<li><strong>Operation code table</strong> (OPTAB)</li>\n<li>Symbol table (SYMTAB)</li>\n<li>Location Counter (LOCCTR)\n<ul>\n<li><strong>Initialized to the beginning address</strong> specified in the START statement.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"operation-code-table-optab\"><a class=\"anchor\" href=\"#operation-code-table-optab\">#</a> Operation Code Table (OPTAB)</h3>\n<ul>\n<li>Contains (at least) the <strong>mnemonic operation code</strong> and its <strong>machine language equivalents</strong>\n<ul>\n<li>In more complex assemblers, this table also contains information about instruction format and length.</li>\n</ul>\n</li>\n<li>OPTAB is usually organized as a <strong>hash table</strong>, with <strong>mnemonic operation code as the <font>key</font></strong>.\n<ul>\n<li>The information in OPTAB is <strong>predefined</strong> when the assembler itself is written.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Example of OPTAB</strong></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Mnemonic</th>\n<th style=\"text-align:left\">Machine Language</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>ADD</code></td>\n<td style=\"text-align:left\">18</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>ADDF</code></td>\n<td style=\"text-align:left\">58</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>ADDR</code></td>\n<td style=\"text-align:left\">90</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">…</td>\n<td style=\"text-align:left\">…</td>\n</tr>\n</tbody>\n</table>\n<div class=\"note info\">\n<ul>\n<li>Operation code table 的內容不太會變動</li>\n<li>使用目的是用來加快 mnemonic <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> machine language 的速度\n<ul>\n<li>需要使用<strong>查詢</strong>速度很快的資料結構</li>\n</ul>\n</li>\n<li>所以會使用 Hash Table 來實作 OPTAB\n<ul>\n<li>查詢的平均複雜度是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n</li>\n</ul>\n</div>\n<h3 id=\"symbol-table-symtab\"><a class=\"anchor\" href=\"#symbol-table-symtab\">#</a> Symbol Table (SYMTAB)</h3>\n<ul>\n<li>Includes the <strong>name</strong> and <strong>value (address)</strong> for each <strong>label</strong> in the source program\n<ul>\n<li>together with <strong>flags</strong> to indicate <font>error conditions</font>\n<ul>\n<li>e.g., a symbol defined in two different places</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>It may also contain other information about the data area or instruction labeled\n<ul>\n<li>for example, its <strong>type</strong> or <strong>length</strong>.</li>\n</ul>\n</li>\n<li>During <font>Pass 1</font>\n<ul>\n<li><strong>labels</strong> are entered into SYMTAB as they are encountered in the source program</li>\n<li>along with their <strong>assigned addresses</strong>.</li>\n</ul>\n</li>\n<li>During <font>Pass 2</font>\n<ul>\n<li>symbols used as <strong>operands</strong> are <strong>looked up in SYMTAB</strong><br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> <strong>the addresses</strong> to be inserted in the assembled instructions.</li>\n</ul>\n</li>\n<li>SYMTAB is usually organized as a <strong>hash table</strong>\n<ul>\n<li>for <strong>efficiency</strong> of <font>insertion</font> and <font>retrieval</font>.</li>\n</ul>\n</li>\n<li>Since entries are rarely deleted from this table, efficiency of deletion is not an important consideration.</li>\n</ul>\n<p><strong>Example: SYMTAB of <a href=\"./Ch02%20-%20%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F.md\">SIC Program</a></strong></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Label</th>\n<th style=\"text-align:left\">Location</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>COPY</code></td>\n<td style=\"text-align:left\">1000</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>FIRST</code></td>\n<td style=\"text-align:left\">1000</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>CLOOP</code></td>\n<td style=\"text-align:left\">1003</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>ENDFIL</code></td>\n<td style=\"text-align:left\">1015</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>EOF</code></td>\n<td style=\"text-align:left\">102A</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>THREE</code></td>\n<td style=\"text-align:left\">102D</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">…</td>\n<td style=\"text-align:left\">…</td>\n</tr>\n</tbody>\n</table>\n<div class=\"note info\">\n<p>對 hash table 來說，<strong>insertion</strong> (插入) 和 <strong>retrieval</strong> (查詢)，平均複雜度都是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></p>\n</div>\n<h3 id=\"hash-table\"><a class=\"anchor\" href=\"#hash-table\">#</a> Hash Table</h3>\n<ul>\n<li>Care should be taken in the selection of a hashing function.\n<ul>\n<li>Programmers often select many <strong>labels</strong> that have <strong>similar characteristics</strong>\n<ul>\n<li>for example, labels that start or end with the same characters (like LOOP1, LOOP2, LOOPA).</li>\n</ul>\n</li>\n<li>It is important that the hashing function used perform well with such non-random keys.\n<ul>\n<li>對於任意的 key，hash 的結果越不容易重複越好</li>\n</ul>\n</li>\n<li>Division of the entire key by a <strong>prime table length</strong> often gives good results.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"algorithms-of-passes\"><a class=\"anchor\" href=\"#algorithms-of-passes\">#</a> Algorithms of Passes</h3>\n<p>Pass 1 usually writes an <font>intermediate file</font></p>\n<ul>\n<li>contains each <strong>source statement</strong> together with its <strong>assigned addresses</strong>, <strong>error indicators</strong>, etc.</li>\n<li>This file is used <strong>as the input to Pass 2</strong>.</li>\n</ul>\n<p><strong>Pseudo Code of Pass1</strong></p>\n<figure class=\"highlight vhdl\"><figcaption data-lang=\"VHDL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    read first input line</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> OPCODE <span class=\"token operator\">=</span> 'START' <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            save #<span class=\"token punctuation\">[</span>OPERAND<span class=\"token punctuation\">]</span> as starting address</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            initialize LOCCTR <span class=\"token keyword\">to</span> starting address</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            write line <span class=\"token keyword\">to</span> intermediate <span class=\"token keyword\">file</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            read <span class=\"token keyword\">next</span> input line</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">if</span> START<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        initialize LOCCTR <span class=\"token keyword\">to</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">while</span> OPCODE !<span class=\"token operator\">=</span> '<span class=\"token keyword\">END</span>' do</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">if</span> this <span class=\"token keyword\">is</span> <span class=\"token operator\">not</span> a comment line <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                    <span class=\"token keyword\">if</span> there <span class=\"token keyword\">is</span> a symbol <span class=\"token keyword\">in</span> the <span class=\"token keyword\">LABEL</span> field <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                            search SYMTAB <span class=\"token keyword\">for</span> <span class=\"token keyword\">LABEL</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                            <span class=\"token keyword\">if</span> found <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                                set error flag <span class=\"token punctuation\">(</span>duplicate symbol<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                            <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                                insert <span class=\"token punctuation\">(</span><span class=\"token keyword\">LABEL</span><span class=\"token punctuation\">,</span> LOCCTR<span class=\"token punctuation\">)</span> into SYMTAB</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                        <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">if</span> symbol<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                    search OPTAB <span class=\"token keyword\">for</span> OPCODE</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                    <span class=\"token keyword\">if</span> found <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                        add <span class=\"token number\">3</span> <span class=\"token punctuation\">&#123;</span>instruction length<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">to</span> LOCCTR</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> OPCODE <span class=\"token operator\">=</span> 'WORD ' <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                        add <span class=\"token number\">3</span> <span class=\"token keyword\">to</span> LOCCTR</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> OPCODE <span class=\"token operator\">=</span> 'RESW' <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                        add <span class=\"token number\">3</span> <span class=\"token operator\">*</span> #<span class=\"token punctuation\">[</span>OPERAND<span class=\"token punctuation\">]</span> <span class=\"token keyword\">to</span> LOCCTR</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> OPCODE <span class=\"token operator\">=</span> 'RESB' <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                        add #<span class=\"token punctuation\">[</span>OPERAND<span class=\"token punctuation\">]</span> <span class=\"token keyword\">to</span> LOCCTR</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> OPCODE <span class=\"token operator\">=</span> 'BYTE' <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                            find length <span class=\"token keyword\">of</span> <span class=\"token keyword\">constant</span> <span class=\"token keyword\">in</span> bytes</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                            add length <span class=\"token keyword\">to</span> LOCCTR</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                        <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">if</span> BYTE<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                    <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                        set error flag <span class=\"token punctuation\">(</span>invalid operation code<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">if</span> <span class=\"token operator\">not</span> a comment<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            write line <span class=\"token keyword\">to</span> intermediate <span class=\"token keyword\">file</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            read <span class=\"token keyword\">next</span> input line</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">while</span> <span class=\"token operator\">not</span> <span class=\"token keyword\">END</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    write last line <span class=\"token keyword\">to</span> intermediate <span class=\"token keyword\">file</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    save <span class=\"token punctuation\">(</span>LOCCTR <span class=\"token operator\">-</span> starting address<span class=\"token punctuation\">)</span> as program length</pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span>Pass <span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>Presudo Code of Pass2</strong></p>\n<figure class=\"highlight vhdl\"><figcaption data-lang=\"VHDL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    read first input line <span class=\"token punctuation\">&#123;</span>from intermediate <span class=\"token keyword\">file</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> OPCODE <span class=\"token operator\">=</span> 'START' <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            Write listing line</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            read <span class=\"token keyword\">next</span> input line</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">if</span> START<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    write Header <span class=\"token keyword\">record</span> <span class=\"token keyword\">to</span> object program</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    initialize first Text <span class=\"token keyword\">record</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">while</span> OPCODE !<span class=\"token operator\">=</span> '<span class=\"token keyword\">END</span>' do</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">if</span> this <span class=\"token keyword\">is</span> <span class=\"token operator\">not</span> a comment line <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                    search OPTAB <span class=\"token keyword\">for</span> OPCODE</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                    <span class=\"token keyword\">if</span> found <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                            <span class=\"token keyword\">if</span> there <span class=\"token keyword\">is</span> a symbol <span class=\"token keyword\">in</span> OPERAND field <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                                <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                                    search SYMTAB <span class=\"token keyword\">for</span> OPERAND</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                                    <span class=\"token keyword\">if</span> found <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                                        store symbol value as operand address</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                                    <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                                        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                                            store <span class=\"token number\">0</span> as operand address</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                                            set error flag <span class=\"token punctuation\">(</span>undefined symbol<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                                        <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                                <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">if</span> symbol<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                            <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                                store <span class=\"token number\">0</span> as operand address</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                            assemble the object code instruction</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                        <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">if</span> opcode found<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> OPCODE <span class=\"token operator\">=</span> 'BYTE' <span class=\"token operator\">or</span> 'WORD' <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                        convert <span class=\"token keyword\">constant</span> <span class=\"token keyword\">to</span> object code</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                    <span class=\"token keyword\">if</span> object code will <span class=\"token operator\">not</span> fit into the current Text <span class=\"token keyword\">record</span> <span class=\"token keyword\">then</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                        <span class=\"token keyword\">begin</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                            write Text <span class=\"token keyword\">record</span> <span class=\"token keyword\">to</span> object program</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                            initialize <span class=\"token keyword\">new</span> Text <span class=\"token keyword\">record</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                        <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                    add object code <span class=\"token keyword\">to</span> Text <span class=\"token keyword\">record</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">if</span> <span class=\"token operator\">not</span> comment <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            write listing line</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            read <span class=\"token keyword\">next</span> input line</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">while</span> <span class=\"token operator\">not</span> <span class=\"token keyword\">END</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    write last Text <span class=\"token keyword\">record</span> <span class=\"token keyword\">to</span> object program</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    write <span class=\"token keyword\">End</span> <span class=\"token keyword\">record</span> <span class=\"token keyword\">to</span> object program</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    write last listing line</pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">end</span> <span class=\"token punctuation\">&#123;</span>Pass <span class=\"token number\">2</span><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"machine-dependent-assembler-features\"><a class=\"anchor\" href=\"#machine-dependent-assembler-features\">#</a> Machine-Dependent Assembler Features</h2>\n<ul>\n<li>\n<p><a href=\"./Ch02%20-%20%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F.md\"><strong>Example of SIC/XE Program</strong></a></p>\n</li>\n<li>\n<p>The <strong>assembler directive</strong>  <code>BASE</code>  is used in conjunction with <strong>base relative addressing</strong>.</p>\n<ul>\n<li>用  <code>BASE</code>  讓 assembler 知道 base register 的值</li>\n<li>Assembler 必須知道 base 的值，才能計算指令中的 displacement</li>\n</ul>\n</li>\n<li>\n<p>If the <strong>displacements</strong> required for relative addressing are <strong>too large</strong> to fit into a <strong>3-byte instruction</strong><br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> the <strong>4-byte extended format</strong> (Format 4) must be used.</p>\n<ul>\n<li>The <strong>bit e is set to 1</strong> to indicate extended instruction format.</li>\n<li>The extended instruction format is <strong>specified with the prefix +</strong> added to the <strong>operation code</strong> in the <font>source statement</font>.</li>\n<li>It is the <strong>programmer’s responsibility to specify</strong> this form of addressing when it is required.</li>\n</ul>\n</li>\n<li>\n<p>Advantages of the more advanced SIC/XE architecture to improve the execution speed of the program</p>\n<ul>\n<li><strong>Register-to-register instructions</strong> are faster than register-to-memory operations.</li>\n<li>When using <strong>immediate addressing</strong>, the operand is already present as part of the instruction and <strong>need not be fetched from anywhere</strong>.</li>\n<li>The use of <strong>indirect addressing</strong> often <strong>avoids the need for another instruction</strong>.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"instruction-formats-and-addressing-modes\"><a class=\"anchor\" href=\"#instruction-formats-and-addressing-modes\">#</a> Instruction Formats and Addressing Modes</h3>\n<ul>\n<li>\n<p>The conversion of <strong>register mnemonics</strong> to numbers can be done with a separate table</p>\n<ul>\n<li>however, it is often convenient to use the <strong>symbol table</strong> for this purpose.</li>\n<li>To do this, SYMTAB would <strong>be preloaded with the register names</strong> and their values.</li>\n</ul>\n</li>\n<li>\n<p>If extended format is not specified, the assembler <strong>first</strong> attempts to translate the instruction using <strong>program-counter relative addressing</strong>.</p>\n<ul>\n<li>If this is not possible (because the required displacement is out of range), the assembler then attempts to use <strong>base relative addressing</strong>.</li>\n<li>If neither form of relative addressing is applicable and extended format is not specified, then the instruction cannot be properly assembled.\n<ul>\n<li>In this case, the assembler must generate an <font>error message</font>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"displacement-calculation\"><a class=\"anchor\" href=\"#displacement-calculation\">#</a> Displacement Calculation</h3>\n<ul>\n<li>The computation that the assembler needs to perform is essentially the target address calculation in reverse.\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mo>=</mo><mi>T</mi><mi>A</mi><mo>−</mo><mo stretchy=\"false\">(</mo><mi>B</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">disp = TA - (B)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mo>=</mo><mi>T</mi><mi>A</mi><mo>−</mo><mo stretchy=\"false\">(</mo><mi>P</mi><mi>C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">disp = TA - (PC)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n</li>\n</ul>\n<p><strong>PC Relative</strong></p>\n<ul>\n<li>The program counter is advanced after each instruction is fetched and before it is executed.\n<ul>\n<li>Thus during the execution of an instruction, program counter will contain <strong>the address of the next instruction</strong>.</li>\n</ul>\n</li>\n<li>The assembler knows what the contents of the program counter will be at execution time.</li>\n</ul>\n<p><strong>Base Relative</strong></p>\n<ul>\n<li>The base register is under control of the programmer.</li>\n<li>The programmer must tell the assembler what the base register will contain during execution<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> so that the assembler can compute displacements.\n<ul>\n<li>This is done with the <strong>assembler directive  <code>BASE</code> </strong>.</li>\n<li><code>NOBASE</code></li>\n<li>These assembler directives produce no executable code.</li>\n<li>The programmer must provide instructions that load the proper value into the base register during execution.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"machine-independent-assembler-features\"><a class=\"anchor\" href=\"#machine-independent-assembler-features\">#</a> Machine-Independent Assembler Features</h2>\n<h3 id=\"literal-字定\"><a class=\"anchor\" href=\"#literal-字定\">#</a> Literal (字定)</h3>\n<!--https://hackmd.io/@NTNUCSIE112/SP110-1_2#23-Machine-Independent-Assembler-Features-->\n<ul>\n<li>\n<p>A literal is identified with the prefix  <code>=</code> , which is followed by a specification of the literal value, using the same notation as in the <em>BYTE</em> statement.</p>\n</li>\n<li>\n<p>The effect of using a literal is exactly the same as if the programmer had defined the <strong>constant</strong> explicitly and used the label assigned to the constant as the instruction operand.</p>\n</li>\n<li>\n<p>Difference between a literal and an immediate operand</p>\n<ul>\n<li>With <strong>immediate</strong> addressing, the operand value is assembled as part of the machine instruction.<figure class=\"highlight vhdl\"><figcaption data-lang=\"VHDL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Line \tLoc \t   Source statement\t \tObject code \t </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">55</span> \t<span class=\"token number\">0020</span> \t\tLDA    #<span class=\"token number\">3</span> \t\t<span class=\"token number\">010003</span></pre></td></tr></table></figure></li>\n<li>With a <strong>literal</strong>, the assembler generates the specified value as a constant at some other memory location.<figure class=\"highlight vhdl\"><figcaption data-lang=\"VHDL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Line \tLoc \t   Source statement\t \tObject code \t </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">45</span> \t<span class=\"token number\">001</span>A \tENDFIL \tLDA    <span class=\"token operator\">=</span>C<span class=\"token attribute attr-name\">'EOF</span>' \t\t<span class=\"token number\">032010</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>All of the literal operands used in a program are gathered together into one or more <span class=\"red\">literal pools</span>.</p>\n</li>\n<li>\n<p>In some case, it is desirable to place literals into a pool at some other location in the object program.</p>\n<ul>\n<li>ex. avoiding having to use extended format instructions when referring to the literals.</li>\n</ul>\n<figure class=\"highlight vhdl\"><figcaption data-lang=\"VHDL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Line \tLoc \t   Source statement\t \tObject code \t </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">93</span> \t\t\t        LTORG \t\t\t </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t    <span class=\"token number\">002</span>D \t<span class=\"token operator\">*</span>      <span class=\"token operator\">=</span>C<span class=\"token attribute attr-name\">'EOF</span>' \t\t\t<span class=\"token number\">454</span>F46</pre></td></tr></table></figure></li>\n</ul>\n",
            "tags": [
                "System Software",
                "Ch02",
                "System Software",
                "Assembler"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/26/System%20Software/Ch02/Ch02_example/",
            "url": "https://chienikao.github.io/2023/04/26/System%20Software/Ch02/Ch02_example/",
            "title": "Ch02 - Example",
            "date_published": "2023-04-26T01:33:29.000Z",
            "content_html": "<h1 id=\"ch02-範例程式\"><a class=\"anchor\" href=\"#ch02-範例程式\">#</a> Ch02 - 範例程式</h1>\n<h2 id=\"example-of-sic-program\"><a class=\"anchor\" href=\"#example-of-sic-program\">#</a> Example of SIC Program</h2>\n<ul>\n<li><strong> <code>,X</code> </strong> modifier: <strong>indexed</strong> addressing mode (Line 160, 225)</li>\n<li>Lines <strong>beginning with  <code>.</code> </strong> contain <strong>comments</strong> only (Line 110~120, 195~205)</li>\n</ul>\n<h3 id=\"copy-subroutine\"><a class=\"anchor\" href=\"#copy-subroutine\">#</a>  <code>COPY</code>  Subroutine</h3>\n<ul>\n<li>相當於整個程式的主函式\n<ul>\n<li>因為  <code>FIRST</code>  包含在此 Subroutine 中</li>\n</ul>\n</li>\n<li>用來把 input device 的檔案複製到 output device\n<ul>\n<li>透過  <code>RDREC</code>  讀取檔案中的 record 並存到 buffer</li>\n<li>透過  <code>WRREC</code>  把 buffer 中的 record 寫入檔案</li>\n</ul>\n</li>\n<li>檔案由多個 records 組成，但不確定有幾個 record…\n<ul>\n<li>所以用迴圈把 record 一個一個讀進來，每讀一個 record 就進行寫入</li>\n<li>讀到檔案結尾就結束迴圈</li>\n<li>並且把 ‘E’, ‘O’, ‘F’ <strong>三個字元</strong>寫入檔案</li>\n</ul>\n</li>\n</ul>\n<pre><code>Line \tLoc \tSource statement \t\tObject code \n\n5 \t1000 \tCOPY \tSTART\t 1000 \t\t\n10 \t1000 \tFIRST \tSTL\t RETADR \t141033 \n15 \t1003 \tCLOOP \tJSUB\t RDREC \t\t482039 \n20 \t1006 \t\tLDA \t LENGTH \t001036 \n25 \t1009 \t\tCOMP\t ZERO \t\t281030 \n30 \t100C \t\tJEQ \t ENDFIL \t301015 \n35 \t100F \t\tJSUB\t WRREC \t\t482061 \n40 \t1012 \t\tJ \t CLOOP \t\t3C1003 \n45 \t1015 \tENDFIL \tLDA \t EOF \t\t00102A \n50 \t1018 \t\tSTA \t BUFFER \t0C1039 \n55 \t101B \t\tLDA \t THREE \t\t00102D \n60 \t101E \t\tSTA\t LENGTH \t0C1036 \n65 \t1021 \t\tJSUB \t WRREC \t\t482061 \n70 \t1024 \t\tLDL \t RETADR\t\t081033 \n75 \t1027 \t\tRSUB \t\t\t4C0000 \n80 \t102A \tEOF \tBYTE \t C'EOF' \t454F46 \n85 \t102D \tTHREE \tWORD \t 3 \t\t000003 \n90 \t1030 \tZERO \tWORD \t 0 \t\t000000 \n95 \t1033 \tRETADR \tRESW \t 1 \t\t\n100 \t1036 \tLENGTH \tRESW \t 1 \t\t\n105 \t1039 \tBUFFER \tRESB \t 4096 \t\t\n</code></pre>\n<ul>\n<li>\n<p><strong>Buffer</strong></p>\n<ul>\n<li>Is <strong>necessary</strong> because the <strong>I/O rates</strong> for the two devices may be very different.\n<ul>\n<li>such as a disk and a slow printing terminal</li>\n</ul>\n</li>\n<li>宣告在 Line 105，共有 4096 bytes</li>\n</ul>\n</li>\n<li>\n<p><strong>The end of the file to be copied</strong> ( <code>RDREC</code>  在讀的檔案的結尾)<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> is indicated by a <strong>zero-length record</strong></p>\n<ul>\n<li><code>RDREC</code>  會把這次讀取到的 record 的長度存在變數  <code>LENGTH</code></li>\n<li>Line 20~30: 如果  <code>LENGTH</code>  等於 0 就結束迴圈<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> 如果讀到長度 0 的 record 就停止讀取<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> 如果讀到檔案結尾就停止讀取</li>\n</ul>\n</li>\n<li>\n<p>When the <strong>end of file is detected</strong></p>\n<ul>\n<li>The program writes <strong> <code>&quot;EOF&quot;</code> </strong> on the output device (Line 45~50)</li>\n</ul>\n</li>\n<li>\n<p>Terminates by executing an <strong> <code>RSUB</code> </strong> instruction (Line 75)</p>\n</li>\n</ul>\n<div class=\"note info\">\n<ul>\n<li>Line 80 宣告的  <code>EOF</code>  是三個字元  <code>'E'</code> ,  <code>'O'</code> ,  <code>'F'</code> ，共占用 3 bytes</li>\n<li>所以可以用  <code>LDA EOF</code>  一次把三個字元存在 register A 中 (Line 45)</li>\n<li><code>STA BUFFER</code>  會一次把 register A 中 3 bytes 的資料寫入  <code>BUFFER</code>  的位置中，等同:\n<ul>\n<li>把 register A 中的三個字元依序放到記憶體  <code>BUFFER</code> ,  <code>BUFFER+1</code> ,  <code>BUFFER+2</code>  的三個位置中</li>\n<li><code>BUFFER[0] = 'E'</code> ,  <code>BUFFER[1] = 'O'</code> ,  <code>BUFFER[2] = 'F'</code></li>\n</ul>\n</li>\n<li>因為最後還要把  <code>BUFFER</code>  中的三個字元寫到 Output device 中\n<ul>\n<li><code>LENGTH</code>  要設為 3 (Line 55~60)</li>\n</ul>\n</li>\n</ul>\n</div>\n<h4 id=\"high-level-pseudo-code\"><a class=\"anchor\" href=\"#high-level-pseudo-code\">#</a> High-Level Pseudo Code</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">byte</span> <span class=\"token constant\">BUFFER</span><span class=\"token punctuation\">[</span><span class=\"token number\">4096</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token constant\">LENGTH</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">COPY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token function\">RDREC</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">LENGTH</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token function\">WRREC</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token constant\">BUFFER</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token char\">'E'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token constant\">BUFFER</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token char\">'O'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token constant\">BUFFER</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token char\">'F'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token constant\">LENGTH</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">WRREC</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"rdrec-read-records-subroutine\"><a class=\"anchor\" href=\"#rdrec-read-records-subroutine\">#</a>  <code>RDREC</code>  - Read Records Subroutine</h3>\n<pre><code>Line \tLoc \tSource statement \t\tObject code \n110 \t\t.\t\t\t\n115 \t\t.\tSUBROUTINE TO READ RECORD INTO BUFFER \n120 \t\t.\t\t\t\n125 \t2039 \tRDREC \tLDX \t ZERO \t\t041030 \n130 \t203C \t\tLDA \t ZERO \t\t001030 \n135 \t203F \tRLOOP \tTD  \t INPUT \t\tE0205D \n140 \t2042 \t\tJEQ \t RLOOP \t\t30203F \n145 \t2045 \t\tRD \t INPUT \t\tD8205D \n150 \t2048 \t\tCOMP \t ZERO \t\t281030 \n155 \t204B \t\tJEQ  \t EXIT \t\t302057 \n160 \t204E \t\tSTCH \t BUFFER,X       549039 \n165 \t2051 \t\tTIX \t MAXLEN \t2C205E \n170 \t2054 \t\tJLT \t RLOOP \t\t38203F \n175 \t2057 \tEXIT \tSTX \t LENGTH \t101036 \n180 \t205A \t\tRSUB \t\t\t4C0000 \n185 \t205D \tINPUT \tBYTE\t X'F1'\t\tF1 \n190 \t205E \tMAXLEN \tWORD \t 4096 \t\t001000 \n</code></pre>\n<ul>\n<li>If a record is longer than the length of the buffer (4096 bytes)<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span> only the first 4096 bytes are copied.</li>\n</ul>\n<div class=\"note info\">\n<ul>\n<li>Line 135~140\n<ul>\n<li>迴圈不斷測試 device，直到可以進行 IO</li>\n</ul>\n</li>\n<li>Line 145\n<ul>\n<li>讀入一個 byte 的資料</li>\n</ul>\n</li>\n<li>Line 150~155\n<ul>\n<li>如果讀入的資料等於 0 就跳出迴圈</li>\n</ul>\n</li>\n<li>Line 160\n<ul>\n<li>把讀入的資料存在  <code>BUFFER+X</code></li>\n</ul>\n</li>\n<li>Line 165~170\n<ul>\n<li>如果讀到的資料超過 4096 bytes 就跳出迴圈</li>\n</ul>\n</li>\n<li>Line 175\n<ul>\n<li>把讀到的資料長度存在  <code>LENGTH</code></li>\n</ul>\n</li>\n</ul>\n</div>\n<h4 id=\"high-level-pseudo-code-2\"><a class=\"anchor\" href=\"#high-level-pseudo-code-2\">#</a> High-Level Pseudo Code</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">RDREC</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Device</span> <span class=\"token constant\">INPUT</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Device</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"F1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token constant\">MAXLEN</span> <span class=\"token operator\">=</span> <span class=\"token number\">4096</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">X</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token constant\">LENGTH</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span> <span class=\"token constant\">INPUT</span><span class=\"token punctuation\">.</span><span class=\"token function\">isReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">char</span> c <span class=\"token operator\">=</span> <span class=\"token constant\">INPUT</span><span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token constant\">BUFFER</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">X</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> c<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">X</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">X</span> <span class=\"token operator\">==</span> <span class=\"token constant\">MAXLEN</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token constant\">LENGTH</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">X</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"wrrec-write-records-subroutine\"><a class=\"anchor\" href=\"#wrrec-write-records-subroutine\">#</a>  <code>WRREC</code>  - Write Records Subroutine</h3>\n<pre><code>Line \tLoc \tSource statement \t\tObject code \n195 \t\t.\t\n200 \t\t.\tSUBROUTINE TO WRITE RECORD FROM BUFFER \n205 \t\t.\t\n210 \t2061 \tWRREC \tLDX \t ZERO \t\t041030 \n215 \t2064 \tWLOOP \tTD \t OUTPUT \tE02079 \n220 \t2067 \t\tJEQ \t WLOOP \t\t302064 \n225 \t206A \t\tLDCH \t BUFFER,X \t509039 \n230 \t206D \t\tWD \t OUTPUT \tDC2079 \n235 \t2070 \t\tTIX \t LENGTH \t2C1036 \n240 \t2073 \t\tJLT \t WLOOP \t\t382064 \n245 \t2076 \t\tRSUB \t\t\t4C0000 \n250 \t2079 \tOUTPUT \tBYTE \t X'05' \t\t05 \n255 \t\t\tEND \t FIRST \t\n</code></pre>\n<div class=\"note info\">\n<ul>\n<li>Line 215~220\n<ul>\n<li>迴圈不斷測試 device，直到可以進行 IO</li>\n</ul>\n</li>\n<li>Line 225~20\n<ul>\n<li>把  <code>BUFFER[X]</code>  寫入 device</li>\n</ul>\n</li>\n<li>Line 235~240\n<ul>\n<li>判斷迴圈條件</li>\n</ul>\n</li>\n</ul>\n</div>\n<h4 id=\"high-level-pseudo-code-3\"><a class=\"anchor\" href=\"#high-level-pseudo-code-3\">#</a> High-Level Pseudo Code</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">WRREC</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Device</span> <span class=\"token constant\">OUTPUT</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Device</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"05\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">X</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token class-name\">X</span> <span class=\"token operator\">!=</span> <span class=\"token constant\">LENGTH</span><span class=\"token punctuation\">;</span> <span class=\"token class-name\">X</span><span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span> <span class=\"token constant\">OUTPUT</span><span class=\"token punctuation\">.</span><span class=\"token function\">isReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">char</span> c <span class=\"token operator\">=</span> <span class=\"token constant\">BUFFER</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">X</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token constant\">OUTPUT</span><span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"example-of-sicxe-program\"><a class=\"anchor\" href=\"#example-of-sicxe-program\">#</a> Example of SIC/XE Program</h2>\n<ul>\n<li><strong>prefix  <code>@</code> </strong>: <font>Indirect</font> addressing</li>\n<li><strong>prefix #</strong>: <font>Immediate</font> operands</li>\n<li><strong>prefix #&lt;LABEL&gt;</strong>: operands = the <strong>address</strong> of the LABEL</li>\n</ul>\n<pre><code>Line \tLoc \t   Source statement\t \tObject code \t \n\n5 \t0000 \tCOPY \tSTART \t0 \t\t\t \n10 \t0000 \tFIRST \tSTL \tRETADR \t\t17202D \t \n12 \t0003 \t\tLDB    #LENGTH \t69202D \t \n13 \t\t\tBASE \tLENGTH \t\t\t \n15 \t0006 \tCLOOP  +JSUB \tRDREC \t\t4B101036 \t \n20 \t000A \t\tLDA \tLENGTH \t\t032026 \t \n25 \t000D \t\tCOMP   #0 \t\t290000 \t \n30 \t0010 \t\tJEQ \tENDFIL \t\t332007 \t \n35 \t0013 \t       +JSUB \tWRREC \t\t4B10105D \t \n40 \t0017 \t\tJ \tCLOOP \t\t3F2FEC \t \n45 \t001A \tENDFIL \tLDA \tEOF \t\t032010 \t \n50 \t001D \t\tSTA \tBUFFER \t\t0F2016 \t \n55 \t0020 \t\tLDA    #3 \t\t010003 \t \n60 \t0023 \t\tSTA \tLENGTH \t\t0F200D \t \n65 \t0026 \t       +JSUB\tWRREC \t\t4B10105D \t \n70 \t002A \t\tJ      @RETADR \t3E2003 \t \n80 \t002D \tEOF \tBYTE\tC'EOF' \t\t454F46 \t \n95 \t0030 \tRETADR \tRESW \t1 \t\t\t \n100 \t0033 \tLENGTH \tRESW\t1 \t\t\t \n105 \t0036 \tBUFFER \tRESB\t4096 \t\t\t \n110 \t\t.\t\t\t\t \n115 \t\t.\tSUBROUTINE TO READ RECORD INTO BUFFER \t \n120 \t\t.\t\t\t\t \n125 \t1036 \tRDREC \tCLEAR \tX \t\tB410 \t \n130 \t1038 \t\tCLEAR \tA \t\tB400 \t \n132 \t103A \t\tCLEAR \tS \t\tB440 \t \n133 \t103C \t       +LDT    #4096\t\t75101000 \t \n135 \t1040 \tRLOOP \tTD \tINPUT \t\tE32019 \t \n140 \t1043 \t\tJEQ \tRLOOP \t\t332FFA \t \n145 \t1046 \t\tRD \tINPUT \t\tDB2013 \t \n150 \t1049 \t\tCOMPR \tA,S \t\tA004 \t \n155 \t104B \t\tJEQ \tEXIT \t\t332008 \t \n160 \t104E \t\tSTCH\tBUFFER,X \t57C003 \t \n165 \t1051 \t\tTIXR \tT \t\tB850 \t \n170 \t1053 \t\tJLT \tRLOOP \t\t3B2FEA \t \n175 \t1056 \tEXIT \tSTX \tLENGTH \t\t134000 \t \n180 \t1059 \t\tRSUB \t\t\t4F0000 \t \n185 \t105C \tINPUT \tBYTE \tX'F1' \t\tF1 \t \n195 \t\t.\t\t \n200 \t\t.\tSUBROUTINE TO WRITE RECORD FROM BUFFER \t \n205 \t\t.\t\t \n210 \t105D \tWRREC \tCLEAR \tX \t\tB410 \t \n212 \t105F \t\tLDT \tLENGTH \t\t774000 \t \n215 \t1062 \tWLOOP \tTD \tOUTPUT \t\tE32011 \t \n220 \t1065 \t\tJEQ \tWLOOP \t\t332FFA \t \n225 \t1068 \t\tLDCH \tBUFFER,X \t53C003 \t \n230 \t106B \t\tWD \tOUTPUT \t\tDF2008 \t \n235 \t106E \t\tTIXR \tT \t\tB850 \t \n240 \t1070 \t\tJLT \tWLOOP \t\t3B2FEF \t \n245 \t1073 \t\tRSUB \t\t\t4F0000 \t \n250  \t1076    OUTPUT BYTE  \tX'05'  \t\t05 \t \n255                    END     FIRST\n</code></pre>\n",
            "tags": [
                "System Software",
                "Ch02",
                "System Software",
                "Assembler"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/26/Coding/leetcode/Easy/258%20Add%20Digits/",
            "url": "https://chienikao.github.io/2023/04/26/Coding/leetcode/Easy/258%20Add%20Digits/",
            "title": "258. Add Digits",
            "date_published": "2023-04-26T01:05:08.000Z",
            "content_html": "<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvYWRkLWRpZ2l0cy9kZXNjcmlwdGlvbi8=\">題目敘述</span></h2>\n<p>Given an integer  <code>num</code> , repeatedly add all its digits until the result has only one digit, and return it.</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<blockquote>\n<p><strong>Input</strong>: num = 38<br>\n<strong>Output</strong>: 2<br>\n<strong>Explanation</strong>: The process is<br>\n38 --&gt; 3 + 8 --&gt; 11<br>\n11 --&gt; 1 + 1 --&gt; 2<br>\nSince 2 has only one digit, return it.</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<blockquote>\n<p><strong>Input</strong>: num = 0<br>\n<strong>Output</strong>: 0</p>\n</blockquote>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">addDigits</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> num<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">int</span> res <span class=\"token operator\">=</span> num<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>num <span class=\"token operator\">></span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>num <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                res <span class=\"token operator\">+=</span> num <span class=\"token operator\">%</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                num <span class=\"token operator\">/=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            num <span class=\"token operator\">=</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">addDigits</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> num<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">int</span> res <span class=\"token operator\">=</span> num<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>num <span class=\"token operator\">></span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>num <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                res <span class=\"token operator\">+=</span> num <span class=\"token operator\">%</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                num <span class=\"token operator\">/=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            num <span class=\"token operator\">=</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">addDigits</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> num<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        res <span class=\"token operator\">=</span> num</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">while</span> num <span class=\"token operator\">></span> <span class=\"token number\">9</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            res <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token keyword\">while</span> num <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                res <span class=\"token operator\">+=</span> num <span class=\"token operator\">%</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                num <span class=\"token operator\">//=</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            num <span class=\"token operator\">=</span> res</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> res</pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Easy",
                "Leetcode",
                "Math",
                "Easy",
                "Simulation",
                "Number Theory"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/25/Algorithm/Backtracking/",
            "url": "https://chienikao.github.io/2023/04/25/Algorithm/Backtracking/",
            "title": "Backtracking",
            "date_published": "2023-04-25T14:19:23.000Z",
            "content_html": "<h2 id=\"backtracking\"><a class=\"anchor\" href=\"#backtracking\">#</a> Backtracking</h2>\n<p>Backtracking，枚舉多維度數值的方法。<br>\n運用遞迴依序窮舉各個維度的數值，製作所有可能的多維度數值，並且在遞迴途中避免枚舉不正確的多維度數值。<br>\nBacktracking is a <span class=\"red\">modified depth-first search of a tree (DFS)</span>.</p>\n<h3 id=\"promising\"><a class=\"anchor\" href=\"#promising\">#</a> <a href=\"#%E8%A8%BB%E8%A7%A3\">Promising<sub>1</sub></a> &amp; Nonpromising</h3>\n<ul>\n<li>A node is <span class=\"red\"><strong>Nonpromising</strong></span> if it cannot possibly lead to a solution.</li>\n<li>Otherwise, <span class=\"red\"><strong>Promising</strong></span>.</li>\n</ul>\n<h3 id=\"pruning\"><a class=\"anchor\" href=\"#pruning\">#</a> <a href=\"#%E8%A8%BB%E8%A7%A3\">Pruning<sub>2</sub></a></h3>\n<ul>\n<li>Backtracking consists of\n<ul>\n<li>doing a <strong>DFS</strong> of a State Space Tree</li>\n<li>checking whether each node is promising</li>\n<li>if it is nonpromising, backtracking to the node’s parent.</li>\n</ul>\n</li>\n<li><em>Pruned State Space Tree</em>: the subtree consisting of the visited nodes (after pruning).</li>\n</ul>\n<h2 id=\"n-queens-problem-n-皇后問題\"><a class=\"anchor\" href=\"#n-queens-problem-n-皇后問題\">#</a> n-Queens Problem (n 皇后問題)</h2>\n<p>n 皇后問題的目標在於，在一個 n*n 大小的棋盤上擺放 n 個皇后，要讓他們恰好無法互相攻擊對方 (no two queens threaten each other)。也就是說，<strong>任何一個皇后都要在不同行 (row)、不同列 (column) 且不同斜線 (diagonal) 上</strong>。</p>\n<h3 id=\"想法\"><a class=\"anchor\" href=\"#想法\">#</a> 想法</h3>\n<ul>\n<li>以 4*4 的棋盤為例:</li>\n</ul>\n<p>我們可以很直覺地想到，任何一個皇后不會在同一個列上 (row)。<br>\n因此，這個問題可以簡化成，什麼樣的行 (column) 組合能符合題目的要求。<br>\n因為每個皇后都有 4 個選擇，所以我們總共有 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>4</mn><mo>×</mo><mn>4</mn><mo>×</mo><mn>4</mn><mo>×</mo><mn>4</mn><mo>=</mo><mn>256</mn></mrow><annotation encoding=\"application/x-tex\">4 \\times 4 \\times 4 \\times 4 = 256</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span></span></span></span> 種可能的組合。我們可以建立一個樹來表達所有的組合。</p>\n<div class=\"note info\">\n<p>The column choices for the first queen (the queen in row 1) are stored in level-1 nodes in the tree (recall that the root is at level 0), the column choices for the second queen (the queen in row 2) are stored in level-2 nodes, and so on.</p>\n<p><img data-src=\"https://i.imgur.com/rKk7YPL.png\" alt=\"\"></p>\n<p>A <span class=\"red\">path</span> from the <span class=\"red\">root to leaf</span> is a <span class=\"red\">candidate solution</span>. This tree is called a <strong><a href=\"#%E8%A8%BB%E8%A7%A3\">state space tree<sub>2</sub></a></strong>.<br>\nThe entire tree has 256 leaves, one for each candidate solution.</p>\n</div>\n<p>為了更有效率的搜尋解答，我們可以設置一些條件來篩選掉那些不可能的路徑。<br>\n同上例子:</p>\n<ul>\n<li>我們知道，<em>沒有兩個皇后可以在同一行上</em>。假設我們已將  <code>皇后1</code>  放在第一行上 (<em>&lt;1, 1&gt;</em>)，之後就不可再有人可以放在第一行上，因此當我們遇到 <em>&lt;2, 1&gt;</em> 時就可以直接跳過。</li>\n<li>同樣的，<em>沒有兩個皇后可以在同一個對角線上</em>。所以遇到 <em>&lt;2, 2&gt;</em> 時，我們就可以不用再去管它後面的路徑了。</li>\n</ul>\n<div class=\"note success\">\n<p>An ordered pair  <code>&lt;i, j&gt;</code>  is stored at each node.<br>\nThis ordered pair means that the queen in the  <code>ith</code>  row is placed in the  <code>jth</code>  column.</p>\n</div>\n<div class=\"note danger\">\n<p><strong>NOTE:</strong> The nodes are visited according to a <strong>depth-first search (DFS)</strong> in which the children of a node are visited <strong>from left to right</strong>.</p>\n</div>\n<p><img data-src=\"https://i.imgur.com/QOH492o.png\" alt=\"\"></p>\n<h3 id=\"pruning-2\"><a class=\"anchor\" href=\"#pruning-2\">#</a> Pruning</h3>\n<blockquote>\n<ol>\n<li because=\"\" queen=\"\" 1=\"\" is=\"\" the=\"\" first=\"\" queen=\"\" positioned=\"\"><em>&lt;1, 1&gt;</em> is promising.</li>\n<li><em>&lt;2, 1&gt;</em> is nonpromising. {because queen 1 is in column 1}<br>\n<em>&lt;2, 2&gt;</em> is  nonpromising. {because queen 1 is on left diagonal}<br>\n<em>&lt;2, 3&gt;</em> is promising.</li>\n<li because=\"\" queen=\"\" 2=\"\" is=\"\" on=\"\" left=\"\" diagonal=\"\"><em>&lt; 3, 1&gt;</em> is nonpromising {because queen 1 is in column 1}<br>\n<em>&lt; 3, 2&gt;</em> is nonpromising {because queen 2 is on right diagonal}<br>\n<em>&lt; 3, 3&gt;</em> is nonpromising {because queen 2 is in column 3}<br>\n<em>&lt; 3, 4&gt;</em> is nonpromising</li>\n<li>Backtrack to <em>&lt;1, 1&gt;</em><br>\n<em>&lt;2, 4&gt;</em> is promising</li>\n<li><em>&lt; 3, 1&gt;</em> is nonpromising {because queen 1 is in column 1}<br>\n<em>&lt; 3, 2&gt;</em> is promising {this is the second time we’ve tried <em>&lt; 3, 2&gt;</em>}</li>\n</ol>\n</blockquote>\n<p><img data-src=\"https://i.imgur.com/29SDBun.png\" alt=\"\"></p>\n<p>這裡顯示經過 backtracking 後部分的 pruned state space tree<br>\n<img data-src=\"https://i.imgur.com/hqvoyOD.png\" alt=\"\"></p>\n<h3 id=\"promising-function\"><a class=\"anchor\" href=\"#promising-function\">#</a> Promising Function</h3>\n<p>Check whether two queens are in the same column or diagonal.</p>\n<ul>\n<li>let  <code>col(i)</code>  be the column where the queen in the <em>i</em>th row is located, then to check whether the queen in the <em>k</em>th row is in the same column.</li>\n</ul>\n<div class=\"note danger no-icon\">\n<p>we need to check  <code>col(i) = col(k)</code></p>\n</div>\n<ul>\n<li>to check the diagonal, suppose  <code>n=8</code> . In the following figure, the queen in row 6 is being threatened in its left diagonal by the queen in row 3, and in its right diagonal by the queen in row 2.</li>\n</ul>\n<div class=\"note danger no-icon\">\n<p>Notice that:</p>\n<ul>\n<li>left:  <code>col(6) - col(3) = 4 - 1 = 3 = 6 - 3</code></li>\n<li>right:  <code>col(6) - col(2) = 4 - 8 = -4 = -(6 - 2)</code></li>\n</ul>\n<p><strong>The difference in the columns is the same as the difference in the rows</strong>.</p>\n</div>\n<p><img data-src=\"https://i.imgur.com/VO0CIbM.png\" alt=\"\"></p>\n<h2 id=\"sum-of-subset-problem\"><a class=\"anchor\" href=\"#sum-of-subset-problem\">#</a> Sum-of-Subset Problem</h2>\n<p>There are  <code>n</code>  positive integers (weights)  <code>wi</code>  and a positive integer  <code>W</code> .<br>\nThe goal is to <em>find all subsets of the integers that sum to  <code>W</code> </em>.</p>\n<h3 id=\"promising-function-2\"><a class=\"anchor\" href=\"#promising-function-2\">#</a> Promising Function</h3>\n<p>If we sort the weights in ascending order before doing the search, then w<sub>i+1</sub> is the lightest weight remaining when we are at the <em>i</em>th level.</p>\n<p>Let <strong><em>weight</em> be the sum of the weights that have been included up to a node at level <em>i</em></strong>.<br>\nIf w<sub>i+1</sub> would bring the value of <em>weight</em> above <em>W</em>, then so would any other weight following it.</p>\n<div class=\"note danger no-icon\">\n<p>Therefore, unless <em>weight</em> <strong>equals</strong> <em>W</em> (one of a solution), a node at the <em>i</em>th level is nonpromising if</p>\n<ul>\n<li><code>weight + w_(i+1) &gt; W</code></li>\n</ul>\n</div>\n<p>There is another, if, at a given node, adding all the weights of the remaining items to <em>weight</em> does not make <em>weight</em> at least equal to <em>W</em>, then <em>weight</em> could never become equal to <em>W</em> by expanding beyond the node.</p>\n<div class=\"note danger no-icon\">\n<p>This means that if <strong><em>total</em> is the total weight of the remaining weights</strong>, a node is nonpromising if</p>\n<ul>\n<li><code>weight + total &lt; W</code></li>\n</ul>\n</div>\n<h3 id=\"pruned-state-space-tree\"><a class=\"anchor\" href=\"#pruned-state-space-tree\">#</a> Pruned State Space Tree</h3>\n<p>Supppose that  <code>n = 4</code> ,  <code>W = 13</code> , and  <code>w1 = 3</code> ,  <code>w2 = 4</code> ,  <code>w3 = 5</code> ,  <code>w4 = 6</code> .<br>\n<img data-src=\"https://i.imgur.com/1lk7Qdy.png\" alt=\"\"></p>\n<blockquote>\n<ul>\n<li><code>weight + w_(i+1) &gt; W</code> : The nodes containing 12, 8, and 9 are nonpromising because adding the next weight (6) would make the value of <em>weight</em> exceed <em>W</em>.</li>\n<li><code>weight + total &lt; W</code> : The nodes containing 7, 3, 4 and 0 are nonpromising because there is not enough total weight remaining to bring the value of <em>weight</em> up to <em>W</em>.</li>\n</ul>\n</blockquote>\n<h2 id=\"graph-coloring\"><a class=\"anchor\" href=\"#graph-coloring\">#</a> Graph Coloring</h2>\n<p>Find <strong>all</strong> ways to color an undireccted graph using <em>at most  <code>m</code> </em> different colors so that <strong>no two adjacent vertices are the same color</strong>.</p>\n<h3 id=\"example\"><a class=\"anchor\" href=\"#example\">#</a> Example</h3>\n<p><img data-src=\"https://i.imgur.com/qjcuChb.png\" alt=\"\"></p>\n<blockquote>\n<ul>\n<li>There is no solution to the 2-Coloring graph problem.</li>\n<li>One solution to the 3-Coloring graph problem for this graph is following:</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><em><strong>Vertex</strong></em></th>\n<th style=\"text-align:center\"><em><strong>Color</strong></em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">v1</td>\n<td style=\"text-align:center\">color 1</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">v2</td>\n<td style=\"text-align:center\">color 2</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">v3</td>\n<td style=\"text-align:center\">color 3</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">v4</td>\n<td style=\"text-align:center\">color 2</td>\n</tr>\n</tbody>\n</table>\n</blockquote>\n<h3 id=\"planar-graph\"><a class=\"anchor\" href=\"#planar-graph\">#</a> Planar Graph</h3>\n<p>A graph is called <span class=\"red\">planar</span> if it can be drawn in a plane in such a way that no two edges cross each other.</p>\n<ul>\n<li>For every map, there corresponds a planar graph.<br>\n<img data-src=\"https://i.imgur.com/51wJ24y.png\" alt=\"\"></li>\n</ul>\n<h3 id=\"pruned-state-space-tree-2\"><a class=\"anchor\" href=\"#pruned-state-space-tree-2\">#</a> Pruned State Space Tree</h3>\n<p><img data-src=\"https://i.imgur.com/66KwqZt.png\" alt=\"\"></p>\n<h2 id=\"hamiltonian-circuit\"><a class=\"anchor\" href=\"#hamiltonian-circuit\">#</a> Hamiltonian Circuit</h2>\n<p>Find a path that visits each vertex exactly once and then return to the starting vertex.</p>\n<ul>\n<li>\n<p>Similar to <em>TSP</em> (Traveling Salesman Problem) except that Hamiltonian Circuits Problem is only to find all tours in an <strong>undirected</strong> and <strong>unweighted</strong> graph.</p>\n</li>\n<li>\n<p>DP is inefficient for large TSP instance.</p>\n</li>\n</ul>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example</h3>\n<p><img data-src=\"https://i.imgur.com/1OQ6swJ.png\" alt=\"\"></p>\n<ul>\n<li>(a) contains the Hamiltoniac Circuit [v1, v2, v8, v7, v6, v5, v4, v3, v1]</li>\n<li>(b) does not contain a Hamiltonian Circuit</li>\n</ul>\n<h3 id=\"promising-function-3\"><a class=\"anchor\" href=\"#promising-function-3\">#</a> Promising Function</h3>\n<ul>\n<li>the <em>i</em>th node is adjacent to the (<em>i</em>+1)th node</li>\n<li>the (<em>n</em>-1)th node is adjacent to the <em>0</em>th node</li>\n<li>the <em>i</em>th node cannot be in the first <em>i</em>-1 nodes</li>\n</ul>\n<h2 id=\"0-1-knapsack-problem\"><a class=\"anchor\" href=\"#0-1-knapsack-problem\">#</a> 0-1 Knapsack Problem</h2>\n<ul>\n<li><em><strong>profit</strong></em>: the sum of the profits of the items included up to the node.</li>\n<li><em><strong>weight</strong></em>: the sum of the weights of those items.</li>\n<li>Suppose the node is at level <em>i</em>, and the node at level <span class=\"red\"><em>k</em> is the one that would bring the sum of the weights above <em>W</em></span>. Then,<div class=\"note danger no-icon\">\n<ul>\n<li><em><strong>totweight</strong></em> = <em>weight</em> + <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msub><mi>w</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\sum_{j=i+1}^{k-1}w_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.424826em;vertical-align:-0.43581800000000004em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9890079999999999em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></li>\n<li><em><strong>bound</strong></em> = (<em>profit</em> + <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msub><mi>p</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\sum_{j=i+1}^{k-1}p_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.424826em;vertical-align:-0.43581800000000004em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9890079999999999em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span>) + (W - <em>totweight</em>) <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>×</mo></mrow><annotation encoding=\"application/x-tex\">\\times</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">×</span></span></span></span> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mi>k</mi></msub><mi mathvariant=\"normal\">/</mi><msub><mi>w</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">p_k/w_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></li>\n</ul>\n</div>\n</li>\n</ul>\n<h3 id=\"promising-function-4\"><a class=\"anchor\" href=\"#promising-function-4\">#</a> Promising Function</h3>\n<p>If <em>maxprofit</em> is the value of the profit in the best solution found so far, then a node at level <em>i</em> is <strong>nonpromising</strong> if <span class=\"red\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>d</mi><mo>≤</mo><mi>m</mi><mi>a</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>o</mi><mi>f</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">bound \\le maxprofit</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83041em;vertical-align:-0.13597em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">t</span></span></span></span></span>.</p>\n<h3 id=\"example-3\"><a class=\"anchor\" href=\"#example-3\">#</a> Example</h3>\n<p>Suppose that  <code>n = 4</code> ,  <code>W = 16</code> , and we have the following:</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">i</th>\n<th style=\"text-align:center\">pi</th>\n<th style=\"text-align:center\">wi</th>\n<th style=\"text-align:center\">pi/wi</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">$40</td>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">$20</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">$30</td>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">$6</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">$50</td>\n<td style=\"text-align:center\">10</td>\n<td style=\"text-align:center\">$5</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">$10</td>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">$2</td>\n</tr>\n</tbody>\n</table>\n<p><img data-src=\"https://i.imgur.com/HhtCw0C.png\" alt=\"\"></p>\n<p><strong>Nonpromising node</strong>:<br>\n<mark><strong>node(3, 1)</strong></mark></p>\n<ol>\n<li>Compute its  <code>profit</code>  and  <code>weight</code> .\n<ul>\n<li><code>profit = 70 + 50 = 120</code></li>\n<li><code>weight = 7 + 10 = 17</code></li>\n</ul>\n</li>\n<li>Because its  <code>weight = 17</code>  is greater than  <code>W = 16</code> ,  <code>maxprofit</code>  does not change.</li>\n<li>Determine that it is <strong>nonpromising</strong> because its  <code>weight = 17</code>  is greater than or equal to  <code>W = 16</code> .</li>\n<li>The  <code>bound</code>  for this node is <strong>not computed</strong>, because its  <code>weight</code>  has determined it to be <strong>nonpromising</strong></li>\n<li>Backtrack to node(2, 1).</li>\n</ol>\n<p><mark><strong>node(4, 1)</strong></mark></p>\n<ol>\n<li>Compute its  <code>profit</code>  and  <code>weight</code> .\n<ul>\n<li><code>profit = 80 + 0 = 80</code></li>\n<li><code>weight = 7 + 5 = 12</code></li>\n</ul>\n</li>\n<li>Because its  <code>weight = 12</code>  is <strong>less</strong> than  <code>W = 16</code> , and its  <code>profit = 80</code>  is <strong>greater</strong> than  <code>maxprofit = 70</code> , set  <code>maxprofit = 80</code>  .</li>\n<li>Compute its  <code>bound</code> . The fourth weight would not bring the sum of the items above  <code>W</code> , and there are only four items. Therefore,  <code>k = 5</code> , and  <code>bound = 80 + 0 = 80</code> .</li>\n<li>Determine that it is <strong>nonpromising</strong> because its  <code>bound = 80</code>  <strong>equal</strong> to  <code>maxprofit = 80</code> .</li>\n<li>Backtrack to node(3, 2).</li>\n</ol>\n<p><mark><strong>node(4, 2)</strong></mark></p>\n<ol>\n<li>Compute its  <code>profit</code>  and  <code>weight</code> .\n<ul>\n<li><code>profit = 70 + 0 = 70</code></li>\n<li><code>weight = 7 + 0 = 7</code></li>\n</ul>\n</li>\n<li><code>k = 5</code> ,  <code>bound = 70 + 0 = 70</code> .</li>\n<li>Determine that the node is <strong>nonpromising</strong> because its  <code>bound = 70</code>  is <strong>less</strong> than  <code>maxprofit = 80</code> .</li>\n<li>Backtrack to node(1, 1)</li>\n</ol>\n<h2 id=\"註解\"><a class=\"anchor\" href=\"#註解\">#</a> 註解</h2>\n<ol>\n<li><a href=\"#backtracking\">promising <em>有希望的；有出息的；有前途的</em></a></li>\n</ol>\n<blockquote>\n<p>Something that is promising shows signs that it is going to be successful or enjoyable.<br>\n<strong>ex.</strong> <em>They won the award for the most promising new band of the year.</em></p>\n</blockquote>\n<ol start=\"2\">\n<li><a href=\"#pruning2\">prune <em>v.</em></a></li>\n</ol>\n<blockquote>\n<ul>\n<li><em>修剪（樹枝）</em><br>\nTo cut off branches from a tree, bush, or plant, especially so that it will grow better in the future.<br>\n<strong>ex.</strong> <em>She spent the afternoon pruning roses.</em></li>\n<li><em>刪除，刪節</em><br>\n To reduce something by removing things that are not necessary.<br>\n<strong>ex.</strong> <em>I felt his essay needed a little pruning.</em></li>\n</ul>\n</blockquote>\n<ol start=\"3\">\n<li><a href=\"#%E6%83%B3%E6%B3%95\">state space tree <em>狀態空間樹</em></a></li>\n</ol>\n<blockquote>\n<p>選定一個狀態，衍生各式各樣的狀態，形成一棵樹。狀態空間樹無窮無盡。狀態可能重複出現、四處散布。</p>\n</blockquote>\n",
            "tags": [
                "Algorithm",
                "Algorithm",
                "Backtracking"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/25/%E7%B6%B2%E8%B7%AF%E7%88%AC%E8%9F%B2%E8%88%87%E8%B3%87%E6%96%99%E5%88%86%E6%9E%90/Ch01%20%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A/",
            "url": "https://chienikao.github.io/2023/04/25/%E7%B6%B2%E8%B7%AF%E7%88%AC%E8%9F%B2%E8%88%87%E8%B3%87%E6%96%99%E5%88%86%E6%9E%90/Ch01%20%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A/",
            "title": "01 - 環境設定",
            "date_published": "2023-04-25T11:30:37.000Z",
            "content_html": "<h2 id=\"環境設定及套件安裝-anaconda\"><a class=\"anchor\" href=\"#環境設定及套件安裝-anaconda\">#</a> 環境設定及套件安裝 : Anaconda</h2>\n<p>Anaconda 是適合資料科學工作者的開發套件管理系統，針對 Python 使用者提供簡單的安裝與豐富的套件。</p>\n<p>Anaconda 包含了 Python 的實作環境，以及與網路爬蟲、資料分析、資料視覺化、機器學習相關的多種套件，如網路爬蟲最常使用到的套件 <em><strong>Requests</strong></em> 與 <em><strong>BeautifulSoup</strong></em> ，資料分析與視覺化套件 <em><strong>Pandas</strong></em> 與 <em><strong>Matplotlib</strong></em> ，自然語言處理套件 <em><strong>nltk</strong></em> 與 <em><strong>spaCy</strong></em> ，機器學習與深度學習套件 <em><strong>scikit-learn</strong></em> 與 <em><strong>TensorFlow</strong></em> 等，都可以透過 Anaconda 的圖形環境來安裝。</p>\n<p>其自帶的 IDE 如 <em><strong>Jupyter Notebook</strong></em> 與 <em><strong>Sypder</strong></em> 等也提供了整合開發環境，讓開發者可以更簡便地逐行執行或分享程式碼內容。</p>\n<h3 id=\"下載-anaconda\"><a class=\"anchor\" href=\"#下載-anaconda\">#</a> 下載 Anaconda</h3>\n<p>首先到以下網址下載 Anaconda:<br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYW5hY29uZGEuY29tL2Rvd25sb2FkLw==\">https://www.anaconda.com/download/</span></p>\n<p><img data-src=\"https://i.imgur.com/3zbvesT.png\" alt=\"\"></p>\n",
            "tags": [
                "Programming",
                "Python",
                "網路爬蟲與資料分析",
                "Python",
                "Web Scraping",
                "Data Analysis"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/25/Coding/leetcode/Medium/2336%20Smallest%20Number%20in%20Infinite%20Set/",
            "url": "https://chienikao.github.io/2023/04/25/Coding/leetcode/Medium/2336%20Smallest%20Number%20in%20Infinite%20Set/",
            "title": "2336. Smallest Number in Infinite Set",
            "date_published": "2023-04-25T06:18:59.000Z",
            "content_html": "<p>⭐️⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvc21hbGxlc3QtbnVtYmVyLWluLWluZmluaXRlLXNldC8=\">題目敘述</span></h2>\n<p>You have a set which contains all positive integers  <code>[1, 2, 3, 4, 5, ...]</code> .</p>\n<p>Implement the  <code>SmallestInfiniteSet</code>  class:</p>\n<ul>\n<li><code>SmallestInfiniteSet()</code>  Initializes the <strong>SmallestInfiniteSet</strong> object to contain <strong>all</strong> positive integers.</li>\n<li><code>int popSmallest()</code>  <strong>Removes</strong> and returns the smallest integer contained in the infinite set.</li>\n<li><code>void addBack(int num)</code>  <strong>Adds</strong> a positive integer  <code>num</code>  back into the infinite set, if it is <strong>not</strong> already in the infinite set.</li>\n</ul>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<blockquote>\n<p><strong>Input</strong><br>\n[“SmallestInfiniteSet”, “addBack”, “popSmallest”, “popSmallest”, “popSmallest”, “addBack”, “popSmallest”, “popSmallest”, “popSmallest”]<br>\n[[], [2], [], [], [], [1], [], [], []]<br>\n<strong>Output</strong><br>\n[null, null, 1, 2, 3, null, 1, 4, 5]</p>\n<p><strong>Explanation</strong><br>\nSmallestInfiniteSet smallestInfiniteSet = new SmallestInfiniteSet();<br>\nsmallestInfiniteSet.addBack(2);    // 2 is already in the set, so no change is made.<br>\nsmallestInfiniteSet.popSmallest(); // return 1, since 1 is the smallest number, and remove it from the set.<br>\nsmallestInfiniteSet.popSmallest(); // return 2, and remove it from the set.<br>\nsmallestInfiniteSet.popSmallest(); // return 3, and remove it from the set.<br>\nsmallestInfiniteSet.addBack(1);    // 1 is added back to the set.<br>\nsmallestInfiniteSet.popSmallest(); // return 1, since 1 was added back to the set and<br>\n// is the smallest number, and remove it from the set.<br>\nsmallestInfiniteSet.popSmallest(); // return 4, and remove it from the set.<br>\nsmallestInfiniteSet.popSmallest(); // return 5, and remove it from the set.</p>\n</blockquote>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">SmallestInfiniteSet</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">private</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> min_num <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    priority_queue<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> greater<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span> pq<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    unordered_set<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> nums<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">SmallestInfiniteSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        pq <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">priority_queue</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> greater<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">>></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        nums <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">unordered_set</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">popSmallest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>pq<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">int</span> res <span class=\"token operator\">=</span> pq<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            pq<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            nums<span class=\"token punctuation\">.</span><span class=\"token function\">erase</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        min_num<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> min_num <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">void</span> <span class=\"token function\">addBack</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> num<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>min_num <span class=\"token operator\">></span> num <span class=\"token operator\">&amp;&amp;</span> nums<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> nums<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            pq<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            nums<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PriorityQueue</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">SmallestInfiniteSet</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">PriorityQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> pQ<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SmallestInfiniteSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        pQ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PriorityQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            pQ<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">popSmallest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">int</span> num <span class=\"token operator\">=</span> pQ<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">return</span> num<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addBack</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> num<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>pQ<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            pQ<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">SmallestInfiniteSet</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        self<span class=\"token punctuation\">.</span>min_num <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        self<span class=\"token punctuation\">.</span>pq <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>        </pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">popSmallest</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>pq<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">return</span> heapq<span class=\"token punctuation\">.</span>heappop<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>pq<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        self<span class=\"token punctuation\">.</span>min_num <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>min_num <span class=\"token operator\">-</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">addBack</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> num<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>min_num <span class=\"token operator\">></span> num <span class=\"token keyword\">and</span> num <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> self<span class=\"token punctuation\">.</span>pq<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            heapq<span class=\"token punctuation\">.</span>heappush<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>pq<span class=\"token punctuation\">,</span> num<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Medium",
                "Leetcode",
                "Medium",
                "Heap (Priority Queue)",
                "Hash Table",
                "Design"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/24/Coding/leetcode/Hard/1416%20Restore%20The%20Array/",
            "url": "https://chienikao.github.io/2023/04/24/Coding/leetcode/Hard/1416%20Restore%20The%20Array/",
            "title": "1416. Restore The Array",
            "date_published": "2023-04-24T05:52:32.000Z",
            "content_html": "<p>⭐️⭐️⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvcmVzdG9yZS10aGUtYXJyYXkv\">題目敘述</span></h2>\n<p>A program was supposed to print an array of integers. The program forgot to print whitespaces and the array is printed as a string of digits  <code>s</code>  and all we know is that all integers in the array were in the range  <code>[1, k]</code>  and there are no leading zeros in the array.</p>\n<p>Given the string  <code>s</code>  and the integer  <code>k</code> , return <em>the number of the possible arrays that can be printed as  <code>s</code>  using the mentioned program</em>. Since the answer may be very large, return it <strong>modulo</strong>  <code>1e9 + 7</code> .</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<blockquote>\n<p><strong>Input</strong>: s = “1000”, k = 10000<br>\n<strong>Output</strong>: 1<br>\n<strong>Explanation</strong>: The only possible array is [1000]</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<blockquote>\n<p><strong>Input</strong>: s = “1000”, k = 10<br>\n<strong>Output</strong>: 0<br>\n<strong>Explanation</strong>: There cannot be an array that was printed this way and has all integer &gt;= 1 and &lt;= 10.</p>\n</blockquote>\n<h3 id=\"example-3\"><a class=\"anchor\" href=\"#example-3\">#</a> Example 3</h3>\n<blockquote>\n<p><strong>Input</strong>: s = “1317”, k = 2000<br>\n<strong>Output</strong>: 8<br>\n<strong>Explanation</strong>: Possible arrays are [1317],[131,7],[13,17],[1,317],[13,1,7],[1,31,7],[1,3,17],[1,3,1,7]</p>\n</blockquote>\n<h2 id=\"解題思路\"><a class=\"anchor\" href=\"#解題思路\">#</a> 解題思路</h2>\n<p>Let  <code>dp[i]</code>  denote <strong>the number of ways to partition the substring  <code>s[i:n]</code>  into valid numbers</strong>. The base case is  <code>dp[n] = 1</code> , since there is only one way to partition an empty string.</p>\n<p>To compute  <code>dp[i]</code>  for a given index  <code>i</code> , we consider all possible substrings that can be formed starting from  <code>i</code> , such that the length of the substring is less than or equal to the number of digits in  <code>k</code> . We convert each substring to an integer and check if it is less than or equal to  <code>k</code> . If it is, we add the number of ways to partition the remaining string  <code>s[j+1:n]</code>  to  <code>dp[i]</code> , where  <code>j</code>  is the index of the last character in the substring. We sum up the values of  <code>dp[i]</code>  for all valid substrings to obtain the final value of  <code>dp[i]</code> .</p>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">numberOfArrays</span><span class=\"token punctuation\">(</span>string s<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> k<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">long</span> <span class=\"token keyword\">long</span><span class=\"token operator\">></span> <span class=\"token function\">dp</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        dp<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token char\">'0'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">long</span> <span class=\"token keyword\">long</span> num <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                    <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token function\">stoi</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token operator\">-</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">></span> k<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                    num <span class=\"token operator\">+=</span> dp<span class=\"token punctuation\">[</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>std<span class=\"token double-colon punctuation\">::</span>out_of_range<span class=\"token operator\">&amp;</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                j<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> num <span class=\"token operator\">%</span> <span class=\"token number\">1000000007</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">return</span> dp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<pre><code class=\"language-java\">\n</code></pre>\n</div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">numberOfArrays</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        n <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        dp <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        dp<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">if</span> s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token keyword\">continue</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            num <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            j <span class=\"token operator\">=</span> i</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">while</span> j <span class=\"token operator\">&lt;</span> n <span class=\"token keyword\">and</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">:</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> k<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                num <span class=\"token operator\">+=</span> dp<span class=\"token punctuation\">[</span>j<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                j <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            dp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> num <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">**</span> <span class=\"token number\">9</span> <span class=\"token operator\">+</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> dp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Hard",
                "String",
                "Leetcode",
                "Dynamic Programming"
            ]
        },
        {
            "id": "https://chienikao.github.io/2023/04/24/Coding/leetcode/Easy/1046%20Last%20Stone%20Weight/",
            "url": "https://chienikao.github.io/2023/04/24/Coding/leetcode/Easy/1046%20Last%20Stone%20Weight/",
            "title": "1046. Last Stone Weight",
            "date_published": "2023-04-24T05:46:44.000Z",
            "content_html": "<p>⭐️</p>\n<h2 id=\"題目敘述\"><a class=\"anchor\" href=\"#題目敘述\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWV0Y29kZS5jb20vcHJvYmxlbXMvbGFzdC1zdG9uZS13ZWlnaHQv\">題目敘述</span></h2>\n<p>You are given an array of integers  <code>stones</code>  where  <code>stones[i]</code>  is the weight of the  <code>ith</code>  stone.</p>\n<p>We are playing a game with the stones. On each turn, we choose the heaviest two stones and smash them together. Suppose the heaviest two stones have weights  <code>x</code>  and  <code>y</code>  with  <code>x &lt;= y</code> . The result of this smash is:</p>\n<ul>\n<li>If  <code>x == y</code> , both stones are destroyed, and</li>\n<li>If  <code>x != y</code> , the stone of weight  <code>x</code>  is destroyed, and the stone of weight y has new weight  <code>y - x</code> .</li>\n</ul>\n<p>At the end of the game, there is <strong>at most one</strong> stone left.</p>\n<p>Return <em>the weight of the last remaining stone</em>. If there are no stones left, return  <code>0</code> .</p>\n<h3 id=\"example-1\"><a class=\"anchor\" href=\"#example-1\">#</a> Example 1</h3>\n<blockquote>\n<p><strong>Input:</strong> stones = [2,7,4,1,8,1]<br>\n<strong>Output:</strong> 1<br>\n<strong>Explanation:</strong><br>\nWe combine 7 and 8 to get 1 so the array converts to [2,4,1,1,1] then,<br>\nwe combine 2 and 4 to get 2 so the array converts to [2,1,1,1] then,<br>\nwe combine 2 and 1 to get 1 so the array converts to [1,1,1] then,<br>\nwe combine 1 and 1 to get 0 so the array converts to [1] then that’s the value of the last stone.</p>\n</blockquote>\n<h3 id=\"example-2\"><a class=\"anchor\" href=\"#example-2\">#</a> Example 2</h3>\n<blockquote>\n<p><strong>Input:</strong> stones = [1]<br>\n<strong>Output:</strong> 1</p>\n</blockquote>\n<h2 id=\"解題思路\"><a class=\"anchor\" href=\"#解題思路\">#</a> 解題思路</h2>\n<h2 id=\"solution\"><a class=\"anchor\" href=\"#solution\">#</a> Solution</h2>\n<div class=\"tab\" data-id=\"code\" data-title=\"C++\">\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">lastStoneWeight</span><span class=\"token punctuation\">(</span>vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> stones<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        priority_queue<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> pq<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> stone <span class=\"token operator\">:</span> stones<span class=\"token punctuation\">)</span> pq<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>stone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>pq<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> pq<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            pq<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">int</span> y <span class=\"token operator\">=</span> pq<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            pq<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            pq<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> pq<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Java\">\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Comparator</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PriorityQueue</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">lastStoneWeight</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> stones<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>stones<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">PriorityQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> pQ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PriorityQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Comparator</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverseOrder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> s <span class=\"token operator\">:</span> stones<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            pQ<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>pQ<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">int</span> first <span class=\"token operator\">=</span> pQ<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">int</span> second <span class=\"token operator\">=</span> pQ<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            pQ<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>first <span class=\"token operator\">-</span> second<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> pQ<span class=\"token punctuation\">.</span><span class=\"token function\">peek</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"code\" data-title=\"Python\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">lastStoneWeight</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> stones<span class=\"token punctuation\">:</span> List<span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        max_heap <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span>stone <span class=\"token keyword\">for</span> stone <span class=\"token keyword\">in</span> stones<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        heapq<span class=\"token punctuation\">.</span>heapify<span class=\"token punctuation\">(</span>max_heap<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>max_heap<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            x <span class=\"token operator\">=</span> heapq<span class=\"token punctuation\">.</span>heappop<span class=\"token punctuation\">(</span>max_heap<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            y <span class=\"token operator\">=</span> heapq<span class=\"token punctuation\">.</span>heappop<span class=\"token punctuation\">(</span>max_heap<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">if</span> x <span class=\"token operator\">!=</span> y<span class=\"token punctuation\">:</span> heapq<span class=\"token punctuation\">.</span>heappush<span class=\"token punctuation\">(</span>max_heap<span class=\"token punctuation\">,</span> x <span class=\"token operator\">-</span> y<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">if</span> max_heap<span class=\"token punctuation\">:</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span>max_heap<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span></pre></td></tr></table></figure></div>\n",
            "tags": [
                "Coding",
                "Leetcode",
                "Easy",
                "Leetcode",
                "Easy",
                "Array",
                "Heap (Priority Queue)"
            ]
        }
    ]
}